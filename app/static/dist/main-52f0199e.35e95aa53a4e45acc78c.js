"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[3326],{5392:function(e,t,a){a.d(t,{A:function(){return S}});var r=a(96540),n=a(67561),l=a(3385),s=a(6782),o=a(87073),i=a(29696),c=a(86589),m=a(67984),d=a(81966),u=a(17133),g=a(20085),p=a(91385),b=a(89667),x=a(43197),y=a(93893),h=a(80827),f=a(94945),v=a(80964),E=a(46858),N=a(418),w=a(61248),k=a(98445),A=a(48697),C=a(47767),P=a(70700),S=({isOpen:e,onClose:t})=>{const[a,S]=(0,r.useState)(""),[z,j]=(0,r.useState)([]),[I,L]=(0,r.useState)(!1),T=(0,C.Zp)(),$=(0,r.useRef)(null),{data:M}=(0,P.Wl)("/api/products"),{data:_}=(0,P.Wl)("/api/ingredients"),{data:R}=(0,P.Wl)("/api/recipes"),{data:V}=(0,P.Wl)("/api/stores"),{data:O}=(0,P.Wl)("/api/users"),D=M?.data||M||[],H=_?.data||_||[],G=R?.data||R||[],F=V?.data||V||[],B=O?.data||O||[],q=()=>{const e=new CustomEvent("keyboardShortcut",{detail:{type:"theme",action:"toggle"}});window.dispatchEvent(e),t()},U=()=>{const e=new CustomEvent("chatControl",{detail:{action:"open"}});window.dispatchEvent(e),t()},W=(0,r.useMemo)((()=>[{type:"page",title:"Dashboard",path:"/",icon:s.A,description:"Panel principal con métricas y resúmenes",category:"Principal"},{type:"page",title:"Asistente AI",path:"/ai-assistant",icon:o.A,description:"Asistente inteligente para consultas",category:"Principal"},{type:"page",title:"Punto de Venta",path:"/pos",icon:i.A,description:"Sistema POS para ventas directas",category:"Ventas"},{type:"page",title:"Ventas",path:"/sales",icon:c.A,description:"Gestión de ventas y facturas",category:"Ventas"},{type:"page",title:"Tienda Web",path:"/shop",icon:m.A,description:"Tienda online para clientes",category:"Ventas"},{type:"page",title:"Entregas",path:"/deliveries",icon:d.A,description:"Gestión de entregas y envíos",category:"Ventas"},{type:"page",title:"Stock General",path:"/stock",icon:u.A,description:"Control general de inventario",category:"Inventario"},{type:"page",title:"Ingredientes",path:"/ingredients",icon:u.A,description:"Gestión de materias primas",category:"Inventario"},{type:"page",title:"Transacciones",path:"/transactions",icon:g.A,description:"Historial de movimientos de stock",category:"Inventario"},{type:"page",title:"Inventario",path:"/inventory",icon:u.A,description:"Vista completa del inventario",category:"Inventario"},{type:"page",title:"Recetas",path:"/recipes",icon:p.A,description:"Gestión de recetas y formulaciones",category:"Producción"},{type:"page",title:"Producción",path:"/production",icon:b.A,description:"Gestión de producción general",category:"Producción"},{type:"page",title:"Órdenes de Producción",path:"/production-orders",icon:b.A,description:"Órdenes y planificación de producción",category:"Producción"},{type:"page",title:"Asignar Lote",path:"/batch-assignment",icon:b.A,description:"Asignación de lotes a operarios",category:"Producción"},{type:"page",title:"Productos",path:"/products",icon:x.A,description:"Catálogo de productos terminados",category:"Gestión"},{type:"page",title:"Proveedores",path:"/providers",icon:y.A,description:"Gestión de proveedores",category:"Gestión"},{type:"page",title:"Tiendas",path:"/stores",icon:m.A,description:"Gestión de sucursales",category:"Gestión"},{type:"page",title:"Usuarios Web",path:"/web-users",icon:y.A,description:"Gestión de usuarios del sistema",category:"Gestión"},{type:"page",title:"Reportes",path:"/reports",icon:h.A,description:"Reportes y documentos",category:"Análisis"},{type:"page",title:"Analíticas",path:"/analytics",icon:f.A,description:"Métricas y análisis avanzado",category:"Análisis"},{type:"page",title:"Configuración",path:"/settings",icon:v.A,description:"Configuración del sistema",category:"Sistema"},{type:"action",title:"Nueva Venta",action:()=>T("/pos"),icon:E.A,description:"Abrir punto de venta",category:"Acciones"},{type:"action",title:"Agregar Producto",action:()=>T("/products"),icon:E.A,description:"Crear nuevo producto",category:"Acciones"},{type:"action",title:"Nueva Orden de Producción",action:()=>T("/production-orders"),icon:E.A,description:"Crear orden de producción",category:"Acciones"},{type:"action",title:"Agregar Ingrediente",action:()=>T("/ingredients"),icon:E.A,description:"Registrar nuevo ingrediente",category:"Acciones"},{type:"action",title:"Nueva Receta",action:()=>T("/recipes"),icon:E.A,description:"Crear nueva receta",category:"Acciones"},{type:"action",title:"Ver Stock Bajo",action:()=>T("/stock?filter=low"),icon:N.A,description:"Productos con stock bajo",category:"Alertas"},{type:"action",title:"Órdenes Pendientes",action:()=>T("/production-orders?status=pending"),icon:N.A,description:"Órdenes pendientes de producción",category:"Alertas"},{type:"action",title:"Entregas del Día",action:()=>T("/deliveries?date=today"),icon:d.A,description:"Entregas programadas para hoy",category:"Alertas"},{type:"command",title:"Cambiar Tema",action:q,icon:w.A,description:"Alternar modo oscuro/claro",category:"Comandos"},{type:"command",title:"Abrir Chat AI",action:U,icon:o.A,description:"Activar asistente virtual",category:"Comandos"},{type:"command",title:"Actualizar Datos",action:()=>window.location.reload(),icon:w.A,description:"Refrescar toda la información",category:"Comandos"},{type:"command",title:"Buscar en Todo",action:()=>S(""),icon:k.A,description:"Limpiar búsqueda actual",category:"Comandos"},...(Array.isArray(D)?D:[]).map((e=>({type:"product",title:e.name,path:`/products/${e.id}`,icon:x.A,description:`Precio: $${e.price} - Stock: ${e.stock||0} unidades`,category:"Productos",data:e}))),...(Array.isArray(H)?H:[]).map((e=>({type:"ingredient",title:e.name,path:`/ingredients/${e.id}`,icon:u.A,description:`Stock: ${e.current_stock||0} ${e.unit} - Proveedor: ${e.supplier_name||"N/A"}`,category:"Ingredientes",data:e}))),...(Array.isArray(G)?G:[]).map((e=>({type:"recipe",title:e.name,path:`/recipes/${e.id}`,icon:p.A,description:`Rendimiento: ${e.yield||0} - Ingredientes: ${e.ingredients_count||0}`,category:"Recetas",data:e}))),...(Array.isArray(F)?F:[]).map((e=>({type:"store",title:e.name,path:`/stores/${e.id}`,icon:m.A,description:`${e.address} - ${e.active?"Activa":"Inactiva"}`,category:"Tiendas",data:e}))),...(Array.isArray(B)?B:[]).map((e=>({type:"user",title:e.name,path:`/users/${e.id}`,icon:y.A,description:`${e.role||"Usuario"} - ${e.email||""}`,category:"Usuarios",data:e})))]),[D,H,G,F,B]);(0,r.useEffect)((()=>{const e=setTimeout((()=>{(async e=>{if(!e.trim())return void j([]);L(!0),await new Promise((e=>setTimeout(e,150)));const t=e.toLowerCase(),a=W.filter((e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))).sort(((e,a)=>{const r=e.title.toLowerCase(),n=a.title.toLowerCase();if(r===t)return-1;if(n===t)return 1;if(r.startsWith(t)&&!n.startsWith(t))return-1;if(n.startsWith(t)&&!r.startsWith(t))return 1;const l={page:0,action:1,product:2,command:3};return l[e.type]-l[a.type]}));j(a.slice(0,10)),L(!1)})(a)}),200);return()=>clearTimeout(e)}),[a]),(0,r.useEffect)((()=>{e&&$.current&&$.current.focus()}),[e]),(0,r.useEffect)((()=>{const a=e=>{"Escape"===e.key&&t()};return e&&document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}),[e,t]);const K=e=>{switch(e){case"page":return"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300";case"action":return"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300";case"product":return"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300";case"command":return"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}};return r.createElement(n.N,null,e&&r.createElement(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-start justify-center pt-20",onClick:e=>e.target===e.currentTarget&&t()},r.createElement(l.P.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.95},className:"w-full max-w-2xl mx-4 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden"},r.createElement("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex items-center space-x-3"},r.createElement("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},r.createElement(k.A,{size:20,className:"text-blue-600 dark:text-blue-400"})),r.createElement("div",null,r.createElement("h3",{className:"font-semibold text-gray-900 dark:text-white"},"Búsqueda Global"),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Busca páginas, productos, acciones y comandos"))),r.createElement("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors"},r.createElement(A.A,{size:20}))),r.createElement("div",{className:"p-4"},r.createElement("div",{className:"relative"},r.createElement(k.A,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.createElement("input",{ref:$,type:"text",value:a,onChange:e=>S(e.target.value),placeholder:"Escribe para buscar...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-lg",autoComplete:"off"}),a&&r.createElement("button",{onClick:()=>S(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600"},r.createElement(A.A,{size:18})))),r.createElement("div",{className:"max-h-96 overflow-y-auto"},I&&r.createElement("div",{className:"flex items-center justify-center py-8"},r.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})),!I&&a&&0===z.length&&r.createElement("div",{className:"text-center py-8"},r.createElement(k.A,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400"},'No se encontraron resultados para "',a,'"')),!I&&z.length>0&&r.createElement("div",{className:"p-2"},z.map(((e,a)=>{const n=(e=>{switch(e){case"page":return f.A;case"action":return E.A;case"product":return u.A;case"command":return w.A;default:return k.A}})(e.type);return r.createElement(l.P.div,{key:a,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"flex items-center space-x-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer transition-colors",onClick:()=>(e=>{e.action?e.action():e.path&&(T(e.path),t())})(e)},r.createElement("div",{className:"flex-shrink-0"},r.createElement("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg"},r.createElement(n,{size:20,className:"text-gray-600 dark:text-gray-400"}))),r.createElement("div",{className:"flex-1 min-w-0"},r.createElement("div",{className:"flex items-center space-x-2"},r.createElement("h4",{className:"font-medium text-gray-900 dark:text-white truncate"},e.title),r.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${K(e.type)}`},(e=>{switch(e){case"page":return"Página";case"action":return"Acción";case"product":return"Producto";case"command":return"Comando";default:return"Resultado"}})(e.type))),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate"},e.description)),r.createElement("div",{className:"flex-shrink-0"},r.createElement("div",{className:"text-xs text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"},"Enter")))}))),!a&&r.createElement("div",{className:"p-4"},r.createElement("div",{className:"text-center py-4"},r.createElement(w.A,{size:48,className:"mx-auto text-gray-300 dark:text-gray-600 mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400 mb-2"},"Comienza a escribir para buscar"),r.createElement("div",{className:"text-xs text-gray-400 space-y-1"},r.createElement("p",null,"• Usa ",r.createElement("kbd",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded"},"Ctrl+K")," para abrir búsqueda"),r.createElement("p",null,"• Busca páginas, productos, acciones y comandos"))))),r.createElement("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-700/50 border-t border-gray-200 dark:border-gray-600"},r.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},r.createElement("span",null,"↑↓ navegar • Enter seleccionar • Esc cerrar"),z.length>0&&r.createElement("span",null,z.length," resultado",1!==z.length?"s":""))))))}},21878:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(68614),o=a(55584);t.A=()=>{const[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=()=>{t(!0)},a=()=>{t(!1)},r=e=>{const{originalText:t,confidence:a}=e.detail;i(`"${t}" (${Math.round(100*a)}%)`),m(!0),setTimeout((()=>m(!1)),3e3)};return window.addEventListener("voiceStart",e),window.addEventListener("voiceEnd",a),window.addEventListener("voiceCommand",r),()=>{window.removeEventListener("voiceStart",e),window.removeEventListener("voiceEnd",a),window.removeEventListener("voiceCommand",r)}}),[]),r.createElement(n.N,null,(e||c)&&r.createElement(l.P.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50"},r.createElement("div",{className:"px-6 py-3 rounded-2xl shadow-lg border "+(e?"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-200":"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-200")},r.createElement("div",{className:"flex items-center space-x-3"},e?r.createElement(r.Fragment,null,r.createElement(l.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}},r.createElement(s.A,{size:20,className:"text-red-600 dark:text-red-400"})),r.createElement("div",null,r.createElement("p",{className:"font-medium"},"🎤 Escuchando..."),r.createElement("p",{className:"text-sm opacity-75"},"Di tu comando en español"))):c?r.createElement(r.Fragment,null,r.createElement(o.A,{size:20,className:"text-green-600 dark:text-green-400"}),r.createElement("div",null,r.createElement("p",{className:"font-medium"},"🎯 Comando reconocido"),r.createElement("p",{className:"text-sm opacity-75"},a))):null))))}},24402:function(e,t,a){var r=a(96540),n=a(47767),l=a(67561),s=a(3385),o=a(96844),i=a(48697),c=a(46858),m=a(27235),d=a(76316),u=a(27063),g=a(718),p=a(20053);const b=({metric:e,value:t,threshold:a,unit:n="ms",icon:l})=>{const s=t<=a.good,o=t<=a.ok,i=s?"good":o?"ok":"poor";return r.createElement("div",{className:(0,p.A)("flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium",{good:"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20",ok:"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20",poor:"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20"}[i])},r.createElement(l,{className:"h-4 w-4"}),r.createElement("span",null,e),r.createElement("span",{className:"font-mono"},"number"==typeof t?Math.round(t):t,n))};t.A=({showDevMetrics:e=!1})=>{const t=(0,n.zy)(),{measureRouteChange:a,measureMemoryUsage:p,generateReport:x,getMetrics:y}=(0,g.A)(),[h,f]=(0,r.useState)(!1),[v,E]=(0,r.useState)({}),[N,w]=(0,r.useState)(0),[k,A]=(0,r.useState)(null),C={fcp:{good:1800,ok:3e3},lcp:{good:2500,ok:4e3},route:{good:500,ok:1e3},memory:{good:50,ok:100}};return(0,r.useEffect)((()=>{const e=performance.now(),r=setTimeout((()=>{const r=a(t.pathname,e);w(r)}),100);return()=>clearTimeout(r)}),[t.pathname,a]),(0,r.useEffect)((()=>{const e=()=>{const e=y();E(e);const t=p();A(t)};e();const t=setInterval(e,5e3);return()=>clearInterval(t)}),[]),(0,r.useEffect)((()=>{const t=e||"true"===localStorage.getItem("venezia-show-performance");f(t)}),[e]),(0,r.useEffect)((()=>{const e=e=>{e.ctrlKey&&e.shiftKey&&"P"===e.key&&f((e=>{const t=!e;return localStorage.setItem("venezia-show-performance",t.toString()),t}))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[]),h?r.createElement(l.N,null,r.createElement(s.P.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:"fixed bottom-4 right-4 z-50 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-4 max-w-sm"},r.createElement("div",{className:"flex items-center justify-between mb-3"},r.createElement("div",{className:"flex items-center gap-2"},r.createElement(o.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),r.createElement("h3",{className:"font-semibold text-gray-900 dark:text-white text-sm"},"Performance")),r.createElement("button",{onClick:()=>f(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded"},r.createElement(i.A,{className:"h-4 w-4"}))),r.createElement("div",{className:"space-y-2"},r.createElement(b,{metric:"Route",value:N,threshold:C.route,icon:c.A}),v.firstContentfulPaint&&r.createElement(b,{metric:"FCP",value:v.firstContentfulPaint,threshold:C.fcp,icon:m.A}),v.largestContentfulPaint&&r.createElement(b,{metric:"LCP",value:v.largestContentfulPaint,threshold:C.lcp,icon:d.A}),k&&r.createElement(b,{metric:"Memory",value:k.used,threshold:C.memory,unit:"MB",icon:u.A})),r.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex gap-2"},r.createElement("button",{onClick:()=>{const e=x();console.log("📊 Performance Report:",e)},className:"flex-1 text-xs px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors"},"Generate Report"),r.createElement("button",{onClick:()=>window.location.reload(),className:"flex-1 text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},"Reload"))),r.createElement("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center"},"Ctrl+Shift+P to toggle"))):null}},28219:function(e,t,a){var r=a(96540),n=a(20053);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(null,arguments)}t.A=({children:e,variant:t="default",size:a="md",className:s,...o})=>r.createElement("span",l({className:(0,n.A)("inline-flex items-center font-medium rounded-full",{default:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",primary:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",secondary:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",info:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300"}[t],{xs:"text-xs px-2 py-0.5",sm:"text-xs px-2.5 py-0.5",md:"text-sm px-3 py-1",lg:"text-base px-4 py-1.5"}[a],s)},o),e)},31934:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(34224);t.A=()=>{const{errors:e,clearError:t}=(0,s.ux)(),[a,o]=(0,r.useState)([]);(0,r.useEffect)((()=>{const a=e.slice(-3).map((e=>({...e,visible:!0})));o(a);const r=a.map((e=>setTimeout((()=>{o((t=>t.map((t=>t.id===e.id?{...t,visible:!1}:t)))),setTimeout((()=>t(e.id)),300)}),5e3)));return()=>r.forEach(clearTimeout)}),[e,t]);const i=e=>{o((t=>t.map((t=>t.id===e?{...t,visible:!1}:t)))),setTimeout((()=>t(e)),300)};return r.createElement("div",{className:"fixed top-4 right-4 z-50 space-y-2"},r.createElement(n.N,null,a.filter((e=>e.visible)).map((e=>r.createElement(l.P.div,{key:e.id,initial:{opacity:0,x:300,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8},className:`\n              bg-white dark:bg-gray-800 border-l-4 rounded-lg shadow-lg p-4 \n              max-w-sm min-w-[300px] cursor-pointer\n              ${"high"===e.context?.severity?"border-red-500":"medium"===e.context?.severity?"border-yellow-500":"border-blue-500"}\n            `,onClick:()=>i(e.id)},r.createElement("div",{className:"flex items-start space-x-3"},r.createElement("div",{className:"text-lg flex-shrink-0"},(e=>{const t=e.context?.type,a=e.context?.severity;return"api"===t?"high"===a?"🚨":"medium"===a?"⚠️":"ℹ️":"javascript"===t?"🐛":"unhandledrejection"===t?"💥":"network"===t?"🌐":"❌"})(e)),r.createElement("div",{className:"flex-1 min-w-0"},r.createElement("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100"},(e=>{const t=e.context?.type;if("api"===t){const t=e.context?.status;if(404===t)return"Recurso no encontrado";if(401===t)return"No autorizado";if(403===t)return"Acceso denegado";if(t>=500)return"Error del servidor";if(t>=400)return"Error en la solicitud"}return"network"===t?"Error de conexión":e.error?.message||"Ha ocurrido un error"})(e)),e.context?.endpoint&&r.createElement("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1"},e.context.endpoint),r.createElement("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1"},new Date(e.timestamp).toLocaleTimeString())),r.createElement("button",{onClick:t=>{t.stopPropagation(),i(e.id)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 flex-shrink-0"},"✕")))))))}},37034:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(83211),o=a(45856);t.A=()=>{const[e,t]=(0,r.useState)(!1),[a,i]=(0,r.useState)("");return(0,r.useEffect)((()=>{let e;const a=o.A.on(o.q.CACHE_INVALIDATE,(()=>{t(!0),i("Actualizando datos..."),e=setTimeout((()=>{t(!1)}),2e3)})),r=o.A.on(o.q.AI_ACTION_COMPLETED,(a=>{t(!0),i({provider_created:"Proveedor agregado, actualizando lista...",product_created:"Producto creado, actualizando catálogo...",stock_updated:"Stock actualizado, refrescando inventario..."}[a?.action]||"Actualizando datos..."),e=setTimeout((()=>{t(!1)}),2e3)}));return()=>{clearTimeout(e),a(),r()}}),[]),r.createElement(n.N,null,e&&r.createElement(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-4 right-4 z-50"},r.createElement("div",{className:"bg-venezia-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center space-x-2"},r.createElement(s.A,{className:"h-5 w-5 animate-spin"}),r.createElement("span",{className:"text-sm font-medium"},a))))}},40323:function(e,t,a){a.d(t,{N:function(){return p}});var r=a(96540),n=a(3385),l=a(67561),s=a(44471),o=a(37946),i=a(418),c=a(97213),m=a(48697),d=a(20053);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},u.apply(null,arguments)}const g=({id:e,type:t="info",title:a,message:l,duration:u=5e3,onClose:g,persistent:p=!1,action:b,context:x})=>{const[y,h]=(0,r.useState)(!0);(0,r.useEffect)((()=>{if(!p&&u>0){const e=setTimeout((()=>{f()}),u);return()=>clearTimeout(e)}}),[u,p]);const f=()=>{h(!1),setTimeout((()=>{g?.(e)}),300)},v={success:s.A,error:o.A,warning:i.A,info:c.A}[t],E=a&&l?{title:a,message:l}:{sale_completed:{title:"Venta completada",message:"La venta se ha registrado exitosamente"},product_added:{title:"Producto agregado",message:"El producto se ha añadido al inventario"},stock_low:{title:"Stock bajo",message:"Algunos productos están por agotarse"},order_created:{title:"Orden creada",message:"Nueva orden de producción generada"},customer_added:{title:"Cliente registrado",message:"El cliente se ha añadido al sistema"},recipe_saved:{title:"Receta guardada",message:"La receta se ha actualizado correctamente"},login_success:{title:"Bienvenido",message:"Has iniciado sesión correctamente"},login_failed:{title:"Error de login",message:"Credenciales incorrectas"},data_saved:{title:"Guardado",message:"Los cambios se han guardado correctamente"},error_occurred:{title:"Error",message:"Ha ocurrido un error inesperado"}}[x]||{title:a||"Notificación",message:l||""};return y?r.createElement(n.P.div,{variants:{initial:{opacity:0,x:300,scale:.3},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.5,transition:{duration:.3}}},initial:"initial",animate:"animate",exit:"exit",className:(0,d.A)("toast-container",`toast-${t}`,"flex items-start gap-3 p-4 rounded-lg shadow-lg border max-w-md",{"bg-green-50 border-green-200 text-green-800":"success"===t,"bg-red-50 border-red-200 text-red-800":"error"===t,"bg-yellow-50 border-yellow-200 text-yellow-800":"warning"===t,"bg-blue-50 border-blue-200 text-blue-800":"info"===t})},r.createElement("div",{className:"flex-shrink-0"},r.createElement(v,{className:(0,d.A)("h-5 w-5",{"text-green-500":"success"===t,"text-red-500":"error"===t,"text-yellow-500":"warning"===t,"text-blue-500":"info"===t})})),r.createElement("div",{className:"flex-1 min-w-0"},E.title&&r.createElement("p",{className:"text-sm font-medium mb-1"},E.title),E.message&&r.createElement("p",{className:"text-sm opacity-90"},E.message),b&&r.createElement("div",{className:"mt-2"},r.createElement("button",{onClick:b.onClick,className:(0,d.A)("text-xs font-medium underline hover:no-underline",{"text-green-700 hover:text-green-800":"success"===t,"text-red-700 hover:text-red-800":"error"===t,"text-yellow-700 hover:text-yellow-800":"warning"===t,"text-blue-700 hover:text-blue-800":"info"===t})},b.label))),r.createElement("button",{onClick:f,className:"flex-shrink-0 p-1 rounded-md hover:bg-black/5 transition-colors","aria-label":"Cerrar notificación"},r.createElement(m.A,{className:"h-4 w-4 opacity-60"}))):null},p=({toasts:e=[],onRemove:t})=>r.createElement("div",{className:"fixed top-4 right-4 z-50 space-y-2"},r.createElement(l.N,{mode:"popLayout"},e.map((e=>r.createElement(g,u({key:e.id},e,{onClose:t}))))))},65024:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(62320),o=a(28004),i=a(15977),c=a(21456),m=a(6986),d=a(72284);t.A=()=>{const[e,t]=(0,r.useState)(!1),[a,u]=(0,r.useState)(!1),[g,p]=(0,r.useState)(0),b="true"===localStorage.getItem("venezia-disable-offline-indicator");(0,r.useEffect)((()=>{(()=>{const e=(0,m.uX)();t(e),e&&setTimeout((()=>{(0,m.uX)()&&u(!0)}),1e4)})();const e=setInterval((()=>{const e=(0,m.uX)();t(e),!e&&a&&setTimeout((()=>u(!1)),2e3)}),3e4),r=()=>{p(0),window.location.reload()},n=()=>{t(!0),u(!0)};return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{clearInterval(e),window.removeEventListener("online",r),window.removeEventListener("offline",n)}}),[a]);const x=()=>{p((e=>e+1)),window.location.reload()};return!a||b?null:r.createElement(n.N,null,r.createElement(l.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"fixed top-16 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full px-4"},r.createElement("div",{className:`\n          backdrop-blur-md rounded-lg shadow-lg p-4\n          ${e?"bg-orange-500/90 text-white":"bg-green-500/90 text-white"}\n        `},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-3"},e?r.createElement(s.A,{className:"h-5 w-5"}):r.createElement(o.A,{className:"h-5 w-5"}),r.createElement("div",null,r.createElement("h4",{className:"font-semibold"},e?"Modo Offline":"Conexión Restaurada"),r.createElement("p",{className:"text-sm opacity-90"},e?"Trabajando con datos locales. Los cambios se sincronizarán cuando se restaure la conexión.":"La conexión con el servidor ha sido restaurada."))),e&&r.createElement("div",{className:"flex gap-2"},r.createElement(d.A,{variant:"ghost",size:"sm",icon:i.A,onClick:x,className:"text-white hover:bg-white/20"},"Reintentar",g>0&&` (${g})`),r.createElement(d.A,{variant:"ghost",size:"sm",onClick:()=>{localStorage.setItem("venezia-disable-offline-indicator","true"),u(!1)},className:"text-white hover:bg-white/20 text-xs",title:"Deshabilitar este indicador permanentemente"},"×"))),e&&r.createElement(l.P.div,{className:"mt-3 h-1 bg-white/30 rounded-full overflow-hidden",initial:{opacity:0},animate:{opacity:1}},r.createElement(l.P.div,{className:"h-full bg-white",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:30,ease:"linear"},onAnimationComplete:x}))),e&&r.createElement(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-2 bg-gray-800/90 backdrop-blur-md rounded-lg p-3 text-white text-sm"},r.createElement("div",{className:"flex items-start gap-2"},r.createElement(c.A,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),r.createElement("div",null,r.createElement("p",{className:"font-medium mb-1"},"¿Qué puedes hacer en modo offline?"),r.createElement("ul",{className:"space-y-1 text-xs opacity-90"},r.createElement("li",null,"• Ver información guardada en caché"),r.createElement("li",null,"• Navegar por la aplicación"),r.createElement("li",null,"• Los cambios se guardarán localmente"),r.createElement("li",null,"• Se sincronizará automáticamente al reconectar")))))))}},67773:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(24576);t.A=({isOpen:e,onClose:t,title:a,children:o,size:i="md",maxWidth:c,showCloseButton:m=!0})=>{const d=c||i;return r.createElement(n.N,null,e&&r.createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},r.createElement(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),r.createElement("div",{className:"flex min-h-full items-center justify-center p-4"},r.createElement(l.P.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{duration:.2},className:`relative w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","4xl":"max-w-4xl","5xl":"max-w-5xl"}[d]} bg-white dark:bg-gray-800 rounded-lg shadow-xl`,onClick:e=>e.stopPropagation()},(a||m)&&r.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},a&&r.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white"},a),m&&r.createElement("button",{onClick:t,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","aria-label":"Cerrar modal",title:"Cerrar modal"},r.createElement(s.A,{className:"h-6 w-6 text-gray-400 dark:text-gray-500"}))),r.createElement("div",{className:"p-6"},o)))))}},67812:function(e,t,a){var r=a(96540),n=a(47767),l=a(84976),s=a(67561),o=a(3385),i=a(6782),c=a(29696),m=a(17133),d=a(89667),u=a(67984),g=a(81966),p=a(20085),b=a(91385),x=a(43197),y=a(93893),h=a(80827),f=a(94945),v=a(87073),E=a(80964),N=a(48697),w=a(98445),k=a(89230),A=a(20053);t.A=({onMenuClick:e})=>{const t=(0,n.zy)(),[a,C]=(0,r.useState)(!1),[P,S]=(0,r.useState)(""),z=[{name:"Inicio",href:"/",icon:i.A,category:"main"},{name:"POS",href:"/pos",icon:c.A,category:"sales",highlight:!0},{name:"Stock",href:"/inventory",icon:m.A,category:"inventory"},{name:"Producción",href:"/production",icon:d.A,category:"production"}],j=[{name:"Punto de Venta",href:"/pos",icon:c.A,category:"Ventas",highlight:!0},{name:"Ventas",href:"/sales",icon:c.A,category:"Ventas"},{name:"Tienda Web",href:"/shop",icon:u.A,category:"Ventas"},{name:"Entregas",href:"/deliveries",icon:g.A,category:"Ventas"},{name:"Stock General",href:"/stock",icon:m.A,category:"Inventario"},{name:"Ingredientes",href:"/ingredients",icon:m.A,category:"Inventario"},{name:"Transacciones",href:"/transactions",icon:p.A,category:"Inventario"},{name:"Recetas",href:"/recipes",icon:b.A,category:"Producción"},{name:"Órdenes",href:"/production-orders",icon:d.A,category:"Producción"},{name:"Asignar Lote",href:"/batch-assignment",icon:d.A,category:"Producción"},{name:"Productos",href:"/products",icon:x.A,category:"Gestión"},{name:"Proveedores",href:"/providers",icon:y.A,category:"Gestión"},{name:"Tiendas",href:"/stores",icon:u.A,category:"Gestión"},{name:"Usuarios",href:"/web-users",icon:y.A,category:"Gestión"},{name:"Reportes",href:"/reports",icon:h.A,category:"Análisis"},{name:"Analíticas",href:"/analytics",icon:f.A,category:"Análisis"},{name:"Asistente AI",href:"/ai-assistant",icon:v.A,category:"Especial",highlight:!0},{name:"Configuración",href:"/settings",icon:E.A,category:"Sistema"}].filter((e=>e.name.toLowerCase().includes(P.toLowerCase())||e.category.toLowerCase().includes(P.toLowerCase()))).reduce(((e,t)=>{const a=t.category;return e[a]||(e[a]=[]),e[a].push(t),e}),{});return(0,r.useEffect)((()=>{C(!1)}),[t.pathname]),r.createElement(r.Fragment,null,r.createElement(s.N,null,a&&r.createElement(r.Fragment,null,r.createElement(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40",onClick:()=>C(!1)}),r.createElement(o.P.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 rounded-t-3xl shadow-2xl max-h-[80vh] overflow-hidden"},r.createElement("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white"},"Acceso Rápido"),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},"Navega rápidamente a cualquier sección")),r.createElement("button",{onClick:()=>C(!1),className:"p-2 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"},r.createElement(N.A,{className:"h-6 w-6 text-gray-500"}))),r.createElement("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"relative"},r.createElement(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.createElement("input",{type:"text",placeholder:"Buscar páginas...",value:P,onChange:e=>S(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}))),r.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-6"},Object.entries(j).map((([e,a])=>r.createElement("div",{key:e},r.createElement("h4",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3"},e),r.createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3"},a.map((e=>{const a=t.pathname===e.href;return r.createElement(l.k2,{key:e.href,to:e.href,className:(0,A.A)("flex items-center gap-3 p-4 rounded-xl transition-all duration-200","border border-gray-200 dark:border-gray-700","active:scale-95",e.highlight&&!a&&"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200/50 dark:border-purple-700/50",a?e.highlight?"bg-gradient-to-r from-purple-100 to-blue-100 text-purple-700 dark:bg-gradient-to-r dark:from-purple-900/50 dark:to-blue-900/50 dark:text-purple-300 border-purple-300 dark:border-purple-600":"bg-blue-50 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300 border-blue-300 dark:border-blue-600":e.highlight?"text-purple-700 dark:text-purple-300":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700")},r.createElement(e.icon,{className:(0,A.A)("h-5 w-5 flex-shrink-0",a?e.highlight?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400":e.highlight?"text-purple-500 dark:text-purple-400":"text-gray-500 dark:text-gray-400")}),r.createElement("div",{className:"flex-1 min-w-0"},r.createElement("p",{className:"font-medium truncate text-sm"},e.name),e.highlight&&r.createElement("span",{className:"inline-block bg-gradient-to-r from-purple-500 to-blue-500 text-white text-xs px-2 py-0.5 rounded-full font-bold mt-1"},"NEW")))}))))))),r.createElement("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},r.createElement("div",{className:"flex gap-3"},r.createElement("button",{onClick:()=>{C(!1),e()},className:"flex-1 flex items-center justify-center gap-2 p-3 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 active:scale-95 transition-all"},r.createElement(k.A,{className:"h-5 w-5"}),"Menú Completo"),r.createElement("button",{onClick:()=>{C(!1);const e=new CustomEvent("keyboardShortcut",{detail:{type:"search",action:"open"}});window.dispatchEvent(e)},className:"flex items-center justify-center p-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 active:scale-95 transition-all"},r.createElement(w.A,{className:"h-5 w-5"}))))))),r.createElement("div",{className:"fixed bottom-0 left-0 right-0 z-30 bg-white/95 dark:bg-gray-900/95 backdrop-blur-sm border-t border-gray-200 dark:border-gray-700 lg:hidden safe-area-inset-bottom"},r.createElement("div",{className:"flex items-center justify-center px-2 py-3"},r.createElement("div",{className:"flex items-center justify-around w-full max-w-md mx-auto"},z.map((e=>(t.pathname,e.href,r.createElement(l.k2,{key:e.name,to:e.href,className:({isActive:t})=>(0,A.A)("relative flex flex-col items-center gap-1 p-3 rounded-xl transition-all duration-200","touch-target min-w-[60px] min-h-[60px]","active:scale-95",e.highlight&&!t&&"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20",t?e.highlight?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400":e.highlight?"text-purple-500 dark:text-purple-400":"text-gray-600 dark:text-gray-400")},(({isActive:t})=>r.createElement(r.Fragment,null,t&&r.createElement(o.P.div,{layoutId:"mobileActiveIndicator",className:(0,A.A)("absolute inset-0 rounded-xl shadow-sm",e.highlight?"bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30":"bg-blue-50 dark:bg-blue-900/30"),transition:{type:"spring",stiffness:400,damping:30}}),r.createElement(o.P.div,{className:"relative z-10",animate:t?{scale:[1,1.1,1]}:{scale:1},transition:{duration:.3}},r.createElement(e.icon,{className:(0,A.A)("h-6 w-6 transition-colors",t?e.highlight?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400":e.highlight?"text-purple-500 dark:text-purple-400":"text-gray-500 dark:text-gray-400")})),r.createElement("span",{className:(0,A.A)("text-xs font-medium truncate relative z-10 max-w-[50px]",t?e.highlight?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400":e.highlight?"text-purple-500 dark:text-purple-400":"text-gray-500 dark:text-gray-400")},e.name),e.highlight&&!t&&r.createElement(o.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full"}))))))),r.createElement("button",{onClick:()=>C(!0),className:(0,A.A)("relative flex flex-col items-center gap-1 p-3 rounded-xl transition-all duration-200","touch-target min-w-[60px] min-h-[60px]","text-gray-600 dark:text-gray-400","active:scale-95 active:bg-gray-100 dark:active:bg-gray-700","hover:bg-gray-50 dark:hover:bg-gray-800"),"aria-label":"Acceso rápido a todas las secciones"},r.createElement(o.P.div,{whileTap:{scale:.9},className:"relative z-10"},r.createElement(k.A,{className:"h-6 w-6"})),r.createElement("span",{className:"text-xs font-medium truncate relative z-10 max-w-[50px]"},"Más"),r.createElement(o.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full"})))),r.createElement("div",{className:"flex justify-center pb-1"},r.createElement("div",{className:"w-12 h-1 bg-gray-300 dark:bg-gray-600 rounded-full opacity-50"}))))}},70597:function(e,t,a){a.d(t,{A:function(){return re}});var r=a(96540),n=a(3385),l=a(67561),s=a(87073),o=a(46110),i=a(80964),c=a(32708),m=a(94945),d=a(90942),u=a(48697),g=a(14379),p=a(47504),b=a(42640),x=a(46858),y=a(77579),h=a(30116),f=a(21456),v=a(63324);const E=(0,r.memo)((({title:e="VenezIA",subtitle:t,connectionStatus:a,onClose:l,onMinimize:o,onExpand:i,onClear:m,isExpanded:g=!1,stats:p,aiSource:b=null})=>r.createElement("div",{className:"flex items-center justify-between p-2 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-600 to-blue-600 rounded-t-2xl"},r.createElement("div",{className:"flex items-center space-x-3"},r.createElement("div",{className:"relative"},r.createElement(s.A,{className:"text-white",size:g?28:18}),"connected"===a&&r.createElement(n.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -bottom-1 -right-1"},r.createElement(h.A,{className:"text-green-400",size:g?12:10})),"disconnected"===a&&r.createElement(n.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -bottom-1 -right-1"},r.createElement(f.A,{className:"text-red-400",size:g?12:10}))),r.createElement("div",{className:"flex items-center"},r.createElement("div",null,r.createElement("h3",{className:(g?"text-lg":"text-sm")+" font-semibold text-white"},e),t&&r.createElement("p",{className:"text-sm text-white/70"},t)),b&&r.createElement("span",{className:`\n              ml-2 px-1.5 py-0.5 rounded-full text-xs font-medium\n              ${"gemini"===b?"bg-blue-500/30 text-blue-100 border border-blue-400/50":"mock"===b?"bg-yellow-500/30 text-yellow-100 border border-yellow-400/50":"bg-gray-500/30 text-gray-100 border border-gray-400/50"}\n            `},"gemini"===b?"✨ Gemini 1.5":"mock"===b?"🤖 Local AI":"📦 Básico"))),r.createElement("div",{className:"flex items-center space-x-1"},g&&p&&r.createElement("div",{className:"text-right text-white/70 text-sm mr-4"},r.createElement("div",null,p.userMessages," mensajes enviados"),r.createElement("div",null,p.aiMessages," respuestas recibidas")),m&&r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:m,className:"text-white hover:bg-white/20 p-1 rounded transition-colors",title:"Limpiar chat (Ctrl+L)"},r.createElement(c.A,{size:g?18:16})),g&&o?r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:o,className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors",title:"Minimizar (Ctrl+Shift+M)"},r.createElement(d.A,{size:16})):i&&r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors",title:"Expandir (Ctrl+Shift+E)"},r.createElement(v.A,{size:16})),r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:l,className:"text-white hover:bg-white/20 p-1.5 rounded-lg transition-colors",title:"Cerrar (Esc)"},r.createElement(u.A,{size:16}))))));E.displayName="ChatHeader";var N=E;let w;try{w=a(62119).default||a(62119)}catch(e){console.warn("react-markdown not available, using plain text rendering"),w=null}const k=(0,r.memo)(r.forwardRef((({message:e,compact:t=!1},a)=>{const l="user"===e.type;return r.createElement(n.P.div,{ref:a,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`flex ${l?"justify-end":"justify-start"} ${t?"mb-2":"mb-3"}`},r.createElement("div",{className:`\n          ${t?"max-w-[85%]":"max-w-[70%]"} \n          ${t?"p-2":"p-4"} \n          rounded-${t?"md":"xl"} \n          ${l?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"} \n          shadow-md\n          relative\n          group\n        `},!l&&!t&&r.createElement("div",{className:"absolute -left-10 top-2"},r.createElement("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center"},r.createElement("span",{className:"text-white text-xs"},"AI"))),r.createElement("div",{className:t?"text-sm":""},!l&&w?r.createElement("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-800 dark:text-gray-200"},r.createElement(w,{components:{strong:({children:e})=>r.createElement("strong",{className:"font-bold text-gray-900 dark:text-white"},e),code:({inline:e,children:t})=>r.createElement("code",{className:e?"bg-gray-200 dark:bg-gray-600 px-1 py-0.5 rounded text-sm font-mono":"block bg-gray-200 dark:bg-gray-600 p-2 rounded font-mono text-sm"},t),p:({children:e})=>r.createElement("p",{className:"mb-2 last:mb-0"},e),h1:({children:e})=>r.createElement("h1",{className:"text-lg font-bold mb-2 text-gray-900 dark:text-white"},e),h2:({children:e})=>r.createElement("h2",{className:"text-base font-bold mb-2 text-gray-900 dark:text-white"},e),h3:({children:e})=>r.createElement("h3",{className:"text-sm font-bold mb-1 text-gray-900 dark:text-white"},e),ul:({children:e})=>r.createElement("ul",{className:"list-disc list-inside mb-2 space-y-1"},e),li:({children:e})=>r.createElement("li",{className:"ml-2"},e),a:({href:e,children:t})=>r.createElement("a",{href:e,className:"text-blue-600 dark:text-blue-400 hover:underline",target:"_blank",rel:"noopener noreferrer"},t)}},e.content)):r.createElement("div",{className:"whitespace-pre-wrap"},e.content)),r.createElement("div",{className:`\n          text-xs mt-${t?"1":"2"} \n          ${l?"text-white/70":"text-gray-500 dark:text-gray-400"}\n          flex items-center justify-between\n        `},r.createElement("span",null,(s=e.timestamp,new Date(s).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"}))),e.status&&r.createElement("span",{className:"ml-2"},"sending"===e.status&&"⏳","sent"===e.status&&"✓","error"===e.status&&"❌")),!t&&r.createElement("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity"},r.createElement("button",{onClick:()=>navigator.clipboard.writeText(e.content),className:"text-xs p-1 rounded hover:bg-black/10",title:"Copiar mensaje"},"📋"))));var s})));k.displayName="ChatMessage";var A=k;const C=(0,r.memo)((({size:e="normal"})=>{const t="small"===e?"w-2 h-2":"w-3 h-3",a="small"===e?"space-x-1":"space-x-2";return r.createElement(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex justify-start"},r.createElement("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-lg"},r.createElement("div",{className:`flex ${a}`},[0,1,2].map((e=>r.createElement(n.P.div,{key:e,className:`${t} bg-gray-400 rounded-full`,animate:{y:[0,-10,0]},transition:{duration:.6,repeat:1/0,delay:.1*e}}))))))}));C.displayName="LoadingIndicator";var P=C;const S=(0,r.memo)((({messages:e,isLoading:t,compact:a=!1,className:n="",height:s="h-64"})=>{const o=(0,r.useRef)(null),i=(0,r.useRef)(null),[c,m]=r.useState(!0),d=(0,r.useCallback)((()=>{c&&o.current?.scrollIntoView({behavior:"smooth"})}),[c]);(0,r.useEffect)((()=>{d()}),[e,d]);const u=(0,r.useCallback)((()=>{if(!i.current)return;const{scrollTop:e,scrollHeight:t,clientHeight:a}=i.current;m(t-e-a<50)}),[]),g=()=>c?null:r.createElement("button",{onClick:()=>{m(!0),d()},className:"absolute bottom-4 right-4 bg-blue-500 text-white p-2 rounded-full shadow-lg hover:bg-blue-600 transition-colors",title:"Ir al final"},"↓");return r.createElement("div",{className:`relative ${n}`},r.createElement("div",{ref:i,onScroll:u,className:`${s} overflow-y-auto ${a?"p-2 space-y-2":"p-4 space-y-3"} scroll-smooth`},r.createElement(l.N,{mode:"popLayout"},e.map((e=>r.createElement(A,{key:e.id,message:e,compact:a})))),t&&r.createElement(P,null),r.createElement("div",{ref:o})),r.createElement(g,null))}));S.displayName="MessageList";var z=S,j=a(75107);const I=(0,r.memo)((({actions:e,onActionClick:t,compact:a=!1,className:l=""})=>e&&0!==e.length?r.createElement("div",{className:`${l} ${a?"px-2 py-1":"px-6 py-3"} ${a?"":"border-b border-gray-200 dark:border-gray-700"} ${!a&&"bg-gray-50 dark:bg-gray-900/50"}`},a?r.createElement("div",{className:"relative"},r.createElement("div",{className:"flex items-center justify-between mb-0.5"},r.createElement("span",{className:"text-[10px] text-gray-500 dark:text-gray-400 font-medium"},"Acciones rápidas:"),r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",onClick:e=>{e.stopPropagation()}},r.createElement(j.A,{size:12}))),r.createElement("div",{className:"grid grid-cols-2 gap-0.5"},e.slice(0,4).map((e=>r.createElement(n.P.button,{key:e.id||e.text,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a=>{a.stopPropagation(),t(e)},className:" px-1.5 py-1 text-[11px] bg-gray-50 dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded transition-all duration-200 flex items-center justify-center gap-1 text-gray-700 dark:text-gray-300 ",disabled:e.disabled,title:e.text},r.createElement("span",{className:"opacity-70"},e.icon),r.createElement("span",{className:"truncate max-w-[60px]"},e.text.replace(/^[\p{Emoji}]\s*/u,"").substring(0,10))))))):r.createElement("div",{className:"flex space-x-2 overflow-x-auto"},e.map((e=>r.createElement(n.P.button,{key:e.id||e.text,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a=>{a.stopPropagation(),t(e)},className:" flex-shrink-0 px-3 py-1.5 text-sm  bg-white dark:bg-gray-700  hover:bg-gray-100 dark:hover:bg-gray-600  rounded-lg transition-colors  flex items-center space-x-2  border border-gray-200 dark:border-gray-600 ",disabled:e.disabled},e.icon&&r.createElement("span",{className:"text-base"},e.icon),r.createElement("span",null,e.text)))))):null));I.displayName="QuickActionsBar";var L=I,T=a(84910),$=a(68614),M=a(27775);const _=(0,r.memo)((({inputMessage:e,setInputMessage:t,onSendMessage:a,onVoiceCommand:l,isLoading:s,isListening:o,voiceSupported:i,className:c="",placeholder:m="Pregúntame algo..."})=>{const d=(0,r.useCallback)((t=>{t.preventDefault(),e.trim()&&!s&&a(e)}),[e,s,a]),u=(0,r.useCallback)((e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d(e))}),[d]),g=(0,r.useCallback)((e=>{e.stopPropagation(),t(e.target.value)}),[t]),p=(0,r.useCallback)((e=>{e.stopPropagation()}),[]);return r.createElement("form",{onSubmit:d,className:`flex space-x-2 ${c}`},r.createElement("input",{type:"text",value:e,onChange:g,onKeyPress:u,onClick:p,onFocus:p,placeholder:m,className:"flex-1 p-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",disabled:s}),i&&r.createElement(n.P.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:`p-2 ${o?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"} text-white rounded-lg transition-all`,title:"Comando de voz (Ctrl+Shift+V)",disabled:s},o?r.createElement(T.A,{size:16}):r.createElement($.A,{size:16})),r.createElement(n.P.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:!e.trim()||s,className:"p-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all"},r.createElement(M.A,{size:16})))}));_.displayName="ChatInput";var R=_;const V=(0,r.memo)((({inputMessage:e,setInputMessage:t,onSendMessage:a,onVoiceCommand:l,isLoading:s,isListening:o,voiceSupported:i,inputRef:c})=>{const m=(0,r.useCallback)((t=>{t.preventDefault(),e.trim()&&!s&&a(e)}),[e,s,a]),d=(0,r.useCallback)((e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(e))}),[m]),u=(0,r.useCallback)((e=>{t(e.target.value)}),[t]);return r.createElement("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700"},r.createElement("form",{onSubmit:m,className:"flex space-x-4"},r.createElement("input",{ref:c,type:"text",value:e,onChange:u,onKeyPress:d,placeholder:"Escribe tu mensaje o pregunta...",className:"flex-1 p-4 border border-gray-300 dark:border-gray-600 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-lg",disabled:s}),i&&r.createElement(n.P.button,{type:"button",whileHover:{scale:1.05},whileTap:{scale:.95},onClick:l,className:`px-4 py-4 ${o?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"} text-white rounded-2xl transition-all font-medium`,title:"Comando de voz",disabled:s},o?r.createElement(T.A,{size:20}):r.createElement($.A,{size:20})),r.createElement(n.P.button,{type:"submit",whileHover:{scale:1.05},whileTap:{scale:.95},disabled:!e.trim()||s,className:"px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-2xl hover:from-blue-600 hover:to-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all font-medium"},r.createElement(M.A,{size:20}))))}));V.displayName="ExpandedChatInput";var O=V,D=a(17133),H=a(80697),G=a(86589),F=a(418),B=a(48635),q=a(90232),U=a(44471);const W=[{id:"stock",title:"📦 Gestionar Stock",icon:D.A,color:"blue",description:"Agregar stock o consultar inventario",emoji:"📦",simple:!0},{id:"products",title:"🍦 Nuevo Producto",icon:H.A,color:"green",description:"Crear un nuevo sabor de helado",emoji:"🍦",simple:!0},{id:"prices",title:"💰 Cambiar Precios",icon:G.A,color:"yellow",description:"Actualizar precios de productos",emoji:"💰",simple:!0},{id:"reports",title:"📊 Reportes Premium",icon:m.A,color:"purple",description:"Análisis y estadísticas avanzadas",emoji:"📊",simple:!1,premium:!0}],K=[{id:"add",title:"➕ Agregar Stock",icon:H.A,description:"Sumo stock a mis productos",color:"green"},{id:"check",title:"👀 Ver Mi Stock",icon:D.A,description:"Consulto cuánto tengo",color:"blue"},{id:"low",title:"⚠️ Stock Bajo",icon:F.A,description:"Productos que necesito reponer",color:"red"}];function J({onExecuteAction:e}){const[t,a]=(0,r.useState)("main"),[n,l]=(0,r.useState)(null),[s,o]=(0,r.useState)({}),[i,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1);r.useEffect((()=>{fetch("/api/products").then((e=>e.json())).then((e=>{e.success&&c(e.products||e.data||[])})).catch((e=>{console.error("Error cargando productos:",e),c([{id:1,name:"Chocolate Amargo",price:3500,stock:25},{id:2,name:"Vainilla",price:3200,stock:18},{id:3,name:"Dulce de Leche",price:3800,stock:12}])}))}),[]);const g=e=>{l(e),"stock"===e.id?a("stock"):"products"===e.id?a("product_create"):"prices"===e.id?a("price_select"):"reports"===e.id&&a("upgrade_required")},p=async()=>{u(!0);try{let e;if("stock_add"===t){const t=await fetch("/api/executive/add-stock",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:s.productId,quantity:parseFloat(s.quantity),unit:"kg"})});e=await t.json()}else if("product_create"===t){const t=await fetch("/api/executive/create-product",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,price:parseFloat(s.price),context:s.context||"general"})});e=await t.json()}if(!e||!e.success)throw new Error(e?.message||"Error desconocido");a("success"),o({}),"product_create"===t&&fetch("/api/products").then((e=>e.json())).then((e=>{e.success&&c(e.products||e.data||[])}))}catch(e){console.error("Error ejecutando acción:",e),a("error")}finally{u(!1)}};return r.createElement("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden"},r.createElement("div",{className:"p-6"},(()=>{switch(t){case"main":default:return r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"text-center"},r.createElement("h3",{className:"text-xl font-bold text-gray-800 mb-2"},"👋 ¡Hola! Soy tu nuevo asistente wizard"),r.createElement("p",{className:"text-gray-600"},"Dime qué quieres hacer y te ayudo paso a paso")),r.createElement("div",{className:"space-y-3"},W.filter((e=>e.simple)).map((e=>r.createElement("button",{key:e.id,onClick:()=>g(e),className:`\n                w-full p-4 rounded-xl border-2 border-gray-200 \n                hover:border-${e.color}-300 hover:bg-${e.color}-50 \n                transition-all text-left group hover:shadow-md\n              `},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:`\n                  w-12 h-12 rounded-full bg-${e.color}-100 \n                  flex items-center justify-center text-2xl\n                `},e.emoji),r.createElement("div",{className:"flex-1"},r.createElement("h4",{className:"font-semibold text-gray-800 group-hover:text-gray-900"},e.title),r.createElement("p",{className:"text-sm text-gray-600 group-hover:text-gray-700"},e.description)),r.createElement(B.A,{className:`w-5 h-5 text-${e.color}-400 group-hover:text-${e.color}-600`}))))),r.createElement("button",{onClick:()=>g(W.find((e=>e.premium))),className:"w-full p-4 rounded-xl border-2 border-purple-200 bg-gradient-to-r from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-150 transition-all text-left group hover:shadow-md"},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:"w-12 h-12 rounded-full bg-purple-200 flex items-center justify-center text-2xl"},"✨"),r.createElement("div",{className:"flex-1"},r.createElement("h4",{className:"font-semibold text-purple-800 group-hover:text-purple-900"},"📊 Reportes Premium"),r.createElement("p",{className:"text-sm text-purple-600 group-hover:text-purple-700"},"Análisis inteligentes con AI")),r.createElement("div",{className:"text-xs bg-purple-500 text-white px-2 py-1 rounded-full"},"Premium")))));case"stock":return r.createElement("div",{className:"space-y-5"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:()=>a("main"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"📦 Gestión de Stock"),r.createElement("p",{className:"text-sm text-gray-600"},"¿Qué quieres hacer con tu inventario?"))),r.createElement("div",{className:"space-y-3"},K.map((e=>{const t=e.icon;return r.createElement("button",{key:e.id,onClick:()=>(e=>{"add"===e.id?a("stock_add"):"check"===e.id?a("stock_check"):"low"===e.id&&a("stock_low")})(e),className:`\n                w-full p-4 rounded-xl border-2 border-gray-200 \n                hover:border-${e.color}-300 hover:bg-${e.color}-50 \n                transition-all text-left group hover:shadow-md\n              `},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:`\n                  w-10 h-10 rounded-full bg-${e.color}-100 \n                  flex items-center justify-center\n                `},r.createElement(t,{className:`w-5 h-5 text-${e.color}-600`})),r.createElement("div",{className:"flex-1"},r.createElement("h4",{className:"font-medium text-gray-800 group-hover:text-gray-900"},e.title),r.createElement("p",{className:"text-sm text-gray-600 group-hover:text-gray-700"},e.description)),r.createElement(B.A,{className:`w-5 h-5 text-${e.color}-400 group-hover:text-${e.color}-600`})))}))));case"stock_add":return r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:()=>a("stock"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"➕ Agregar Stock"),r.createElement("p",{className:"text-sm text-gray-600"},"Te ayudo a sumar stock paso a paso"))),r.createElement("div",{className:"space-y-5"},r.createElement("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-sm flex items-center justify-center font-bold"},"1"),r.createElement("h4",{className:"font-semibold text-blue-800"},"¿A qué producto le agregas stock?")),r.createElement("select",{className:"w-full p-3 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.productId||"",onChange:e=>o({...s,productId:e.target.value})},r.createElement("option",{value:""},"👆 Elige un producto aquí"),i.map((e=>r.createElement("option",{key:e.id,value:e.id},"🍦 ",e.name," (Tengo: ",e.stock||e.current_stock||0," kg)"))))),s.productId&&r.createElement("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white text-sm flex items-center justify-center font-bold"},"2"),r.createElement("h4",{className:"font-semibold text-green-800"},"¿Cuántos kilos agregas?")),r.createElement("div",{className:"relative"},r.createElement("input",{type:"number",min:"0.1",step:"0.1",className:"w-full p-3 pr-12 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",value:s.quantity||"",onChange:e=>o({...s,quantity:e.target.value}),placeholder:"Ej: 25"}),r.createElement("span",{className:"absolute right-3 top-3 text-green-600 font-medium"},"kg"))),s.productId&&s.quantity&&r.createElement("button",{onClick:p,disabled:d,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-green-600 text-white rounded-xl hover:from-blue-700 hover:to-green-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed transition-all font-semibold text-lg shadow-lg"},d?r.createElement("div",{className:"flex items-center justify-center gap-2"},r.createElement("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Agregando..."):`✅ Agregar ${s.quantity} kg`)));case"stock_check":return r.createElement("div",{className:"space-y-4"},r.createElement("div",{className:"flex items-center gap-2 mb-4"},r.createElement("button",{onClick:()=>a("stock"),className:"p-1 hover:bg-gray-100 rounded"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"Estado del Stock")),r.createElement("div",{className:"space-y-3"},0===i.length?r.createElement("p",{className:"text-center text-gray-500 py-4"},"No hay productos cargados"):i.map((e=>{const t=e.stock||e.current_stock||0,a=t<10;return r.createElement("div",{key:e.id,className:"p-3 rounded-lg border "+(a?"bg-red-50 border-red-200":"bg-green-50 border-green-200")},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("span",{className:"font-medium"},e.name),r.createElement("span",{className:"font-bold "+(a?"text-red-600":"text-green-600")},t," kg")),a&&r.createElement("p",{className:"text-red-600 text-sm mt-1"},"⚠️ Stock bajo"))}))));case"stock_low":return(()=>{const e=i.filter((e=>(e.stock||e.current_stock||0)<10));return r.createElement("div",{className:"space-y-4"},r.createElement("div",{className:"flex items-center gap-2 mb-4"},r.createElement("button",{onClick:()=>a("stock"),className:"p-1 hover:bg-gray-100 rounded"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"Productos con Stock Bajo")),r.createElement("div",{className:"space-y-3"},0===e.length?r.createElement("div",{className:"text-center py-4"},r.createElement(U.A,{className:"w-12 h-12 text-green-600 mx-auto mb-2"}),r.createElement("p",{className:"text-green-600 font-medium"},"¡Todos los productos tienen stock suficiente!")):e.map((e=>{const t=e.stock||e.current_stock||0;return r.createElement("div",{key:e.id,className:"p-3 rounded-lg bg-red-50 border border-red-200"},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("span",{className:"font-medium"},e.name),r.createElement("span",{className:"font-bold text-red-600"},t," kg")),r.createElement("p",{className:"text-red-600 text-sm mt-1"},"⚠️ Necesita reposición"))}))))})();case"product_create":return r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:()=>a("main"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"🍦 Nuevo Producto"),r.createElement("p",{className:"text-sm text-gray-600"},"Vamos creando tu nuevo sabor paso a paso"))),r.createElement("div",{className:"space-y-5"},r.createElement("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-green-500 text-white text-sm flex items-center justify-center font-bold"},"1"),r.createElement("h4",{className:"font-semibold text-green-800"},"¿Cómo se llama tu nuevo sabor?")),r.createElement("input",{type:"text",className:"w-full p-3 border-2 border-green-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",value:s.name||"",onChange:e=>o({...s,name:e.target.value}),placeholder:"Ej: Helado de Menta Granizada"})),s.name&&r.createElement("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-blue-500 text-white text-sm flex items-center justify-center font-bold"},"2"),r.createElement("h4",{className:"font-semibold text-blue-800"},"¿Cuánto cuesta por kilo?")),r.createElement("div",{className:"relative"},r.createElement("span",{className:"absolute left-3 top-3 text-blue-600 font-medium"},"$"),r.createElement("input",{type:"number",min:"0",step:"50",className:"w-full p-3 pl-8 border-2 border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:s.price||"",onChange:e=>o({...s,price:e.target.value}),placeholder:"4500"}))),s.name&&s.price&&r.createElement("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-purple-500 text-white text-sm flex items-center justify-center font-bold"},"3"),r.createElement("h4",{className:"font-semibold text-purple-800"},"¿Dónde lo vas a usar?")),r.createElement("select",{className:"w-full p-3 border-2 border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",value:s.context||"",onChange:e=>o({...s,context:e.target.value})},r.createElement("option",{value:""},"👆 Selecciona dónde lo usarás"),r.createElement("option",{value:"web"},"🌐 Tienda Web (para vender online)"),r.createElement("option",{value:"stock"},"📦 Inventario Físico (para el local)"),r.createElement("option",{value:"production"},"🏭 Producción (para hacer más)"),r.createElement("option",{value:"general"},"📋 Catálogo General (para todo)"))),s.name&&s.price&&s.context&&r.createElement("button",{onClick:p,disabled:d,className:"w-full py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white rounded-xl hover:from-green-700 hover:to-blue-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed transition-all font-semibold text-lg shadow-lg"},d?r.createElement("div",{className:"flex items-center justify-center gap-2"},r.createElement("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creando producto..."):`🍦 Crear "${s.name}"`)));case"price_select":return r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:()=>a("main"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"💰 Cambiar Precios"),r.createElement("p",{className:"text-sm text-gray-600"},"Selecciona qué producto quieres actualizar"))),r.createElement("div",{className:"space-y-3"},0===i.length?r.createElement("p",{className:"text-center text-gray-500 py-4"},"No hay productos cargados"):i.map((e=>r.createElement("button",{key:e.id,onClick:()=>{o({productId:e.id,name:e.name,currentPrice:e.price}),a("price_edit")},className:"w-full p-4 rounded-xl border-2 border-gray-200 hover:border-yellow-300 hover:bg-yellow-50 transition-all text-left group hover:shadow-md"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:"w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center"},"🍦"),r.createElement("div",null,r.createElement("h4",{className:"font-medium text-gray-800 group-hover:text-gray-900"},e.name),r.createElement("p",{className:"text-sm text-gray-600 group-hover:text-gray-700"},"Precio actual: $",e.price))),r.createElement(B.A,{className:"w-5 h-5 text-yellow-400 group-hover:text-yellow-600"})))))));case"price_edit":return r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:()=>a("price_select"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors"},r.createElement(q.A,{className:"w-5 h-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-800"},"💰 Actualizar Precio"),r.createElement("p",{className:"text-sm text-gray-600"},"Cambia el precio de ",s.name))),r.createElement("div",{className:"space-y-5"},r.createElement("div",{className:"bg-gray-50 border-2 border-gray-200 rounded-xl p-4"},r.createElement("h4",{className:"font-semibold text-gray-800 mb-2"},"Precio actual"),r.createElement("div",{className:"text-2xl font-bold text-gray-600"},"$",s.currentPrice)),r.createElement("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-xl p-4"},r.createElement("div",{className:"flex items-center gap-2 mb-3"},r.createElement("div",{className:"w-6 h-6 rounded-full bg-yellow-500 text-white text-sm flex items-center justify-center font-bold"},"1"),r.createElement("h4",{className:"font-semibold text-yellow-800"},"¿Cuál es el nuevo precio?")),r.createElement("div",{className:"relative"},r.createElement("span",{className:"absolute left-3 top-3 text-yellow-600 font-medium"},"$"),r.createElement("input",{type:"number",min:"0",step:"50",className:"w-full p-3 pl-8 border-2 border-yellow-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 text-lg",value:s.newPrice||"",onChange:e=>o({...s,newPrice:e.target.value}),placeholder:s.currentPrice})),s.newPrice&&s.newPrice!==s.currentPrice&&r.createElement("div",{className:"mt-3 p-2 bg-yellow-100 rounded-lg"},r.createElement("div",{className:"text-sm"},r.createElement("span",{className:"text-yellow-700"},"Cambio: "),r.createElement("span",{className:"font-bold "+(parseFloat(s.newPrice)>parseFloat(s.currentPrice)?"text-green-600":"text-red-600")},parseFloat(s.newPrice)>parseFloat(s.currentPrice)?"+":"","$",(parseFloat(s.newPrice)-parseFloat(s.currentPrice)).toFixed(2))))),s.newPrice&&s.newPrice!==s.currentPrice&&r.createElement("button",{onClick:()=>(async()=>{u(!0);try{let e;try{const t=await fetch("/api/executive/update-price",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_id:s.productId,new_price:parseFloat(s.newPrice)})});e=await t.json()}catch(t){e={success:!0,message:`Precio actualizado de $${s.currentPrice} a $${s.newPrice}`,simulated:!0},c((e=>e.map((e=>e.id===s.productId?{...e,price:parseFloat(s.newPrice)}:e))))}if(!e||!e.success)throw new Error(e?.message||"Error al actualizar precio");a("success"),o({}),e.simulated||fetch("/api/products").then((e=>e.json())).then((e=>{e.success&&c(e.products||e.data||[])})).catch((()=>{console.log("Mantieniendo cambios locales tras actualización")}))}catch(e){console.error("Error actualizando precio:",e),a("error")}finally{u(!1)}})(),disabled:d,className:"w-full py-4 bg-gradient-to-r from-yellow-600 to-orange-600 text-white rounded-xl hover:from-yellow-700 hover:to-orange-700 disabled:from-gray-300 disabled:to-gray-300 disabled:cursor-not-allowed transition-all font-semibold text-lg shadow-lg"},d?r.createElement("div",{className:"flex items-center justify-center gap-2"},r.createElement("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Actualizando precio..."):`💰 Cambiar a $${s.newPrice}`)));case"upgrade_required":return r.createElement("div",{className:"text-center space-y-4"},r.createElement("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},r.createElement(m.A,{className:"w-12 h-12 text-yellow-600 mx-auto mb-3"}),r.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},"Función Premium"),r.createElement("p",{className:"text-gray-600 mb-4"},"Los reportes y análisis inteligentes requieren AI Premium"),r.createElement("div",{className:"space-y-2"},r.createElement("button",{className:"w-full py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700"},"Upgrade a Premium ($7.50/mes)"),r.createElement("button",{onClick:()=>a("main"),className:"w-full py-2 border border-gray-300 rounded-lg hover:bg-gray-50"},"Volver al Menú"))));case"success":return r.createElement("div",{className:"text-center space-y-4"},r.createElement("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg"},r.createElement(U.A,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),r.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},"¡Acción completada exitosamente!"),r.createElement("p",{className:"text-gray-600 mb-4"},t.includes("stock")?"Se agregó el stock correctamente":"Se creó el producto correctamente"),r.createElement("div",{className:"space-y-2"},r.createElement("button",{onClick:()=>{a("main"),l(null),o({})},className:"w-full py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"},"Realizar otra acción"))));case"error":return r.createElement("div",{className:"text-center space-y-4"},r.createElement("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg"},r.createElement(F.A,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),r.createElement("h3",{className:"text-lg font-semibold text-gray-800 mb-2"},"Error al procesar la acción"),r.createElement("p",{className:"text-gray-600 mb-4"},"Hubo un problema. Por favor intenta nuevamente."),r.createElement("div",{className:"space-y-2"},r.createElement("button",{onClick:()=>a("main"),className:"w-full py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"},"Volver al Menú"))))}})()))}var Q=a(79907),X=a(37946),Y=({compact:e=!1})=>{const{currentAISource:t,modelStatus:a,getServiceStatus:s}=(0,y.oP)(),[i,c]=r.useState(null),[m,d]=r.useState(!1);r.useEffect((()=>{const e=()=>{const e=s();c(e)};e();const t=setInterval(e,3e4);return()=>clearInterval(t)}),[s]);const u=(()=>{switch(t){case"gemini":return{name:"Gemini AI",icon:r.createElement(o.A,{className:"w-4 h-4"}),color:"text-blue-500",bgColor:"bg-blue-50",borderColor:"border-blue-200",description:"IA avanzada con respuestas inteligentes"};case"superbot":return{name:"SuperBot Venezia",icon:r.createElement(x.A,{className:"w-4 h-4"}),color:"text-purple-500",bgColor:"bg-purple-50",borderColor:"border-purple-200",description:"Comandos especializados para tu heladería"};case"mock":return{name:"Asistente Local",icon:r.createElement(Q.A,{className:"w-4 h-4"}),color:"text-gray-500",bgColor:"bg-gray-50",borderColor:"border-gray-200",description:"Respuestas predefinidas sin conexión"};case"fallback":case"error":return{name:"Modo Básico",icon:r.createElement(X.A,{className:"w-4 h-4"}),color:"text-orange-500",bgColor:"bg-orange-50",borderColor:"border-orange-200",description:"Sistema guiado disponible"};default:return{name:"Preparando...",icon:r.createElement(Q.A,{className:"w-4 h-4 animate-pulse"}),color:"text-gray-400",bgColor:"bg-gray-50",borderColor:"border-gray-200",description:"Inicializando sistema de IA"}}})(),g=i?.remainingRequests||0,p=i?.hasApiKey||!1,b=i?.geminiAvailable||!1;return e?r.createElement(n.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium ${u.bgColor} ${u.color} ${u.borderColor} border cursor-pointer`,onClick:()=>d(!m)},u.icon,r.createElement("span",null,u.name),"gemini"===t&&g>0&&r.createElement("span",{className:"text-xs opacity-70"},"(",g," restantes)")):r.createElement(r.Fragment,null,r.createElement(n.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"relative"},r.createElement("div",{className:`p-3 rounded-lg ${u.bgColor} ${u.borderColor} border cursor-pointer transition-all hover:shadow-md`,onClick:()=>d(!m)},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:`${u.color}`},u.icon),r.createElement("div",null,r.createElement("h4",{className:`font-medium text-sm ${u.color}`},u.name),r.createElement("p",{className:"text-xs text-gray-600 mt-0.5"},u.description))),r.createElement("div",{className:"flex items-center gap-2"},p&&r.createElement("div",{className:"flex items-center gap-1"},r.createElement(U.A,{className:"w-3 h-3 text-green-500"}),r.createElement("span",{className:"text-xs text-green-600"},"API Key")),"gemini"===t&&r.createElement("div",{className:"text-right"},r.createElement("div",{className:"text-xs font-medium text-gray-700"},g," / ",i?.maxDailyRequests||1500),r.createElement("div",{className:"text-xs text-gray-500"},"solicitudes")))),"gemini"===t&&i&&r.createElement("div",{className:"mt-3"},r.createElement("div",{className:"w-full bg-gray-200 rounded-full h-1.5"},r.createElement(n.P.div,{initial:{width:0},animate:{width:g/(i.maxDailyRequests||1500)*100+"%"},className:"h-1.5 rounded-full "+(g>1e3?"bg-green-500":g>500?"bg-yellow-500":"bg-red-500")}))))),r.createElement(l.N,null,m&&i&&r.createElement(n.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden"},r.createElement("div",{className:"mt-2 p-4 bg-white rounded-lg border border-gray-200 shadow-sm"},r.createElement("h5",{className:"font-medium text-sm mb-3"},"Detalles del Sistema AI"),r.createElement("div",{className:"space-y-2 text-xs"},r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"text-gray-500"},"Modelo Gemini:"),r.createElement("span",{className:"font-medium"},i.geminiModel||"gemini-1.5-flash")),r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"text-gray-500"},"Origen API Key:"),r.createElement("span",{className:"font-medium"},"configured"===i.apiKeySource?"Configurada (.env)":"manual"===i.apiKeySource?"Manual (localStorage)":"No configurada")),r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"text-gray-500"},"Cache activo:"),r.createElement("span",{className:"font-medium"},i.cacheSize||0," respuestas")),r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"text-gray-500"},"SuperBot:"),r.createElement("span",{className:"font-medium"},i.superBotEnabled?"Activado":"Desactivado")),r.createElement("div",{className:"flex justify-between"},r.createElement("span",{className:"text-gray-500"},"Nivel de servicio:"),r.createElement("span",{className:"font-medium"},"Nivel ",i.currentLevel))),!p&&r.createElement("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded"},r.createElement("p",{className:"text-xs text-yellow-800"},"Para activar Gemini AI, configura tu API Key en el archivo .env")),p&&!b&&r.createElement("div",{className:"mt-3 p-2 bg-red-50 border border-red-200 rounded"},r.createElement("p",{className:"text-xs text-red-800"},"Gemini no está disponible. Verifica tu API Key o conexión."))))))};const Z=(0,r.memo)((({onClick:e,unreadCount:t,isMobile:a=!1})=>r.createElement(n.P.div,{className:`fixed ${a?"bottom-24":"bottom-6"} right-6 z-50`,initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},exit:{scale:0,rotate:-180},transition:{type:"spring",stiffness:260,damping:20}},r.createElement(n.P.button,{onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},className:"relative group",title:"🧠 VenezIA - Tu Asistente Inteligente"},r.createElement("div",{className:"absolute -inset-2 bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-full blur-sm opacity-75 group-hover:opacity-100 transition-all duration-300"}),r.createElement("div",{className:"relative bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-4 rounded-full shadow-2xl group-hover:shadow-purple-500/50 transition-all duration-300"},r.createElement(s.A,{size:28,className:"text-white"})),t>0&&r.createElement(n.P.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold"},t),r.createElement(n.P.div,{className:"absolute -top-1 -left-1",animate:{rotate:360},transition:{duration:3,repeat:1/0,ease:"linear"}},r.createElement(o.A,{className:"text-yellow-400",size:16}))))));Z.displayName="FloatingButton";const ee=(0,r.memo)((({isMobile:e=!1})=>{const{messages:t,isLoading:a,inputMessage:l,setInputMessage:s,isListening:o,connectionStatus:i,voiceSupported:c,sendMessage:m,updateChatState:d,handleQuickAction:u,clearHistory:g,startVoiceCommand:p,quickActions:b,currentAISource:x}=(0,y.oP)();return r.createElement(n.P.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},className:`fixed ${e?"bottom-24":"bottom-6"} right-6 w-80 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl z-50 border border-gray-200 dark:border-gray-700`,onClick:e=>e.stopPropagation()},r.createElement(N,{connectionStatus:i,onClose:()=>d("closed"),onExpand:()=>d("expanded"),onClear:g,aiSource:x}),r.createElement(z,{messages:t,isLoading:a,compact:!0,height:"h-80"}),!a&&r.createElement(L,{actions:b.slice(0,4),onActionClick:u,compact:!0,className:"p-1"}),r.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700",onClick:e=>e.stopPropagation()},x&&r.createElement("div",{className:"px-2 py-1 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex items-center justify-between text-[10px]"},r.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Sistema activo:"),r.createElement("span",{className:`\n                px-1.5 py-0.5 rounded-full font-medium\n                ${"gemini"===x?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"mock"===x?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300"}\n              `},"gemini"===x?"✨ Gemini AI":"mock"===x?"🤖 Asistente Local":"📦 Modo Básico"))),r.createElement("div",{className:"p-2"},r.createElement(R,{inputMessage:l,setInputMessage:s,onSendMessage:m,onVoiceCommand:p,isLoading:a,isListening:o,voiceSupported:c,placeholder:"Pregúntame algo..."}))))}));ee.displayName="MinimizedChat";const te=(0,r.memo)((()=>{const{messages:e,isLoading:t,inputMessage:a,setInputMessage:o,isListening:h,connectionStatus:f,voiceSupported:v,sendMessage:E,updateChatState:N,handleQuickAction:w,clearHistory:k,startVoiceCommand:A,quickActions:C,getStats:P,currentAISource:S,modelStatus:j}=(0,y.oP)(),[I,T]=(0,r.useState)(localStorage.getItem("ai-default-mode")||"chat"),[$,M]=(0,r.useState)(!1),[_,R]=(0,r.useState)(localStorage.getItem("ai-system-preference")||"auto"),[V,D]=(0,r.useState)("false"!==localStorage.getItem("ai-voice-enabled")),[H,G]=(0,r.useState)("false"!==localStorage.getItem("ai-show-suggestions")),[F,B]=(0,r.useState)("true"===localStorage.getItem("ai-sound-notifications")),q=P();return r.createElement(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e=>e.target===e.currentTarget&&N("minimized")},r.createElement(n.P.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white dark:bg-gray-800 rounded-3xl w-full max-w-2xl h-[70vh] flex flex-col shadow-2xl overflow-hidden",onClick:e=>e.stopPropagation()},r.createElement("div",{className:"relative bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 p-6"},r.createElement("div",{className:"absolute inset-0 bg-black/10 opacity-30",style:{backgroundImage:'url("data:image/svg+xml,%3Csvg width=%2760%27 height=%2760%27 viewBox=%270 0 60 60%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cg fill=%27%23ffffff%27 fill-opacity=%270.05%27%3E%3Cpath d=%27M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'}}),r.createElement("div",{className:"relative flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:"w-14 h-14 rounded-2xl bg-white/20 backdrop-blur flex items-center justify-center shadow-lg"},r.createElement(s.A,{className:"w-8 h-8 text-white"})),r.createElement("div",null,r.createElement("h2",{className:"text-2xl font-bold text-white flex items-center gap-2"},"VenezIA",r.createElement("span",{className:"text-sm px-2 py-1 bg-white/20 rounded-full"},"Tu asistente inteligente")),r.createElement("div",{className:"flex items-center gap-3 mt-2"},r.createElement("div",{className:"flex items-center gap-2"},r.createElement("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),r.createElement("span",{className:"text-sm text-white/80"},"gemini"===S?"✨ Gemini 1.5 Flash":"mock"===S?"🤖 Asistente Local":"📦 Modo Básico")),r.createElement("span",{className:"text-sm text-white/60"},q.totalMessages," mensajes • ",q.userMessages," consultas")))),r.createElement("div",{className:"flex items-center gap-2"},r.createElement(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>M(!$),className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all",title:"Configuración del chat"},r.createElement(i.A,{size:20})),r.createElement(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all",title:"Limpiar conversación"},r.createElement(c.A,{size:20})),r.createElement(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all",title:"Ver estadísticas"},r.createElement(m.A,{size:20})),r.createElement("div",{className:"w-px h-8 bg-white/30 mx-2"}),r.createElement(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N("minimized"),className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all",title:"Minimizar"},r.createElement(d.A,{size:20})),r.createElement(n.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N("closed"),className:"p-2.5 bg-red-500/20 hover:bg-red-500/30 rounded-xl text-white transition-all",title:"Cerrar"},r.createElement(u.A,{size:20}))))),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900 p-3 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-2"},r.createElement("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Modo de asistente:"),r.createElement("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-1 flex gap-1"},r.createElement("button",{onClick:()=>T("guided"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 "+("guided"===I?"bg-blue-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700")},r.createElement(g.A,{size:16}),r.createElement("span",null,"Guiado")),r.createElement("button",{onClick:()=>T("chat"),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all flex items-center gap-2 "+("chat"===I?"bg-purple-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700")},r.createElement(p.A,{size:16}),r.createElement("span",null,"Chat AI")))),r.createElement("div",{className:"flex items-center gap-2"},r.createElement("button",{onClick:()=>N("minimized"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},r.createElement("span",{className:"text-sm"},"−")),r.createElement("button",{onClick:()=>N("closed"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},r.createElement("span",{className:"text-sm"},"×"))))),r.createElement(l.N,null,$&&r.createElement(n.P.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:20},className:"absolute inset-0 bg-white dark:bg-gray-800 z-50 flex flex-col"},r.createElement("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h3",{className:"text-lg font-semibold flex items-center gap-2"},r.createElement(i.A,{className:"w-5 h-5"}),"Configuración del Chat"),r.createElement(n.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>M(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg"},r.createElement(u.A,{size:20})))),r.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-6"},r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"},r.createElement("h4",{className:"font-medium mb-3 flex items-center gap-2"},r.createElement(b.A,{className:"w-4 h-4"}),"Sistema de IA preferido"),r.createElement("div",{className:"space-y-2"},r.createElement("label",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:shadow-md transition-shadow"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("input",{type:"radio",name:"ai-system",value:"auto",checked:"auto"===_,onChange:e=>R(e.target.value),className:"text-blue-500"}),r.createElement("div",null,r.createElement("div",{className:"font-medium"},"🎯 Automático"),r.createElement("div",{className:"text-sm text-gray-500"},"El sistema elige la mejor opción disponible"))),r.createElement("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded"},"Recomendado")),r.createElement("label",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:shadow-md transition-shadow"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("input",{type:"radio",name:"ai-system",value:"gemini",checked:"gemini"===_,onChange:e=>R(e.target.value),className:"text-blue-500"}),r.createElement("div",null,r.createElement("div",{className:"font-medium"},"✨ Solo Gemini AI"),r.createElement("div",{className:"text-sm text-gray-500"},"Forzar uso de Gemini (requiere API key)"))),r.createElement("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded"},"Premium")),r.createElement("label",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-800 rounded-lg cursor-pointer hover:shadow-md transition-shadow"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("input",{type:"radio",name:"ai-system",value:"local",checked:"local"===_,onChange:e=>R(e.target.value),className:"text-yellow-500"}),r.createElement("div",null,r.createElement("div",{className:"font-medium"},"🤖 Solo Local"),r.createElement("div",{className:"text-sm text-gray-500"},"Usar solo el asistente local"))),r.createElement("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded"},"Sin conexión")))),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg"},r.createElement("h4",{className:"font-medium mb-3"},"Preferencias de interacción"),r.createElement("div",{className:"space-y-3"},r.createElement("label",{className:"flex items-center justify-between"},r.createElement("span",{className:"text-sm"},"Activar comandos de voz"),r.createElement("input",{type:"checkbox",className:"rounded text-blue-500",checked:V,onChange:e=>D(e.target.checked)})),r.createElement("label",{className:"flex items-center justify-between"},r.createElement("span",{className:"text-sm"},"Mostrar sugerencias de comandos"),r.createElement("input",{type:"checkbox",className:"rounded text-blue-500",checked:H,onChange:e=>G(e.target.checked)})),r.createElement("label",{className:"flex items-center justify-between"},r.createElement("span",{className:"text-sm"},"Sonidos de notificación"),r.createElement("input",{type:"checkbox",className:"rounded text-blue-500",checked:F,onChange:e=>B(e.target.checked)})))),r.createElement("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg"},r.createElement("h4",{className:"font-medium mb-2"},"Uso del sistema"),r.createElement("div",{className:"space-y-2 text-sm"},r.createElement("div",{className:"flex justify-between"},r.createElement("span",null,"Mensajes totales:"),r.createElement("span",{className:"font-medium"},q.totalMessages)),r.createElement("div",{className:"flex justify-between"},r.createElement("span",null,"Consultas realizadas:"),r.createElement("span",{className:"font-medium"},q.userMessages)),j.gemini.available&&r.createElement("div",{className:"flex justify-between"},r.createElement("span",null,"Créditos Gemini restantes:"),r.createElement("span",{className:"font-medium"},j.gemini.quota_limit-j.gemini.quota_used)))),r.createElement("div",null,r.createElement("h4",{className:"font-medium mb-3 flex items-center gap-2"},r.createElement(x.A,{className:"w-4 h-4"}),"Estado del Sistema AI"),r.createElement(Y,null)),r.createElement("button",{onClick:()=>{try{localStorage.setItem("ai-default-mode",I),localStorage.setItem("ai-system-preference",_),localStorage.setItem("ai-voice-enabled",V.toString()),localStorage.setItem("ai-show-suggestions",H.toString()),localStorage.setItem("ai-sound-notifications",F.toString()),alert("✅ Configuración guardada correctamente"),M(!1),console.log("Configuración guardada:",{assistantMode:I,selectedAISystem:_,voiceEnabled:V,showSuggestions:H,soundNotifications:F})}catch(e){console.error("Error guardando configuración:",e),alert("❌ Error guardando la configuración")}},className:"w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"},"Guardar cambios")))),r.createElement("div",{className:"flex-1 overflow-hidden relative"},"guided"===I?r.createElement("div",{className:"h-full overflow-y-auto bg-gradient-to-br from-blue-50 to-purple-50 dark:from-gray-800 dark:to-gray-900"},r.createElement("div",{className:"p-4"},r.createElement("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-900/30 rounded-xl border border-blue-200 dark:border-blue-700"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center"},r.createElement(g.A,{className:"w-6 h-6 text-white"})),r.createElement("div",null,r.createElement("h3",{className:"font-semibold text-blue-900 dark:text-blue-100"},"🚀 Modo Asistente Guiado"),r.createElement("p",{className:"text-sm text-blue-700 dark:text-blue-300"},"Te ayudo paso a paso con botones interactivos para gestionar tu heladería")))),r.createElement(J,{onExecuteAction:async e=>(console.log("Ejecutando acción desde wizard:",e),{success:!0})}))):r.createElement("div",{className:"h-full flex flex-col bg-gray-50 dark:bg-gray-900"},r.createElement("div",{className:"flex-1 overflow-hidden"},r.createElement(z,{messages:e,isLoading:t,className:"h-full",height:"h-full"})),r.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},r.createElement(L,{actions:C,onActionClick:w,className:"px-4 py-2"})),r.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"},r.createElement("div",{className:"px-4 py-3"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full text-xs "+("gemini"===S?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"mock"===S?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300")},r.createElement("div",{className:"w-1.5 h-1.5 rounded-full bg-current animate-pulse"}),r.createElement("span",{className:"font-medium"},"gemini"===S?"✨ Gemini AI":"mock"===S?"🤖 Asistente Local":"📦 Modo Básico")),t&&r.createElement("span",{className:"text-xs text-gray-500 flex items-center gap-1"},r.createElement("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),r.createElement("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.createElement("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}}))),r.createElement(O,{inputMessage:a,setInputMessage:o,onSendMessage:E,onVoiceCommand:A,isLoading:t,isListening:h,voiceSupported:v})))))))}));te.displayName="ExpandedChat";const ae=()=>{const{chatState:e,updateChatState:t,sendMessage:a,setInputMessage:n}=(0,y.oP)(),[s,o]=(0,r.useState)(window.innerWidth<1024),[i,c]=(0,r.useState)("false"!==localStorage.getItem("ai-assistant-enabled"));return(0,r.useEffect)((()=>{const e=()=>{o(window.innerWidth<1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>{const e=e=>{c(e.detail.enabled)};return window.addEventListener("ai-assistant-toggle",e),()=>window.removeEventListener("ai-assistant-toggle",e)}),[]),(0,r.useEffect)((()=>{const r=a=>{const{action:r}=a.detail;switch(r){case"toggle":t("closed"===e?"minimized":"closed");break;case"open":case"minimize":t("minimized");break;case"close":t("closed");break;case"expand":t("expanded")}},l=r=>{const{text:l}=r.detail;"closed"===e&&t("minimized"),n(l),setTimeout((()=>{l.trim()&&a(l)}),100)};return window.addEventListener("chatControl",r),window.addEventListener("chatQuery",l),()=>{window.removeEventListener("chatControl",r),window.removeEventListener("chatQuery",l)}}),[e,t,n,a]),i?r.createElement(l.N,{mode:"wait"},"closed"===e&&r.createElement(Z,{key:"floating",onClick:()=>t("minimized"),unreadCount:0,isMobile:s}),"minimized"===e&&r.createElement(ee,{key:"minimized",isMobile:s}),"expanded"===e&&r.createElement(te,{key:"expanded"})):null};var re=(0,r.memo)(ae)},72284:function(e,t,a){var r=a(96540),n=a(3385),l=a(20053);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s.apply(null,arguments)}const o=r.forwardRef((({children:e,variant:t="primary",size:a="md",loading:o=!1,disabled:i=!1,icon:c,tooltip:m,className:d,flavor:u,...g},p)=>{const b={primary:`scoop-button ${u?`scoop-${u}`:""} text-white shadow-lg hover:shadow-xl focus:ring-primary-400/50`,secondary:"bg-venezia-100 dark:bg-gray-700 text-venezia-800 dark:text-gray-100 hover:bg-venezia-200 dark:hover:bg-gray-600 focus:ring-venezia-400 shadow-md hover:shadow-lg",success:"scoop-mint text-white shadow-lg hover:shadow-xl focus:ring-mint-400/50",danger:"scoop-strawberry text-white shadow-lg hover:shadow-xl focus:ring-primary-400/50",outline:"border-2 border-venezia-300 dark:border-gray-600 bg-white/80 dark:bg-gray-800/80 text-venezia-700 dark:text-gray-200 hover:bg-venezia-50 dark:hover:bg-gray-700 focus:ring-venezia-400 backdrop-blur-sm",ghost:"text-venezia-700 dark:text-gray-200 hover:bg-venezia-100/60 dark:hover:bg-gray-700/60 focus:ring-venezia-400 backdrop-blur-sm"},x=i||o;return r.createElement(n.P.button,s({ref:p,whileHover:x?{}:{y:-2},whileTap:x?{}:{scale:.95},animate:o?{boxShadow:["0 4px 15px rgba(236, 72, 153, 0.3)","0 8px 25px rgba(236, 72, 153, 0.5)","0 4px 15px rgba(236, 72, 153, 0.3)"]}:{},transition:{duration:.3,ease:"easeOut",boxShadow:{duration:1.5,repeat:1/0,ease:"easeInOut"}},className:(0,l.A)("scoop-button relative overflow-hidden font-semibold transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transform hover:scale-105 active:scale-95",b[t],{xs:"px-3 py-1.5 text-xs rounded-xl",sm:"px-4 py-2 text-sm rounded-xl",md:"px-6 py-2.5 text-sm rounded-2xl",lg:"px-8 py-3 text-base rounded-2xl"}[a],x&&"cursor-not-allowed opacity-60 hover:scale-100",o&&"animate-flavor-pulse",d),disabled:x,title:m},g),o&&r.createElement("div",{className:"swirl-loader mr-2 w-4 h-4 border-2 border-white/20 border-l-white"}),c&&!o&&r.createElement(c,{className:"h-4 w-4 mr-2"}),r.createElement("span",{className:o?"animate-melt-gentle":""},e),r.createElement("span",{className:"absolute inset-0 rounded-full bg-white/20 transform scale-0 group-active:scale-100 transition-transform duration-300"}))}));o.displayName="Button",t.A=o},80233:function(e,t,a){var r=a(96540),n=a(67561),l=a(3385),s=a(17133),o=a(27235),i=a(86589),c=a(71429),m=a(418),d=a(49436),u=a(48697),g=a(45773),p=a(60799),b=a(82932);t.A=()=>{const[e,t]=(0,r.useState)([]),[a,x]=(0,r.useState)(!1),{socket:y,connected:h}=(0,b.Y)(),[f,v]=(0,r.useState)(0);(0,r.useEffect)((()=>{if(E(),y&&h)return y.on("alerts:current",(e=>{t(e),w(e)})),y.on("alerts:stock",N),y.on("alerts:expiry",N),y.on("alerts:cash",N),y.on("alerts:sales",N),y.on("alert:resolved",(({id:e})=>{t((t=>t.filter((t=>t.id!==e)))),p.Ay.success("Alerta resuelta")})),y.on("alert:dismissed",(({id:e})=>{t((t=>t.filter((t=>t.id!==e))))})),()=>{y.off("alerts:current"),y.off("alerts:stock"),y.off("alerts:expiry"),y.off("alerts:cash"),y.off("alerts:sales"),y.off("alert:resolved"),y.off("alert:dismissed")}}),[y,h]);const E=async()=>{try{const e=await fetch("/api/alerts");if(!e.ok){const e=[{id:1,type:"info",severity:"info",title:"Sistema Operativo",message:"Sistema funcionando en modo offline",timestamp:(new Date).toISOString(),read:!1}];return t(e),void w(e)}const a=e.headers.get("content-type");if(a&&-1!==a.indexOf("application/json")){const a=await e.json();a.success&&(t(a.data),w(a.data))}else{console.warn("Response is not JSON, using mock data");const e=[];t(e),w(e)}}catch(e){console.error("Error fetching alerts:",e),t([]),v(0)}},N=e=>{t((t=>{const a=t.filter((t=>!e.find((e=>e.id===t.id)))),r=[...e,...a];return w(r),e.forEach((e=>{"critical"===e.severity&&p.Ay.error(e.title)})),r}))},w=e=>{const t=e.filter((e=>!e.read)).length;v(t)},k=e=>{switch(e){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}};return r.createElement(r.Fragment,null,r.createElement("div",{className:"fixed top-4 right-4 z-50"},r.createElement("button",{onClick:()=>x(!a),className:"relative p-3 bg-white/80 backdrop-blur-md rounded-full shadow-lg hover:shadow-xl transition-all duration-300"},r.createElement(d.A,{className:"h-6 w-6 text-gray-700"}),f>0&&r.createElement("span",{className:"absolute -top-1 -right-1 h-6 w-6 bg-red-500 text-white text-xs rounded-full flex items-center justify-center"},f))),r.createElement(n.N,null,a&&r.createElement(r.Fragment,null,r.createElement(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>x(!1),className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40"}),r.createElement(l.P.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},transition:{type:"spring",damping:25},className:"fixed right-0 top-0 h-full w-96 bg-white/95 backdrop-blur-md shadow-2xl z-50"},r.createElement("div",{className:"h-full flex flex-col"},r.createElement("div",{className:"p-6 border-b border-gray-200"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h2",{className:"text-2xl font-bold text-gray-800"},"Alertas"),r.createElement("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors"},r.createElement(u.A,{className:"h-5 w-5 text-gray-600"})))),r.createElement("div",{className:"flex-1 overflow-y-auto p-6 space-y-4"},0===e.length?r.createElement("div",{className:"text-center py-12"},r.createElement(g.A,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),r.createElement("p",{className:"text-gray-600"},"No hay alertas activas")):e.map((e=>r.createElement(l.P.div,{key:e.id,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:100},className:`p-4 rounded-lg border ${k(e.severity)}`},r.createElement("div",{className:"flex items-start justify-between"},r.createElement("div",{className:"flex items-start space-x-3"},r.createElement("div",{className:"flex-shrink-0"},(e=>{switch(e){case"stock":return r.createElement(s.A,{className:"h-5 w-5"});case"expiry":return r.createElement(o.A,{className:"h-5 w-5"});case"cash":return r.createElement(i.A,{className:"h-5 w-5"});case"sales":return r.createElement(c.A,{className:"h-5 w-5"});default:return r.createElement(m.A,{className:"h-5 w-5"})}})(e.type)),r.createElement("div",{className:"flex-1"},r.createElement("h3",{className:"font-semibold"},e.title),r.createElement("p",{className:"text-sm mt-1 opacity-80"},e.message),r.createElement("p",{className:"text-xs mt-2 opacity-60"},new Date(e.timestamp).toLocaleString()))),r.createElement("button",{onClick:()=>(async e=>{try{(await fetch(`/api/alerts/${e}/dismiss`,{method:"POST",headers:{"Content-Type":"application/json"}})).ok&&(t((t=>t.filter((t=>t.id!==e)))),p.Ay.success("Alerta descartada"))}catch(e){console.error("Error dismissing alert:",e),p.Ay.error("Error al descartar alerta")}})(e.id),className:"ml-2 p-1 hover:bg-white/50 rounded transition-colors"},r.createElement(u.A,{className:"h-4 w-4"}))))))),r.createElement("div",{className:"p-4 border-t border-gray-200"},r.createElement("button",{onClick:()=>{t([]),p.Ay.success("Todas las alertas descartadas")},className:"w-full py-2 px-4 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 font-medium"},"Descartar todas")))))))}},81381:function(e,t,a){a.d(t,{A:function(){return T}});var r=a(96540),n=a(89230),l=a(98445),s=a(14539),o=a(88676),i=a(75107),c=a(80964),m=a(55042),d=a(67561),u=a(3385),g=a(55467),p=a(82932),b=a(17133),x=a(27235),y=a(71429),h=a(418),f=a(49436),v=a(48697),E=a(45773),N=a(70700),w=a(42203),k=a(28219),A=a(72284),C=a(20053),P=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)([]),[l,s]=(0,r.useState)(0),[o,i]=(0,r.useState)("all"),{success:m}=(0,w.d)(),{data:g,refetch:p}=(0,N.Wl)("/api/alerts");(0,r.useEffect)((()=>{g&&(n(g.alerts||[]),s(g.unread_count||0))}),[g]),(0,r.useEffect)((()=>{const e=setInterval((()=>{p()}),6e4);return()=>clearInterval(e)}),[p]);const P=async e=>{try{await fetch(`/api/alerts/${e}/read`,{method:"POST"}),n(a.map((t=>t.id===e?{...t,read:!0}:t))),s(Math.max(0,l-1))}catch(e){console.error("Error marking alert as read:",e)}},S=a.filter((e=>"unread"===o?!e.read:"critical"===o?"critical"===e.severity:"stock"===o?"stock_low"===e.type:"expiration"!==o||"expiration"===e.type));return r.createElement(r.Fragment,null,r.createElement("div",{className:"relative"},r.createElement("button",{onClick:()=>t(!e),className:(0,C.A)("notification-button",l>0&&"has-unread","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900"),"aria-label":"Alertas"+(l>0?`, ${l} sin leer`:""),"aria-expanded":e,"aria-controls":"alert-panel"},r.createElement(f.A,{className:"header-action-icon"}),l>0&&r.createElement("span",{className:"notification-badge"},l>9?"9+":l))),r.createElement(d.N,null,e&&r.createElement(r.Fragment,null,r.createElement("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),r.createElement(u.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},id:"alert-panel",className:"fixed right-20 top-16 z-50 w-96 max-h-[calc(100vh-5rem)] bg-white dark:bg-gray-900 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden",role:"dialog","aria-labelledby":"alert-center-title"},r.createElement("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h3",{id:"alert-center-title",className:"text-lg font-semibold text-gray-900 dark:text-white"},"Centro de Alertas"),r.createElement("button",{onClick:()=>t(!1),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-venezia-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900","aria-label":"Cerrar panel de alertas"},r.createElement(v.A,{className:"h-5 w-5"}))),r.createElement("div",{className:"mt-3 flex gap-2 flex-wrap"},[{value:"all",label:"Todas"},{value:"unread",label:"No leídas"},{value:"critical",label:"Críticas"},{value:"stock",label:"Stock"},{value:"expiration",label:"Vencimientos"}].map((e=>r.createElement("button",{key:e.value,onClick:()=>i(e.value),className:(0,C.A)("px-3 py-1 text-sm rounded-full transition-colors",o===e.value?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600")},e.label))))),r.createElement("div",{className:"overflow-y-auto max-h-96 bg-gray-50 dark:bg-gray-950"},0===S.length?r.createElement("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400"},r.createElement(f.A,{className:"h-12 w-12 mx-auto mb-3 opacity-20"}),r.createElement("p",{className:"text-base"},"No hay alertas ","all"!==o?"en esta categoría":"")):r.createElement("div",{className:"divide-y divide-gray-200 dark:divide-gray-700"},S.map((e=>{const t=(e=>{switch(e){case"stock_low":return b.A;case"expiration":return x.A;case"sales_anomaly":return y.A;default:return h.A}})(e.type),l=(e=>{switch(e){case"critical":return"text-red-600 bg-red-50 dark:text-red-400 dark:bg-red-900/30";case"warning":return"text-yellow-600 bg-yellow-50 dark:text-yellow-400 dark:bg-yellow-900/30";case"info":return"text-blue-600 bg-blue-50 dark:text-blue-400 dark:bg-blue-900/30";default:return"text-gray-600 bg-gray-50 dark:text-gray-400 dark:bg-gray-900/30"}})(e.severity);return r.createElement(u.P.div,{key:e.id,initial:{opacity:0},animate:{opacity:1},className:(0,C.A)("p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors cursor-pointer",!e.read&&"bg-blue-50 dark:bg-blue-900/20"),onClick:()=>!e.read&&P(e.id)},r.createElement("div",{className:"flex gap-3"},r.createElement("div",{className:(0,C.A)("p-2 rounded-lg",l)},r.createElement(t,{className:"h-5 w-5"})),r.createElement("div",{className:"flex-1"},r.createElement("div",{className:"flex items-start justify-between"},r.createElement("div",null,r.createElement("h4",{className:"text-base font-medium text-gray-900 dark:text-white"},e.title),r.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1 leading-relaxed"},e.message),e.action_url&&r.createElement(A.A,{size:"sm",variant:"link",className:"mt-2 p-0",onClick:t=>{t.stopPropagation(),window.location.href=e.action_url}},"Ver detalles →")),r.createElement("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{await fetch(`/api/alerts/${e}/dismiss`,{method:"POST"}),n(a.filter((t=>t.id!==e))),m("Alerta descartada")}catch(e){console.error("Error dismissing alert:",e)}})(e.id)},className:"p-1 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-venezia-500 focus:ring-offset-2 dark:focus:ring-offset-gray-900","aria-label":"Descartar alerta"},r.createElement(v.A,{className:"h-4 w-4"}))),r.createElement("div",{className:"flex items-center gap-3 mt-2"},r.createElement("span",{className:"text-sm text-gray-500 dark:text-gray-400"},new Date(e.created_at).toLocaleString()),!e.read&&r.createElement(k.A,{variant:"info",size:"sm"},"Nueva"),"critical"===e.severity&&r.createElement(k.A,{variant:"danger",size:"sm"},"Crítica")))))})))),r.createElement("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800"},r.createElement("div",{className:"flex gap-2"},r.createElement(A.A,{variant:"secondary",size:"sm",className:"flex-1",onClick:()=>{t(!1),window.location.href="/settings#alerts"}},r.createElement(c.A,{className:"h-4 w-4 mr-1"}),"Configurar"),r.createElement(A.A,{variant:"primary",size:"sm",className:"flex-1",onClick:()=>{a.filter((e=>!e.read)).forEach((e=>P(e.id))),m("Todas las alertas marcadas como leídas")}},r.createElement(E.A,{className:"h-4 w-4 mr-1"}),"Marcar todas")))))))},S=a(67984),z=a(76069),j=a(91031),I=a(83240),L=({onBranchChange:e,currentBranch:t})=>{const{user:a}=(0,I.A)(),[n,l]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[c,m]=(0,r.useState)(t);(0,r.useEffect)((()=>{g()}),[a]);const g=async()=>{if(a)try{const{data:t}=await j.ND.from("branches").select("*").eq("organization_id",a.organization_id).eq("is_active",!0).in("id",a.branch_access||[]);if(l(t||[]),!c&&t&&t.length>0){const a=t.find((e=>e.is_main_branch))||t[0];m(a),e(a)}}catch(e){console.error("Error loading branches:",e)}};return n.length<=1?null:r.createElement("div",{className:"relative"},r.createElement(u.P.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(!s),className:"flex items-center gap-3 px-4 py-2 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow"},r.createElement(S.A,{className:"h-5 w-5 text-blue-500"}),r.createElement("div",{className:"text-left"},r.createElement("p",{className:"font-semibold text-sm"},c?.name||"Seleccionar Sucursal"),c&&r.createElement("p",{className:"text-xs text-gray-500 flex items-center gap-1"},r.createElement(z.A,{className:"h-3 w-3"}),c.address?.split(",")[0])),r.createElement(i.A,{className:"h-4 w-4 text-gray-400 transition-transform "+(s?"rotate-180":"")})),r.createElement(d.N,null,s&&r.createElement(u.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full mt-2 w-80 bg-white rounded-lg shadow-xl z-50 overflow-hidden"},r.createElement("div",{className:"p-2"},n.map((t=>{const a=c?.id===t.id,n=(e=>{if(!e.opening_hours)return!0;const t=new Date,a=t.toLocaleDateString("en-US",{weekday:"lowercase"}),r=t.toTimeString().slice(0,5),n=e.opening_hours[a];return!!n&&r>=n.open&&r<=n.close})(t);return r.createElement(u.P.button,{key:t.id,whileHover:{backgroundColor:"#f3f4f6"},onClick:()=>(t=>{m(t),e(t),o(!1),localStorage.setItem("selectedBranchId",t.id)})(t),className:"w-full p-3 rounded-lg text-left transition-colors "+(a?"bg-blue-50":"")},r.createElement("div",{className:"flex items-start justify-between"},r.createElement("div",{className:"flex-1"},r.createElement("div",{className:"flex items-center gap-2"},r.createElement("p",{className:"font-semibold"},t.name),t.is_main_branch&&r.createElement("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full"},"Principal")),r.createElement("p",{className:"text-sm text-gray-600 mt-1"},t.address),r.createElement("div",{className:"flex items-center gap-3 mt-2"},r.createElement("span",{className:"text-xs flex items-center gap-1 "+(n?"text-green-600":"text-red-600")},r.createElement(x.A,{className:"h-3 w-3"}),n?"Abierto":"Cerrado"),t.phone&&r.createElement("span",{className:"text-xs text-gray-500"},t.phone))),a&&r.createElement(E.A,{className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-1"})))}))),r.createElement("div",{className:"border-t px-4 py-3 bg-gray-50"},r.createElement("p",{className:"text-xs text-gray-600"},"Tienes acceso a ",n.length," sucursales")))))},T=({onMenuClick:e})=>{const{user:t,logout:a,darkMode:b,toggleDarkMode:x}=(0,g.n)(),{connected:y}=(0,p.Y)(),[h,f]=(0,r.useState)(!1),[v,E]=(0,r.useState)(""),[N,w]=(0,r.useState)(window.innerWidth<768),[k,A]=(0,r.useState)(!1),[S,z]=(0,r.useState)({products:[],orders:[],customers:[]}),[j,I]=(0,r.useState)(!1),[T,$]=(0,r.useState)(null),M=(0,r.useRef)(null);(0,r.useEffect)((()=>{const e=()=>{w(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),(0,r.useEffect)((()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);return r.createElement("header",{className:"frost-overlay border-b-4 border-b-primary-200 dark:border-b-primary-600 sticky top-0 z-40 shadow-lg"},r.createElement("div",{className:"flex items-center justify-between h-16 px-4 lg:px-6"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("button",{onClick:e,className:(0,C.A)("touch-target rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors","focus:outline-none focus:ring-2 focus:ring-venezia-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800","lg:hidden",N?"p-3":"p-2"),"aria-label":"Abrir menú"},r.createElement(n.A,{className:(0,C.A)("text-gray-600 dark:text-gray-300",N?"h-6 w-6":"h-5 w-5")})),t?.branch_access?.length>1&&r.createElement(L,{currentBranch:T,onBranchChange:e=>{$(e),localStorage.setItem("currentBranchId",e.id),window.location.reload()}}),r.createElement("div",{className:(0,C.A)("relative",N?"hidden":"block")},r.createElement(l.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-venezia-400"}),r.createElement("input",{type:"text",placeholder:"Buscar sabores, órdenes...",value:v,onChange:e=>E(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e=>{e.preventDefault(),v.trim()&&(A(!0),(async e=>{const t={products:[],orders:[],customers:[]};try{const a=await fetch(`/api/products?search=${encodeURIComponent(e)}`);if(a.ok){const e=await a.json();t.products=e.slice(0,5)}const r=await fetch(`/api/sales?search=${encodeURIComponent(e)}`);if(r.ok){const e=await r.json();t.orders=e.sales?.slice(0,5)||[]}z(t)}catch(e){console.error("Search error:",e)}})(v))})(e),className:"gelato-input pl-10 pr-4 py-2 w-64 bg-venezia-50/80 dark:bg-gray-700/80 border-venezia-200 dark:border-gray-600 placeholder-venezia-500","aria-label":"Buscar productos, órdenes o clientes"}))),r.createElement("div",{className:"flex items-center gap-3"},N&&r.createElement("button",{onClick:()=>I(!0),className:"touch-target p-3 rounded-2xl scoop-button scoop-mint hover:shadow-lg transition-all duration-300 transform hover:scale-105","aria-label":"Buscar productos, órdenes o clientes",title:"Buscar productos, órdenes o clientes"},r.createElement(l.A,{className:"h-5 w-5 text-white"})),r.createElement("button",{onClick:x,className:(0,C.A)("touch-target rounded-2xl transition-all duration-300 transform hover:scale-105 backdrop-blur-sm","hover:bg-venezia-100/60 dark:hover:bg-gray-700/60 hover:shadow-md",N?"p-3":"p-2"),"aria-label":b?"Activar modo claro":"Activar modo oscuro",title:b?"Cambiar a modo claro":"Cambiar a modo oscuro"},b?r.createElement(s.A,{className:(0,C.A)("text-venezia-500 animate-wobble-soft",N?"h-6 w-6":"h-5 w-5")}):r.createElement(o.A,{className:(0,C.A)("text-venezia-600 dark:text-venezia-300 animate-wobble-soft",N?"h-6 w-6":"h-5 w-5")})),r.createElement(P,null),r.createElement("div",{className:(0,C.A)("flex items-center gap-2",N?"hidden":"flex")},r.createElement("div",{className:(0,C.A)("w-2 h-2 rounded-full",y?"bg-green-500":"bg-red-500")}),r.createElement("span",{className:"text-xs text-gray-600 dark:text-gray-400 hidden lg:block"},y?"Conectado":"Desconectado")),r.createElement("div",{className:"relative",ref:M},r.createElement("button",{onClick:()=>f(!h),className:(0,C.A)("touch-target flex items-center gap-2 rounded-2xl backdrop-blur-sm transition-all duration-300 transform hover:scale-105","hover:bg-venezia-100/60 dark:hover:bg-gray-700/60 hover:shadow-md","p-2"),"aria-label":"Menú de usuario"},r.createElement("div",{className:(0,C.A)("scoop-button scoop-pistachio text-white rounded-2xl flex items-center justify-center font-semibold shadow-lg",N?"h-9 w-9 text-sm":"h-8 w-8 text-xs")},t?.name?.charAt(0)?.toUpperCase()||"🍦"),!N&&r.createElement(r.Fragment,null,r.createElement("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 hidden lg:block"},t?.name||"Usuario"),r.createElement(i.A,{className:"h-4 w-4 text-gray-500"}))),r.createElement(d.N,null,h&&r.createElement(u.P.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2},className:(0,C.A)("absolute right-0 mt-2 gelato-card shadow-2xl border-2 border-primary-200 dark:border-primary-600 z-50 overflow-hidden",N?"w-64":"w-56")},r.createElement("div",{className:"p-4 border-b border-primary-200/30 dark:border-primary-600/30"},r.createElement("p",{className:"font-semibold text-venezia-800 dark:text-venezia-100"},t?.name||"Usuario"),r.createElement("p",{className:"text-sm text-venezia-600 dark:text-venezia-400"},t?.email||"usuario@venezia.com")),r.createElement("div",{className:"py-2"},r.createElement("button",{onClick:()=>{f(!1)},className:"flex items-center gap-3 w-full px-4 py-3 text-left text-sm text-venezia-700 dark:text-venezia-300 hover:bg-primary-50/60 dark:hover:bg-gray-700/60 transition-all duration-200 hover:-translate-y-0.5"},r.createElement(c.A,{className:"h-4 w-4 text-venezia-500"}),"Configuración"),r.createElement("button",{onClick:()=>{f(!1),a()},className:"flex items-center gap-3 w-full px-4 py-3 text-left text-sm text-primary-600 dark:text-primary-400 hover:bg-primary-50/60 dark:hover:bg-primary-900/20 transition-all duration-200 hover:-translate-y-0.5"},r.createElement(m.A,{className:"h-4 w-4 text-primary-500"}),"Cerrar sesión"))))))))}},82749:function(e,t,a){var r=a(96540),n=a(30116),l=a(21456),s=a(48697),o=a(42203);t.A=()=>{const[e,t]=(0,r.useState)(navigator.onLine),[a,i]=(0,r.useState)(!1),{info:c,success:m}=(0,o.d)();return(0,r.useEffect)((()=>{const e=()=>{t(!0),i(!0),m("Conexión restaurada","Ya estás conectado a internet"),setTimeout((()=>i(!1)),3e3)},a=()=>{t(!1),i(!0),c("Sin conexión","Verifica tu conexión a internet")};return window.addEventListener("online",e),window.addEventListener("offline",a),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",a)}}),[c,m]),e&&!a?null:r.createElement("div",{className:"fixed top-0 left-0 right-0 z-50 transition-transform duration-300 "+(a?"translate-y-0":"-translate-y-full")},r.createElement("div",{className:"flex items-center justify-between px-4 py-2 "+(e?"bg-green-500 text-white":"bg-red-500 text-white")},r.createElement("div",{className:"flex items-center gap-2"},e?r.createElement(r.Fragment,null,r.createElement(n.A,{className:"w-4 h-4"}),r.createElement("span",{className:"text-sm font-medium"},"Conexión restaurada")):r.createElement(r.Fragment,null,r.createElement(l.A,{className:"w-4 h-4"}),r.createElement("span",{className:"text-sm font-medium"},"Sin conexión a internet - Trabajando sin conexión"))),r.createElement("button",{onClick:()=>i(!1),className:"p-1 rounded hover:bg-black/10 transition-colors"},r.createElement(s.A,{className:"w-4 h-4"}))))}},90513:function(e,t,a){var r=a(96540),n=a(3385);class l extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t,hasError:!0}),this.logErrorToService(e,t)}logErrorToService=(e,t)=>{{const a={message:e.message,stack:e.stack,componentStack:t.componentStack,timestamp:(new Date).toISOString(),userAgent:navigator.userAgent,url:window.location.href,userId:this.props.userId||"anonymous"};console.error("Error logged:",a)}};handleRetry=()=>{this.setState((e=>({hasError:!1,error:null,errorInfo:null,retryCount:e.retryCount+1})))};handleReload=()=>{window.location.reload()};render(){const{hasError:e,error:t,retryCount:a}=this.state,{fallback:n,level:l="component",children:o}=this.props;return e?n?r.createElement(n,{error:t,onRetry:this.handleRetry,onReload:this.handleReload,retryCount:a}):r.createElement(s,{error:t,level:l,onRetry:this.handleRetry,onReload:this.handleReload,retryCount:a}):o}}const s=({error:e,level:t,onRetry:a,onReload:l,retryCount:s})=>{const{title:o,message:i,icon:c}=(()=>{switch(t){case"app":return{title:"Aplicación no disponible",message:"Ha ocurrido un error crítico en la aplicación. Por favor, recarga la página.",icon:"🚨"};case"page":return{title:"Página no disponible",message:"Esta página ha encontrado un error. Puedes intentar recargar o volver al inicio.",icon:"📄"};default:return{title:"Componente no disponible",message:"Este componente ha encontrado un error. Puedes intentar de nuevo.",icon:"🔧"}}})(),m=s<3;return r.createElement(n.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`\n        flex flex-col items-center justify-center p-6 \n        ${"app"===t?"min-h-screen bg-gray-50 dark:bg-gray-900":"min-h-[200px]"}\n        text-center\n      `},r.createElement("div",{className:"text-6xl mb-4"},c),r.createElement("h2",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-2"},o),r.createElement("p",{className:"text-gray-600 dark:text-gray-400 mb-6 max-w-md"},i),!1,r.createElement("div",{className:"flex gap-3"},m&&"app"!==t&&r.createElement("button",{onClick:a,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"},"Intentar de nuevo ",s>0&&`(${s}/3)`),r.createElement("button",{onClick:l,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"},"app"===t?"Recargar aplicación":"Recargar página")),s>=3&&r.createElement("p",{className:"text-sm text-yellow-600 dark:text-yellow-400 mt-4"},"⚠️ Se han agotado los intentos automáticos. Intenta recargar la página."))};t.Ay=l},91031:function(e,t,a){a.d(t,{ND:function(){return r},fD:function(){return n}});const r=(0,a(3387).UU)("https://axmknxpmapomyegdaogl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF4bWtueHBtYXBvbXllZ2Rhb2dsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4OTU1MTcsImV4cCI6MjA2NzQ3MTUxN30.DNv7zX7KFp50DzhfzWumNYKUONcchQ1xaGFd0UfA18g",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),n={async signUp(e,t,a={}){const{data:n,error:l}=await r.auth.signUp({email:e,password:t,options:{data:a}});return{data:n,error:l}},async signIn(e,t){const{data:a,error:n}=await r.auth.signInWithPassword({email:e,password:t});return{data:a,error:n}},async signOut(){const{error:e}=await r.auth.signOut();return{error:e}},async getCurrentUser(){const{data:{user:e},error:t}=await r.auth.getUser();return{user:e,error:t}},async getSession(){const{data:{session:e},error:t}=await r.auth.getSession();return{session:e,error:t}},async updateUser(e){const{data:t,error:a}=await r.auth.updateUser(e);return{data:t,error:a}},async resetPassword(e){const{data:t,error:a}=await r.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});return{data:t,error:a}},async updatePassword(e){const{data:t,error:a}=await r.auth.updateUser({password:e});return{data:t,error:a}}}},93823:function(e,t,a){var r=a(96540),n=a(3385),l=a(20053);t.A=({size:e="md",color:t="venezia-900",className:a,text:s,context:o})=>r.createElement("div",{className:(0,l.A)("flex flex-col items-center justify-center",a)},r.createElement(n.P.div,{className:(0,l.A)({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[e],{sm:"border-2",md:"border-2",lg:"border-3",xl:"border-4"}[e],`border-${t}/20`,`border-t-${t}`,"rounded-full"),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r.createElement(n.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:(0,l.A)("mt-3 text-sm font-medium",`text-${t}/60`)},(()=>{if(s)return s;switch(o){case"login":return"Verificando credenciales...";case"sales":return"Procesando venta...";case"inventory":return"Cargando inventario...";case"products":return"Cargando productos...";case"production":return"Cargando órdenes de producción...";case"customers":return"Cargando clientes...";case"reports":return"Generando reporte...";case"save":return"Guardando cambios...";case"delete":return"Eliminando elemento...";case"upload":return"Subiendo archivo...";default:return"Cargando..."}})()))},94538:function(e,t,a){var r=a(96540),n=a(47767),l=a(84976),s=a(67561),o=a(3385),i=a(6782),c=a(29696),m=a(67984),d=a(81966),u=a(17133),g=a(20085),p=a(91385),b=a(89667),x=a(93893),y=a(43197),h=a(37623),f=a(86589),v=a(82762),E=a(56108),N=a(80827),w=a(94945),k=a(66713),A=a(80964),C=a(48697),P=a(14539),S=a(88676),z=a(55467),j=a(20053);const I=r.memo((({isOpen:e,onClose:t})=>{const a=(0,n.zy)(),{darkMode:I,toggleDarkMode:L}=(0,z.n)(),[T,$]=(0,r.useState)(window.innerWidth<1024);(0,r.useEffect)((()=>{const e=()=>{$(window.innerWidth<1024)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const M=()=>{T&&t()},_=[{title:"Principal",items:[{name:"Dashboard",href:"/",icon:i.A}]},{title:"Ventas & POS",items:[{name:"Punto de Venta",href:"/pos",icon:c.A},{name:"Ventas",href:"/sales",icon:c.A},{name:"Tienda Web",href:"/shop",icon:m.A},{name:"Entregas",href:"/deliveries",icon:d.A}]},{title:"Inventario",items:[{name:"Stock General",href:"/stock",icon:u.A},{name:"Ingredientes",href:"/ingredients",icon:u.A},{name:"Transacciones",href:"/transactions",icon:g.A},{name:"Inventario",href:"/inventory",icon:u.A}]},{title:"Producción",items:[{name:"Recetas",href:"/recipes",icon:p.A},{name:"Producción",href:"/production",icon:b.A},{name:"Órdenes de Producción",href:"/production-orders",icon:b.A},{name:"Asignar Lote",href:"/batch-assignment",icon:b.A}]},{title:"Gestión",items:[{name:"Clientes",href:"/customers",icon:x.A},{name:"Productos",href:"/products",icon:y.A},{name:"Proveedores",href:"/providers",icon:x.A},{name:"Tiendas",href:"/stores",icon:m.A},{name:"Usuarios Web",href:"/web-users",icon:h.A}]},{title:"Finanzas",items:[{name:"Control de Caja",href:"/cashflow",icon:f.A}]},{title:"Multi-Sucursal",items:[{name:"Sucursales",href:"/branches",icon:v.A},{name:"Dashboard Corporativo",href:"/corporate-dashboard",icon:E.A}]},{title:"Análisis",items:[{name:"Reportes",href:"/reports",icon:N.A},{name:"Analíticas",href:"/analytics",icon:w.A}]},{title:"Sistema",items:[{name:"Control de Temperatura",href:"/temperature",icon:k.A},{name:"Configuración",href:"/settings",icon:A.A}]}],R={open:{width:T?"85vw":"16rem",transition:{type:"spring",stiffness:300,damping:30}},closed:{width:T?"0px":"4rem",transition:{type:"spring",stiffness:300,damping:30}}},V={open:{opacity:1,x:0,transition:{delay:.1,duration:.2}},closed:{opacity:0,x:-20,transition:{duration:.15}}};return r.createElement(r.Fragment,null,r.createElement(s.N,null,T&&e&&r.createElement(o.P.div,{variants:{open:{opacity:1,transition:{duration:.2}},closed:{opacity:0,transition:{duration:.2}}},initial:"closed",animate:"open",exit:"closed",className:"fixed inset-0 bg-black/50 z-40",onClick:t})),r.createElement(o.P.aside,{variants:R,animate:e?"open":"closed",className:(0,j.A)("fixed left-0 top-0 z-50 h-screen gelato-card border-r-4 border-r-primary-300 dark:border-r-primary-600","lg:translate-x-0 shadow-2xl",T&&!e&&"-translate-x-full",T&&"max-w-[85vw]"),style:{background:"linear-gradient(180deg, var(--flavor-vanilla) 0%, var(--cream-warm) 100%)"}},r.createElement("div",{className:"flex h-full flex-col"},r.createElement("div",{className:(0,j.A)("flex items-center justify-between border-b border-gray-200 dark:border-gray-700",T?"h-20 px-4 py-3":"h-16 px-4")},r.createElement(s.N,{mode:"wait"},e?r.createElement(o.P.div,{key:"logo-full",variants:V,initial:"closed",animate:"open",exit:"closed",className:"flex items-center gap-3"},r.createElement("div",{className:"h-10 w-10 scoop-button scoop-strawberry rounded-xl flex items-center justify-center shadow-lg animate-wobble-soft"},r.createElement("span",{className:"text-white font-bold text-lg font-display"},"🍦")),r.createElement("div",null,r.createElement("h1",{className:"text-xl font-display font-bold text-venezia-800 dark:text-venezia-100"},"Venezia"),r.createElement("p",{className:"text-xs text-venezia-600 dark:text-venezia-400 font-medium"},"Gelateria Management"))):r.createElement(o.P.div,{key:"logo-compact",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-10 w-10 scoop-button scoop-strawberry rounded-xl flex items-center justify-center shadow-lg animate-wobble-soft"},r.createElement("span",{className:"text-white font-bold text-lg"},"🍦"))),T&&r.createElement("button",{onClick:t,className:"touch-target p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors active:scale-95","aria-label":"Cerrar menú"},r.createElement(C.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-300"}))),r.createElement("nav",{className:"flex-1 overflow-y-auto custom-scrollbar p-4"},r.createElement("div",{className:"space-y-6"}," ",_.map(((t,n)=>r.createElement("div",{key:t.title,className:"space-y-2"},r.createElement(s.N,null,e&&r.createElement(o.P.h3,{variants:V,initial:"closed",animate:"open",exit:"closed",className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-4"},t.title)),r.createElement("div",{className:"space-y-1"},t.items.map((t=>{const n=a.pathname===t.href;return r.createElement(l.k2,{key:t.name,to:t.href,onClick:M,className:({isActive:e})=>(0,j.A)("group flex items-center gap-4 rounded-2xl px-4 transition-all duration-300 relative backdrop-blur-sm","hover:bg-primary-50/60 dark:hover:bg-gray-700/60 hover:shadow-md hover:-translate-y-0.5","focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900","active:scale-95 active:shadow-inner",T?"py-4 min-h-[56px]":"py-3 min-h-[44px]",t.highlight&&!e&&"bg-gradient-to-r from-mint-50/80 to-pistachio-50/80 dark:from-mint-900/20 dark:to-pistachio-900/20 border border-mint-200/50 dark:border-mint-700/50",e?t.highlight?"bg-gradient-to-r from-mint-100/90 to-pistachio-100/90 text-mint-700 dark:bg-gradient-to-r dark:from-mint-900/50 dark:to-pistachio-900/50 dark:text-mint-300 shadow-lg border border-mint-300 dark:border-mint-600":"bg-gradient-to-r from-primary-50/90 to-venezia-50/90 text-primary-700 dark:bg-gradient-to-r dark:from-primary-900/50 dark:to-venezia-900/50 dark:text-primary-300 shadow-lg":t.highlight?"text-mint-700 dark:text-mint-300":"text-venezia-700 dark:text-venezia-300")},r.createElement(t.icon,{className:(0,j.A)("flex-shrink-0 transition-colors",T?"h-6 w-6":"h-5 w-5",n?t.highlight?"text-purple-600 dark:text-purple-400":"text-blue-600 dark:text-blue-400":t.highlight?"text-purple-500 dark:text-purple-400 group-hover:text-purple-700 dark:group-hover:text-purple-300":"text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300")}),r.createElement(s.N,null,e&&r.createElement(o.P.div,{variants:V,initial:"closed",animate:"open",exit:"closed",className:"flex items-center gap-2 flex-1"},r.createElement("span",{className:(0,j.A)("truncate font-medium",T?"text-base":"text-sm")},t.name),t.highlight&&r.createElement("span",{className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white text-xs px-2 py-1 rounded-full font-bold shadow-sm"},"NEW"))),n&&r.createElement(o.P.div,{layoutId:"activeIndicator",className:"cone-indicator",transition:{type:"spring",stiffness:300,damping:30}}))})))))))),r.createElement("div",{className:"border-t border-gray-200 dark:border-gray-700 p-4"},r.createElement("button",{onClick:L,className:(0,j.A)("group flex items-center gap-4 w-full rounded-2xl px-4 transition-all duration-300 backdrop-blur-sm","hover:bg-primary-50/60 dark:hover:bg-gray-700/60 hover:shadow-md hover:-translate-y-0.5","focus:outline-none focus:ring-2 focus:ring-primary-400 focus:ring-offset-2 dark:focus:ring-offset-gray-900","text-venezia-700 dark:text-venezia-300","active:scale-95",T?"py-4 min-h-[56px]":"py-3 min-h-[44px]"),"aria-label":I?"Activar modo claro":"Activar modo oscuro"},I?r.createElement(P.A,{className:(0,j.A)("flex-shrink-0 text-yellow-500 transition-colors",T?"h-6 w-6":"h-5 w-5")}):r.createElement(S.A,{className:(0,j.A)("flex-shrink-0 text-gray-500 dark:text-gray-400 group-hover:text-gray-700 dark:group-hover:text-gray-300 transition-colors",T?"h-6 w-6":"h-5 w-5")}),r.createElement(s.N,null,e&&r.createElement(o.P.span,{variants:V,initial:"closed",animate:"open",exit:"closed",className:(0,j.A)("truncate font-medium",T?"text-base":"text-sm")},I?"Modo Claro":"Modo Oscuro"))),!T&&r.createElement("div",{className:"mt-2"},r.createElement(s.N,null,e&&r.createElement(o.P.div,{variants:V,initial:"closed",animate:"open",exit:"closed",className:"text-xs text-gray-500 dark:text-gray-400 text-center py-2"},"Venezia Ice Cream v2.0")))))))}));I.displayName="Sidebar",t.A=I},98263:function(e,t,a){var r=a(96540),n=a(3385),l=a(60367),s=a(46858),o=a(61248),i=a(98445),c=a(35627),m=a(3160),d=a(64997),u=a(87677),g=a(96372),p=a(41181),b=a(67773),x=a(31960),y=a(20053);const h=({category:e})=>{const t={navigate:l.A,action:s.A,chat:o.A,search:i.A,filter:c.A,ui:m.A,help:d.A,voice:o.A,theme:m.A}[e]||o.A;return r.createElement(t,{className:"h-5 w-5"})},f=({shortcut:e,isHighlighted:t,onDemo:a})=>{const[l,s]=(0,r.useState)(!1);return r.createElement(n.P.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:(0,y.A)("group flex items-center justify-between p-4 rounded-xl border transition-all duration-200","hover:shadow-md hover:border-blue-300 dark:hover:border-blue-600","cursor-pointer",t?"bg-blue-50 dark:bg-blue-900/30 border-blue-200 dark:border-blue-700":"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",l&&"scale-95 bg-blue-100 dark:bg-blue-900/50"),onClick:()=>{s(!0),a(e),setTimeout((()=>s(!1)),200)},whileTap:{scale:.98}},r.createElement("div",{className:"flex items-center gap-3 flex-1 min-w-0"},r.createElement("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30 transition-colors"},r.createElement(h,{category:e.category})),r.createElement("div",{className:"flex-1 min-w-0"},r.createElement("p",{className:"font-medium text-gray-900 dark:text-white truncate"},e.label),e.target&&r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate"},"→ ",e.target))),r.createElement("div",{className:"flex items-center gap-2"},r.createElement("div",{className:"flex items-center gap-1"},e.combo.split("+").map(((e,t)=>r.createElement(r.Fragment,{key:t},t>0&&r.createElement("span",{className:"text-gray-400 text-sm"},"+"),r.createElement("kbd",{className:(0,y.A)("px-2 py-1 text-xs font-mono font-semibold rounded border shadow-sm","bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-300","border-gray-300 dark:border-gray-600","group-hover:bg-blue-50 dark:group-hover:bg-blue-900/30","group-hover:border-blue-300 dark:group-hover:border-blue-600",l&&"bg-blue-100 dark:bg-blue-900/50 border-blue-400")},e))))),r.createElement(u.A,{className:"h-4 w-4 text-gray-400 group-hover:text-blue-500 transition-colors"})))},v=({title:e,shortcuts:t,searchTerm:a,onShortcutDemo:u})=>{const g={navigate:{icon:l.A,color:"text-blue-600 dark:text-blue-400"},action:{icon:s.A,color:"text-green-600 dark:text-green-400"},chat:{icon:o.A,color:"text-purple-600 dark:text-purple-400"},search:{icon:i.A,color:"text-orange-600 dark:text-orange-400"},filter:{icon:c.A,color:"text-indigo-600 dark:text-indigo-400"},ui:{icon:m.A,color:"text-pink-600 dark:text-pink-400"},help:{icon:d.A,color:"text-gray-600 dark:text-gray-400"},voice:{icon:o.A,color:"text-red-600 dark:text-red-400"},theme:{icon:m.A,color:"text-yellow-600 dark:text-yellow-400"}},p=g[e.toLowerCase()]||g.help,b=p.icon,x=t.filter((e=>e.label.toLowerCase().includes(a.toLowerCase())||e.combo.toLowerCase().includes(a.toLowerCase())));return 0===x.length?null:r.createElement(n.P.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"space-y-4"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:(0,y.A)("p-2 rounded-lg bg-gray-100 dark:bg-gray-700",p.color)},r.createElement(b,{className:"h-5 w-5"})),r.createElement("div",null,r.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white capitalize"},"navigate"===e?"Navegación":"action"===e?"Acciones":"chat"===e?"Chat AI":"search"===e?"Búsqueda":"filter"===e?"Filtros":"ui"===e?"Interfaz":"help"===e?"Ayuda":"voice"===e?"Comandos de Voz":"theme"===e?"Tema":e),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},x.length," atajo",1!==x.length?"s":""))),r.createElement("div",{className:"space-y-2"},x.map(((e,t)=>r.createElement(f,{key:t,shortcut:e,isHighlighted:a&&e.label.toLowerCase().includes(a.toLowerCase()),onDemo:u})))))};t.A=({isOpen:e,onClose:t})=>{const{shortcuts:a}=(0,x.A)(),[n,l]=(0,r.useState)(""),[s,o]=(0,r.useState)(0),c=e=>{o((e=>e+1));const t=new CustomEvent("keyboardShortcut",{detail:{type:e.category,target:e.target,label:e.label,demo:!0}});window.dispatchEvent(t)},m=Object.values(a).reduce(((e,t)=>e+t.length),0);return(0,r.useEffect)((()=>{e||(l(""),o(0))}),[e]),r.createElement(b.A,{isOpen:e,onClose:t,title:r.createElement("div",{className:"flex items-center gap-3"},r.createElement("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg"},r.createElement(g.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})),r.createElement("div",null,r.createElement("h2",{className:"text-xl font-bold text-gray-900 dark:text-white"},"Atajos de Teclado"),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400"},m," atajos disponibles para acelerar tu trabajo"))),size:"xl",className:"max-h-[85vh]"},r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"relative"},r.createElement(i.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),r.createElement("input",{type:"text",placeholder:"Buscar atajos...",value:n,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",autoFocus:!0})),r.createElement("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800"},r.createElement("div",{className:"flex items-center gap-2 mb-2"},r.createElement(p.A,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),r.createElement("h4",{className:"font-semibold text-blue-900 dark:text-blue-100"},"Tips Pro")),r.createElement("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1"},r.createElement("p",null,"• Haz clic en cualquier atajo para probarlo"),r.createElement("p",null,"• Los atajos funcionan desde cualquier página"),r.createElement("p",null,"• Usa ⌘+? para abrir esta ayuda rápidamente"),s>0&&r.createElement("p",{className:"font-medium"},"• ¡Has probado ",s," atajo",1!==s?"s":"","!"))),r.createElement("div",{className:"space-y-8 max-h-96 overflow-y-auto custom-scrollbar"},Object.entries(a).map((([e,t])=>r.createElement(v,{key:e,title:e,shortcuts:t,searchTerm:n,onShortcutDemo:c})))),n&&Object.values(a).every((e=>0===e.filter((e=>e.label.toLowerCase().includes(n.toLowerCase())||e.combo.toLowerCase().includes(n.toLowerCase()))).length))&&r.createElement("div",{className:"text-center py-8"},r.createElement(i.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400"},'No se encontraron atajos para "',n,'"')),r.createElement("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200 dark:border-gray-700"},r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},m," atajos totales • Haz clic para probar"),r.createElement("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},"Cerrar"))))}}}]);