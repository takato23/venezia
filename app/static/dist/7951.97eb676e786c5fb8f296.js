"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[7951],{87951:function(e,s,a){a.r(s);const n=new class{constructor(){this.version="3.0.0",this.capabilities={inventory:!0,sales:!0,production:!0,reports:!0,voice:!0,actions:!0,compound:!0,ai_integration:!0},this.config={confirmationRequired:["delete","update_price","create_product","add_stock"],maxRetries:3,responseTimeout:15e3,autoExecute:!1,cacheEnabled:!0,cacheMaxAge:36e5,cacheMaxSize:200,smartSuggestions:!0},this.commandCache=new Map,this.responseCache=new Map,this.productCache=new Map,this.lastCacheClean=Date.now(),this.conversationContext={lastCommand:null,pendingActions:[],userPreferences:this.loadUserPreferences(),sessionHistory:[],businessMetrics:{}},this.initializeCommandPatterns(),this.initializeAISynonyms()}initializeCommandPatterns(){this.commandPatterns={inventory:{add_stock:[/(?:agregar|a√±adir|suma|sumar|incrementar|aumentar|meter|poner|cargar)\s+(\d+)\s*(?:kg|kilos|kilogramos|unidades|litros|gramos|g|l|u)?\s+(?:de\s+|del\s+)?(.+)/i,/(?:incrementar|aumentar|subir)\s+(?:el\s+)?stock\s+(?:de\s+|del\s+)?(.+)\s+(?:en\s+|por\s+)?(\d+)/i,/(\d+)\s*(?:kg|kilos|unidades|litros|gramos|g)?\s+(?:m√°s\s+)?(?:de\s+|del\s+)?(.+)\s+(?:al\s+stock|inventario)/i,/reponer\s+(\d+)\s*(?:kg|unidades|litros)?\s+(?:de\s+|del\s+)?(.+)/i,/(?:tengo|lleg√≥|llegaron|recibi|recib√≠)\s+(\d+)\s*(?:kg|kilos|unidades)?\s+(?:de\s+|del\s+)?(.+)/i,/(?:stock|inventario)\s+(.+)\s+(?:\+|mas|m√°s)\s+(\d+)/i],check_stock:[/¬ø?(?:cu√°nto|cuanto|cu√°ntos|cuantos)\s+(.+)\s+(?:queda|quedan|tengo|tenemos|hay|disponible|me queda)/i,/(?:stock|inventario|cantidad|existencia)\s+(?:actual\s+)?(?:de\s+|del\s+)?(.+)/i,/¬ø?(?:qu√©|que)\s+(?:cantidad|stock)\s+(?:tengo|tenemos)\s+(?:de\s+|del\s+)?(.+)/i,/verificar\s+(?:stock\s+(?:de\s+|del\s+)?)?(.+)/i,/consultar\s+(?:inventario\s+(?:de\s+|del\s+)?)?(.+)/i,/¬ø?(?:hay|tenemos|queda)\s+(.+)\s*\?/i,/(?:dame|dime|decime)\s+(?:el\s+)?stock\s+(?:de\s+|del\s+)?(.+)/i],low_stock:[/(?:productos|stock|inventario)\s+(?:con\s+)?(?:poco|bajo|cr√≠tico|m√≠nimo)\s+(?:stock)?/i,/(?:mostrar|ver|listar)\s+(?:alertas|stock\s+bajo|productos\s+cr√≠ticos)/i,/¬ø?(?:qu√©|que)\s+(?:necesito|debo)\s+(?:reponer|comprar|reabastecer)/i,/alerta\s+(?:de\s+)?stock/i,/productos\s+agot√°ndose/i],create_product:[/(?:crear|agregar|a√±adir|nuevo)\s+(?:helado|sabor|producto)\s+(?:de\s+)?(.+?)\s+(?:a\s+|por\s+)?\$(\d+)/i,/(?:nuevo|nueva)\s+(?:producto|helado|sabor)\s+(.+?)\s+(?:precio\s+)?\$(\d+)/i,/(?:helado|producto|sabor)\s+(?:de\s+)?(.+?)\s+(?:por\s+|a\s+|cuesta\s+)?\$(\d+)/i,/lanzar\s+(?:nuevo\s+)?sabor\s+(.+?)\s+(?:a\s+)?\$(\d+)/i],update_price:[/(?:cambiar|actualizar|modificar|subir|bajar)\s+(?:el\s+)?precio\s+(?:de\s+|del\s+)?(.+?)\s+(?:a\s+)?\$(\d+)/i,/(?:precio|costo)\s+(?:de\s+|del\s+)?(.+?)\s+(?:ahora\s+|nuevo\s+|ser√°\s+)?\$(\d+)/i,/(.+?)\s+(?:ahora\s+(?:cuesta|vale|precio)|nuevo\s+precio)\s+\$(\d+)/i,/ajustar\s+precio\s+(.+?)\s+(?:a\s+)?\$(\d+)/i],bulk_operations:[/(?:actualizar|modificar)\s+(?:todos\s+los\s+)?precios/i,/operaci√≥n\s+masiva/i,/(?:subir|bajar)\s+(?:todos\s+los\s+)?precios\s+(?:en\s+)?(\d+)%/i],expiry_check:[/¬ø?(?:qu√©|cuales)\s+(?:productos\s+)?(?:vencen|expiran)\s+(?:hoy|ma√±ana|esta\s+semana)/i,/(?:revisar|verificar)\s+(?:fechas\s+de\s+)?(?:vencimiento|expiraci√≥n)/i,/productos\s+(?:por\s+)?vencer/i]},sales:{daily_sales:[/¬ø?(?:cu√°nto|cuanto)\s+(?:vendimos|vend√≠|hemos\s+vendido)\s+(?:hoy|el\s+d√≠a|este\s+d√≠a)/i,/(?:ventas|ingresos|facturaci√≥n)\s+(?:de\s+)?(?:hoy|del\s+d√≠a|diarias)/i,/¬ø?(?:c√≥mo|como)\s+(?:van|est√°n|marchan)\s+las\s+ventas\s+(?:hoy)?/i,/balance\s+(?:del\s+)?d√≠a/i,/resumen\s+(?:de\s+)?ventas\s+(?:de\s+)?hoy/i],best_sellers:[/¬ø?(?:cu√°l|cual)\s+es\s+el\s+(?:helado|producto|sabor)\s+m√°s\s+(?:vendido|popular)/i,/(?:productos|sabores|helados)\s+m√°s\s+(?:vendidos|populares|exitosos)/i,/(?:ranking|top|mejores)\s+(?:\d+\s+)?(?:de\s+)?(?:ventas|productos|sabores)/i,/(?:helados|sabores)\s+estrella/i,/¬ø?(?:qu√©|que)\s+se\s+vende\s+m√°s/i],weekly_sales:[/(?:ventas|reporte|resumen)\s+(?:de\s+la\s+|semanal|esta\s+)?semana/i,/¬ø?(?:c√≥mo|como)\s+(?:fue|estuvo|result√≥)\s+la\s+semana/i,/(?:ingresos|facturaci√≥n)\s+semanal/i,/√∫ltimos\s+7\s+d√≠as/i],monthly_sales:[/(?:ventas|reporte|resumen)\s+(?:del\s+|mensual|este\s+)?mes/i,/¬ø?(?:c√≥mo|como)\s+(?:va|est√°)\s+el\s+mes/i,/(?:ingresos|facturaci√≥n)\s+mensual/i,/performance\s+mensual/i],register_sale:[/(?:registrar|anotar|apuntar)\s+venta\s+(?:de\s+)?(\d+)\s+(.+)/i,/(?:vender|vend√≠|venta\s+de)\s+(\d+)\s+(.+)/i,/(\d+)\s+(.+)\s+(?:vendidos|vendidas|unidades)/i,/transacci√≥n\s+(\d+)\s+(.+)/i],sales_trends:[/(?:tendencia|tendencias|patrones)\s+(?:de\s+)?ventas/i,/¬ø?(?:c√≥mo|como)\s+(?:evolucionan|cambian)\s+las\s+ventas/i,/an√°lisis\s+(?:de\s+)?tendencias/i,/comportamiento\s+(?:de\s+)?ventas/i],compare_periods:[/comparar\s+(?:ventas\s+)?(?:con\s+)?(?:ayer|semana\s+pasada|mes\s+pasado)/i,/(?:ventas\s+)?vs\s+(?:ayer|semana\s+pasada|mes\s+pasado)/i,/diferencia\s+con\s+(?:per√≠odo\s+anterior)/i]},production:{make_batch:[/(?:hacer|producir|preparar)\s+(\d+)\s+(?:helados?\s+(?:de\s+)?)?(.+)/i,/(?:producci√≥n|lote)\s+(?:de\s+)?(\d+)\s+(.+)/i,/(\d+)\s+(.+)\s+(?:para\s+(?:hacer|producir))/i],available_recipes:[/¬ø?(?:qu√©|que)\s+(?:recetas|sabores)\s+(?:podemos|puedo)\s+hacer/i,/(?:recetas|sabores)\s+disponibles/i,/¬ø?(?:qu√©|que)\s+(?:puedo|podemos)\s+(?:producir|hacer)/i],recipe_cost:[/(?:calcular|mostrar)\s+(?:costo|precio)\s+(?:de\s+(?:la\s+)?receta\s+(?:de\s+)?)?(.+)/i,/¬ø?(?:cu√°nto|cuanto)\s+cuesta\s+hacer\s+(.+)/i,/(?:costo|gasto)\s+(?:de\s+)?(?:producir|hacer)\s+(.+)/i]},emergency:{critical_stock:[/(?:alerta|emergencia|urgente)\s+(?:de\s+)?stock/i,/productos\s+(?:cr√≠ticos|agotados|sin\s+stock)/i,/(?:estado\s+)?cr√≠tico\s+(?:del\s+)?inventario/i,/¬ø?(?:qu√©|que)\s+se\s+est√°\s+agotando/i],business_emergency:[/(?:alerta|emergencia)\s+(?:del\s+)?negocio/i,/(?:problema|crisis)\s+operacional/i,/estado\s+cr√≠tico\s+(?:del\s+)?sistema/i],urgent_restock:[/(?:reabastecer|reponer)\s+urgente/i,/compra\s+de\s+emergencia/i,/pedido\s+urgente/i]},analytics:{business_health:[/salud\s+(?:del\s+)?negocio/i,/¬ø?(?:c√≥mo|como)\s+(?:est√°|va)\s+(?:el\s+negocio|todo)/i,/estado\s+general/i,/diagn√≥stico\s+empresarial/i],profit_analysis:[/(?:an√°lisis\s+de\s+)?(?:rentabilidad|ganancias|margen)/i,/productos\s+m√°s\s+rentables/i,/¬ø?(?:cu√°les|cuales)\s+(?:dan|generan)\s+m√°s\s+ganancia/i,/margen\s+(?:de\s+)?(?:ganancia|utilidad)/i],performance_metrics:[/(?:m√©tricas|indicadores)\s+(?:de\s+)?(?:rendimiento|performance)/i,/KPI\s+(?:del\s+)?negocio/i,/indicadores\s+clave/i],forecast:[/(?:proyecci√≥n|pron√≥stico|predicci√≥n)\s+(?:de\s+)?ventas/i,/¬ø?(?:c√≥mo|como)\s+(?:ser√°|estar√°)\s+(?:la\s+)?(?:semana|mes)/i,/tendencias\s+futuras/i,/predicci√≥n\s+(?:de\s+)?demanda/i]},compound:{stock_and_price:[/agregar\s+(\d+)\s*(?:kg|unidades)?\s+(?:de\s+)?(.+)\s+y\s+(?:cambiar|actualizar)\s+(?:el\s+)?precio\s+a\s+\$(\d+)/i,/(?:stock|inventario)\s+(.+)\s+\+(\d+)\s+y\s+precio\s+\$(\d+)/i,/actualizar\s+(.+):\s*(\d+)\s+(?:unidades|kg)\s+y\s+\$(\d+)/i],create_and_stock:[/crear\s+(?:sabor\s+)?(.+)\s+\$(\d+)\s+con\s+(\d+)\s+(?:unidades|kg)/i,/nuevo\s+(?:helado\s+)?(.+)\s+a\s+\$(\d+)\s+y\s+agregar\s+(\d+)/i,/agregar\s+producto\s+(.+)\s+\$(\d+)\s+stock\s+inicial\s+(\d+)/i],multiple_operations:[/hacer\s+todo:\s*(.+)/i,/ejecutar\s+comandos:\s*(.+)/i,/operaciones\s+m√∫ltiples:\s*(.+)/i],batch_update:[/actualizar\s+varios\s+productos/i,/cambios\s+masivos/i,/operaci√≥n\s+en\s+lote/i]},general:{help:[/(?:ayuda|help|auxilio|comandos|qu√© puedo hacer|qu√© podes hacer)/i,/¬ø?(?:qu√©|que)\s+(?:puedes|podes|pod√©s)\s+hacer/i,/(?:comandos|funciones|opciones)\s+disponibles/i,/manual\s+(?:de\s+)?usuario/i,/gu√≠a\s+(?:de\s+)?uso/i,/¬ø?(?:c√≥mo|como)\s+(?:te\s+)?uso/i,/explicame\s+(?:los\s+)?comandos/i],status:[/(?:estado|status|informaci√≥n)\s+(?:del\s+)?(?:sistema|negocio)/i,/¬ø?(?:c√≥mo|como)\s+(?:est√°|va)\s+(?:todo|el\s+negocio)/i,/(?:resumen|dashboard|panel)\s+(?:ejecutivo|general)?/i,/reporte\s+(?:diario|general|ejecutivo)/i],configuration:[/(?:configurar|configuraci√≥n)\s+(?:del\s+)?(?:bot|sistema)/i,/ajustes\s+(?:del\s+)?SuperBot/i,/personalizar\s+(?:comandos|respuestas)/i],learning:[/aprender\s+(?:nuevo\s+)?comando/i,/ense√±ar\s+(?:al\s+)?bot/i,/personalizaci√≥n\s+inteligente/i,/adaptar\s+(?:respuestas|comportamiento)/i]}}}initializeAISynonyms(){this.synonyms={products:{chocolate:["choco","chocolat","choclo"],vainilla:["vanilla","vani","vanila"],fresa:["frutilla","strawberry","fresas"],"dulce de leche":["ddl","dulce leche","dulcedeleche"],menta:["mint","menta granizada","menta chip"],"lim√≥n":["limon","lemon","lima lim√≥n"],banana:["pl√°tano","platano","banano"]},units:{kg:["kilos","kilogramos","k"],unidades:["u","un","unidad","piezas"],litros:["l","lts","litro"],gramos:["g","gr","gramo"]},actions:{agregar:["a√±adir","sumar","meter","poner","cargar","incrementar"],quitar:["sacar","restar","eliminar","reducir","bajar"],crear:["hacer","generar","producir","fabricar"],cambiar:["modificar","actualizar","editar","ajustar"],ver:["mostrar","listar","consultar","chequear","revisar"]}}}async processCommand(e,s={}){console.log(`ü§ñ SuperBot procesando: "${e}"`);try{const a=this.cleanMessage(e),n=await this.detectIntent(a);return n?this.requiresConfirmation(n)?await this.requestConfirmation(n,s):await this.executeCommand(n,s):this.generateHelpResponse(a)}catch(e){return console.error("‚ùå Error procesando comando:",e),{success:!1,message:"‚ùå **Error procesando comando**\n\nOcurri√≥ un error inesperado. Por favor intenta de nuevo.",suggestions:["Probar comando m√°s simple","Ver ayuda","Contactar soporte"]}}}cleanMessage(e){return e.toLowerCase().trim().replace(/[.,!?¬ø¬°]/g," ").replace(/\s+/g," ")}async detectIntent(e){for(const[s,a]of Object.entries(this.commandPatterns))for(const[n,t]of Object.entries(a))for(const a of t){const t=e.match(a);if(t)return{category:s,command:n,parameters:this.extractParameters(t,n),confidence:this.calculateConfidence(t,a),originalMatch:t}}return null}extractParameters(e,s){const a={};switch(s){case"add_stock":a.quantity=parseInt(e[1])||parseInt(e[2]),a.product=(e[2]||e[1]).trim(),a.unit=this.detectUnit(e[0]);break;case"check_stock":case"recipe_cost":a.product=e[1].trim();break;case"create_product":a.name=e[1].trim(),a.price=parseInt(e[2]);break;case"update_price":a.product=e[1].trim(),a.price=parseInt(e[2]);break;case"register_sale":case"make_batch":a.quantity=parseInt(e[1]),a.product=e[2].trim();break;default:for(let s=1;s<e.length;s++)a[`param${s}`]=e[s]}return a}detectUnit(e){return e.includes("kg")?"kg":e.includes("litros")||e.includes("l ")?"litros":(e.includes("unidades"),"unidades")}calculateConfidence(e,s){const a=e[0].length,n=e.input.length;return Math.min(.9,a/n*1.2)}requiresConfirmation(e){return this.config.confirmationRequired.includes(e.command)&&!this.config.autoExecute}async executeCommand(e,s){const{category:a,command:n,parameters:t}=e;console.log(`üéØ Ejecutando: ${a}.${n}`,t);try{switch(a){case"inventory":return await this.executeInventoryCommand(n,t,s);case"sales":return await this.executeSalesCommand(n,t,s);case"production":return await this.executeProductionCommand(n,t,s);case"emergency":return await this.executeEmergencyCommand(n,t,s);case"analytics":return await this.executeAnalyticsCommand(n,t,s);case"compound":return await this.executeCompoundCommand(n,t,s);case"general":return await this.executeGeneralCommand(n,t,s);default:return this.generateErrorResponse(`Categor√≠a desconocida: ${a}`)}}catch(e){return console.error(`‚ùå Error ejecutando ${a}.${n}:`,e),this.generateErrorResponse(e.message)}}async executeInventoryCommand(e,s,a){switch(e){case"add_stock":return await this.addStock(s,a);case"check_stock":return await this.checkStock(s,a);case"low_stock":return await this.getLowStock(a);case"create_product":return await this.createProduct(s,a);case"update_price":return await this.updatePrice(s,a);default:return this.generateErrorResponse(`Comando de inventario desconocido: ${e}`)}}async addStock(e,s){try{const a=await this.findProductByName(e.product);if(!a)return{success:!1,message:`‚ùå **Producto no encontrado**\n\nNo encontr√© un producto llamado "${e.product}".\n\n¬øQuieres crearlo?`,suggestions:[`Crear helado ${e.product} $4500`,"Ver todos los productos","Buscar productos similares"],needsAction:"create_product_suggestion"};if(s.executeAction){const n=await s.executeAction("add_stock",{productId:a.id,quantity:e.quantity,unit:e.unit});return n.success?{success:!0,message:`‚úÖ **Stock actualizado correctamente**\n\nüì¶ **${a.name}**\n‚Ä¢ Agregado: ${e.quantity} ${e.unit}\n‚Ä¢ Stock anterior: ${a.current_stock||0}\n‚Ä¢ Stock actual: ${(a.current_stock||0)+e.quantity}\n\nüéØ **Acci√≥n completada autom√°ticamente**`,actionExecuted:!0,data:{product:a.name,added:e.quantity,unit:e.unit,newStock:(a.current_stock||0)+e.quantity}}:{success:!1,message:`‚ùå **Error actualizando stock**\n\n${n.message}`,suggestions:["Intentar de nuevo","Verificar producto","Ver inventario"]}}return{success:!0,message:`üì¶ **Instrucciones para agregar stock**\n\n**Producto:** ${a.name}\n**Cantidad:** ${e.quantity} ${e.unit}\n\n**Pasos a seguir:**\n1. Ve a Inventario ‚Üí Productos\n2. Busca "${a.name}"\n3. Haz clic en "Editar"\n4. Suma ${e.quantity} al stock actual\n5. Guarda los cambios`,suggestions:["Ir a inventario","Ver producto","Cancelar"]}}catch(e){return this.generateErrorResponse(`Error agregando stock: ${e.message}`)}}async checkStock(e,s){try{const s=await this.findProductByName(e.product);if(!s)return{success:!1,message:`‚ùå **Producto no encontrado**\n\nNo encontr√© "${e.product}" en el inventario.\n\n¬øTe refieres a alguno de estos?`,suggestions:await this.getSimilarProducts(e.product)};const a=s.current_stock||0,n=a<=(s.minimum_stock||10);return{success:!0,message:`üì¶ **Stock actual de ${s.name}**\n\n‚Ä¢ **Cantidad:** ${a} unidades ${n?"‚ö†Ô∏è **BAJO**":"‚úÖ"}\n‚Ä¢ **Precio:** $${s.price}\n‚Ä¢ **Estado:** ${s.active?"Activo":"Inactivo"}\n${n?`\nüö® **Stock bajo** - M√≠nimo recomendado: ${s.minimum_stock||10}`:""}`,data:{product:s.name,stock:a,isLow:n,price:s.price},suggestions:n?[`Agregar stock de ${s.name}`,"Ver proveedores","Programar pedido"]:["Ver otros productos","Actualizar precio","Ver ventas"]}}catch(e){return this.generateErrorResponse(`Error consultando stock: ${e.message}`)}}async getLowStock(e){try{const s=e.businessData;return s?.analytics?.lowStockProducts?.length>0?{success:!0,message:`‚ö†Ô∏è **Productos con stock bajo**\n\n${s.analytics.lowStockProducts.map((e=>`‚Ä¢ **${e.name}**: ${e.stock} unidades (necesitas ${e.needed} m√°s)`)).join("\n")}\n\nüìã **Total de productos en alerta:** ${s.analytics.lowStockProducts.length}`,data:s.analytics.lowStockProducts,suggestions:["Generar pedido autom√°tico","Ver proveedores","Programar reposici√≥n"]}:{success:!0,message:"‚úÖ **¬°Excelente!**\n\nTodos tus productos tienen stock suficiente.\n\nüì¶ No hay alertas de stock bajo en este momento.",suggestions:["Ver inventario completo","Agregar nuevo producto","Ver ventas del d√≠a"]}}catch(e){return this.generateErrorResponse(`Error consultando stock bajo: ${e.message}`)}}async createProduct(e,s){try{if(s.executeAction){const a=await s.executeAction("create_product",{name:`Helado ${e.name.charAt(0).toUpperCase()+e.name.slice(1)}`,price:e.price,category:"Helado",context:"general",initialStock:0});return a.success?{success:!0,message:`‚úÖ **¬°Nuevo producto creado!**\n\nüç¶ **Helado ${e.name}**\n‚Ä¢ Precio: $${e.price}\n‚Ä¢ Stock inicial: 0 unidades\n‚Ä¢ Estado: Activo\n\nüéØ **Producto agregado al cat√°logo**`,actionExecuted:!0,data:{name:e.name,price:e.price},suggestions:[`Agregar stock a ${e.name}`,"Ver todos los productos","Configurar receta"]}:{success:!1,message:`‚ùå **Error creando producto**\n\n${a.message}`,suggestions:["Intentar con otro nombre","Ver productos existentes","Contactar soporte"]}}return{success:!0,message:`üç¶ **Instrucciones para crear producto**\n\n**Nuevo helado:** ${e.name}\n**Precio:** $${e.price}\n\n**Pasos:**\n1. Ve a Productos ‚Üí "+ Nuevo Producto"\n2. Nombre: "Helado ${e.name}"\n3. Precio: ${e.price}\n4. Categor√≠a: Helado\n5. Guarda el producto`,suggestions:["Ir a productos","Cancelar","Ver cat√°logo actual"]}}catch(e){return this.generateErrorResponse(`Error creando producto: ${e.message}`)}}async updatePrice(e,s){try{const a=await this.findProductByName(e.product);if(!a)return{success:!1,message:`‚ùå **Producto no encontrado**\n\nNo encontr√© "${e.product}" para cambiar el precio.`,suggestions:await this.getSimilarProducts(e.product)};if(s.executeAction){const n=await s.executeAction("update_price",{productId:a.id,newPrice:e.price});return n.success?{success:!0,message:`‚úÖ **Precio actualizado**\n\nüç¶ **${a.name}**\n‚Ä¢ Precio anterior: $${a.price}\n‚Ä¢ Precio nuevo: $${e.price}\n‚Ä¢ Diferencia: $${e.price-a.price} (${e.price>a.price?"+":""}${((e.price-a.price)/a.price*100).toFixed(1)}%)\n\nüí∞ **Cambio aplicado autom√°ticamente**`,actionExecuted:!0,data:{product:a.name,oldPrice:a.price,newPrice:e.price,difference:e.price-a.price}}:{success:!1,message:`‚ùå **Error actualizando precio**\n\n${n.message}`,suggestions:["Intentar de nuevo","Verificar producto","Ver precios actuales"]}}return{success:!0,message:`üí∞ **Instrucciones para cambiar precio**\n\n**Producto:** ${a.name}\n**Precio actual:** $${a.price}\n**Precio nuevo:** $${e.price}\n\n**Pasos:**\n1. Ve a Productos\n2. Busca "${a.name}"\n3. Haz clic en "Editar"\n4. Cambia precio a ${e.price}\n5. Guarda cambios`,suggestions:["Ir a productos","Ver otros precios","Cancelar"]}}catch(e){return this.generateErrorResponse(`Error actualizando precio: ${e.message}`)}}async executeSalesCommand(e,s,a){const n=a.businessData;switch(e){case"daily_sales":const a=n?.sales?.today?.total||0,t=n?.sales?.today?.transactions||0,o=t>0?(a/t).toFixed(0):0;return{success:!0,message:`üìà **Ventas de hoy**\n\nüí∞ **Total:** $${a.toLocaleString()}\nüõí **Transacciones:** ${t}\nüéØ **Ticket promedio:** $${o}\n\n${a>0?"‚úÖ ¬°Buen trabajo!":"üìä A√∫n no hay ventas registradas hoy"}`,data:{todaySales:a,transactions:t,avgTicket:o},suggestions:["Ver productos m√°s vendidos","Comparar con ayer","Ver detalles de ventas"]};case"best_sellers":return{success:!0,message:'üèÜ **Productos m√°s vendidos**\n\nüìä Para ver el ranking completo:\n1. Ve a Reportes ‚Üí Productos\n2. Selecciona "M√°s vendidos"\n3. Elige el per√≠odo (hoy/semana/mes)\n\nüí° **Tip:** Los datos se actualizan en tiempo real',suggestions:["Ver reporte completo","Analizar tendencias","Optimizar stock"]};case"weekly_sales":return{success:!0,message:'üìä **Reporte semanal**\n\nüìà Para ver las ventas de la semana:\n1. Ve a Reportes ‚Üí Ventas\n2. Selecciona "√öltimos 7 d√≠as"\n3. Analiza gr√°ficos y m√©tricas\n\nüéØ **Incluye:** Ingresos, productos, clientes, tendencias',suggestions:["Ver reporte detallado","Comparar semanas","Exportar datos"]};case"register_sale":return{success:!0,message:`üõí **Registrar venta**\n\n**Cantidad:** ${s.quantity}\n**Producto:** ${s.product}\n\nüìã **Para registrar:**\n1. Ve a POS/Ventas\n2. Busca "${s.product}"\n3. Selecciona cantidad: ${s.quantity}\n4. Completa la venta`,suggestions:["Ir a POS","Ver productos","Registrar cliente"]};default:return this.generateErrorResponse(`Comando de ventas desconocido: ${e}`)}}async executeProductionCommand(e,s,a){switch(e){case"make_batch":return{success:!0,message:`üè≠ **Orden de producci√≥n**\n\n**Producto:** ${s.product}\n**Cantidad:** ${s.quantity} unidades\n\nüìã **Pr√≥ximos pasos:**\n1. Verificar ingredientes disponibles\n2. Preparar receta para ${s.quantity} unidades\n3. Iniciar producci√≥n\n4. Actualizar stock al completar`,suggestions:["Verificar ingredientes","Ver receta","Programar producci√≥n"]};case"available_recipes":return{success:!0,message:'üë®‚Äçüç≥ **Recetas disponibles**\n\nüìö Para ver recetas que puedes hacer:\n1. Ve a Producci√≥n ‚Üí Recetas\n2. Filtra por "Ingredientes disponibles"\n3. Selecciona la receta deseada\n\n‚úÖ Solo se muestran recetas con stock suficiente',suggestions:["Ver todas las recetas","Crear nueva receta","Verificar ingredientes"]};case"recipe_cost":return{success:!0,message:`üí∞ **C√°lculo de costos**\n\n**Producto:** ${s.product}\n\nüìä **Para calcular costo:**\n1. Ve a Producci√≥n ‚Üí An√°lisis de costos\n2. Selecciona "${s.product}"\n3. Ve desglose de ingredientes\n4. Incluye mano de obra y gastos\n\nüí° **Incluye:** Ingredientes, energ√≠a, tiempo, packaging`,suggestions:["Ver an√°lisis completo","Optimizar receta","Comparar costos"]};default:return this.generateErrorResponse(`Comando de producci√≥n desconocido: ${e}`)}}async executeEmergencyCommand(e,s,a){const n=a.businessData;switch(e){case"critical_stock":const s=n?.analytics?.lowStockProducts?.filter((e=>0===e.stock||e.stock<=2))||[];return s.length>0?{success:!0,message:`üö® **ALERTA CR√çTICA - STOCK AGOTADO**\n\n${s.map((e=>`‚Ä¢ **${e.name}**: ${e.stock} unidades ‚ö†Ô∏è CR√çTICO`)).join("\n")}\n\nüìã **Total productos cr√≠ticos:** ${s.length}\n\nüöÄ **ACCI√ìN INMEDIATA REQUERIDA**`,data:s,suggestions:["Generar orden de compra urgente","Contactar proveedores","Desactivar productos agotados"],urgency:"critical"}:{success:!0,message:"‚úÖ **Sin alertas cr√≠ticas**\n\nNo hay productos en estado cr√≠tico en este momento.\n\nüì¶ Stock bajo disponible para revisi√≥n.",suggestions:["Ver stock bajo general","Configurar alertas preventivas","Revisar proyecciones"]};case"business_emergency":const a=this.analyzeBusinessEmergency(n);return{success:!0,message:`üö® **DIAGN√ìSTICO DE EMERGENCIA EMPRESARIAL**\n\n${a.message}`,data:a.data,suggestions:a.suggestions,urgency:a.urgency};case"urgent_restock":return{success:!0,message:"‚ö° **PEDIDO DE EMERGENCIA**\n\nüìã **Para generar pedido urgente:**\n1. Revisar productos cr√≠ticos\n2. Contactar proveedores prioritarios\n3. Coordinar entrega express\n4. Actualizar sistema al recibir\n\nüî• **Productos prioritarios detectados autom√°ticamente**",suggestions:["Ver lista de proveedores","Generar pedido autom√°tico","Programar entrega urgente"]};default:return this.generateErrorResponse(`Comando de emergencia desconocido: ${e}`)}}async executeAnalyticsCommand(e,s,a){const n=a.businessData;switch(e){case"business_health":const s=this.calculateBusinessHealth(n);return{success:!0,message:`üè• **SALUD EMPRESARIAL**\n\nüìä **Puntuaci√≥n:** ${s.score}/100\nüìà **Estado:** ${s.status}\n\n**Indicadores clave:**\n${s.indicators.map((e=>`‚Ä¢ ${e.name}: ${e.value} ${e.status}`)).join("\n")}\n\nüí° **Recomendaciones:**\n${s.recommendations.map((e=>`‚Ä¢ ${e}`)).join("\n")}`,data:s,suggestions:["Ver an√°lisis detallado","Generar plan de mejora","Configurar monitoreo"]};case"profit_analysis":return{success:!0,message:'üí∞ **AN√ÅLISIS DE RENTABILIDAD**\n\nüìä **Para an√°lisis completo de rentabilidad:**\n1. Ve a Reportes ‚Üí An√°lisis Financiero\n2. Selecciona "Rentabilidad por Producto"\n3. Configura per√≠odo de an√°lisis\n4. Exporta datos para decisiones\n\nüéØ **Incluye:** M√°rgenes, costos, ROI, productos estrella',suggestions:["Ver margen por producto","Analizar costos","Optimizar precios"]};case"performance_metrics":const a=this.calculateKPIs(n);return{success:!0,message:`üìà **INDICADORES CLAVE DE RENDIMIENTO**\n\n${a.map((e=>`üìä **${e.name}:** ${e.value} ${e.trend}`)).join("\n")}\n\n‚è∞ **Actualizado:** ${(new Date).toLocaleString("es-CO")}`,data:a,suggestions:["An√°lisis hist√≥rico","Comparar per√≠odos","Configurar alertas"]};case"forecast":return{success:!0,message:"üîÆ **PROYECCI√ìN DE VENTAS**\n\nüìä **Basado en datos hist√≥ricos:**\n‚Ä¢ Tendencia actual detectada\n‚Ä¢ Patrones estacionales considerados\n‚Ä¢ Factores externos evaluados\n\nüìà **Para proyecci√≥n detallada:**\nVe a Reportes ‚Üí An√°lisis Predictivo",suggestions:["Ver proyecci√≥n detallada","Ajustar inventario","Planificar producci√≥n"]};default:return this.generateErrorResponse(`Comando de an√°lisis desconocido: ${e}`)}}async executeCompoundCommand(e,s,a){switch(e){case"stock_and_price":return await this.executeStockAndPrice(s,a);case"create_and_stock":return await this.executeCreateAndStock(s,a);case"multiple_operations":return await this.executeMultipleOperations(s,a);case"batch_update":return await this.executeBatchUpdate(s,a);default:return this.generateErrorResponse(`Comando compuesto desconocido: ${e}`)}}async executeStockAndPrice(e,s){try{let a,n,t;if(!(e.param1&&e.param2&&e.param3))return this.generateErrorResponse("Formato incorrecto para operaci√≥n compuesta");a=parseInt(e.param1),n=e.param2,t=parseInt(e.param3);const o=await this.findProductByName(n);if(!o)return{success:!1,message:`‚ùå Producto "${n}" no encontrado para operaci√≥n compuesta`,suggestions:[`Crear producto ${n}`,"Ver productos disponibles"]};const r=[];if(s.executeAction){const e=await s.executeAction("add_stock",{productId:o.id,quantity:a,unit:"unidades"});r.push(e)}if(s.executeAction){const e=await s.executeAction("update_price",{productId:o.id,newPrice:t});r.push(e)}return r.every((e=>e.success))?{success:!0,message:`‚úÖ **Operaci√≥n compuesta completada**\n\nüç¶ **${o.name}**\nüì¶ Stock: +${a} unidades\nüí∞ Nuevo precio: $${t}\n\nüéØ **Ambas acciones ejecutadas correctamente**`,actionExecuted:!0,data:{product:o.name,stockAdded:a,newPrice:t}}:{success:!1,message:"‚ùå Error en operaci√≥n compuesta. Algunas acciones fallaron.",details:r}}catch(e){return this.generateErrorResponse(`Error en operaci√≥n compuesta: ${e.message}`)}}async executeCreateAndStock(e,s){try{const a=e.param1,n=parseInt(e.param2),t=parseInt(e.param3);if(s.executeAction){const e=await s.executeAction("create_product",{name:`Helado ${a.charAt(0).toUpperCase()+a.slice(1)}`,price:n,category:"Helado",context:"general",initialStock:t});return e.success?{success:!0,message:`‚úÖ **Producto creado con stock inicial**\n\nüç¶ **Helado ${a}**\nüí∞ Precio: $${n}\nüì¶ Stock inicial: ${t} unidades\n\nüéØ **Producto listo para vender**`,actionExecuted:!0,data:{name:a,price:n,initialStock:t}}:e}return this.generateErrorResponse("No se puede ejecutar la acci√≥n de crear producto con stock")}catch(e){return this.generateErrorResponse(`Error creando producto con stock: ${e.message}`)}}async executeMultipleOperations(e,s){return{success:!0,message:"üîÑ **Operaciones m√∫ltiples detectadas**\n\nüìã Esta funci√≥n est√° en desarrollo.\n\nüí° Por ahora, ejecuta los comandos uno por uno.",suggestions:["Ejecutar comandos individuales","Ver ayuda de comandos"]}}async executeBatchUpdate(e,s){return{success:!0,message:'üì¶ **Actualizaci√≥n masiva**\n\nüõ†Ô∏è Para realizar actualizaciones masivas:\n1. Ve a Productos ‚Üí Herramientas\n2. Selecciona "Actualizaci√≥n masiva"\n3. Elige los productos y cambios\n4. Confirma la operaci√≥n\n\n‚ö° Pr√≥ximamente: Actualizaciones masivas por comando',suggestions:["Ir a productos","Ver herramientas","Actualizar individual"]}}async executeGeneralCommand(e,s,a){const n=a.businessData;switch(e){case"help":return this.generateAdvancedHelpResponse();case"status":const s=n?.sales?.today?.total||0,a=n?.inventory?.totalProducts||0,t=n?.analytics?.lowStockCount||0,o=this.calculateBusinessHealth(n);return{success:!0,message:`üìä **REPORTE EJECUTIVO**\n\nüí∞ **Ventas hoy:** $${s.toLocaleString()}\nüì¶ **Productos activos:** ${a}\n‚ö†Ô∏è **Alertas de stock:** ${t}\nüè• **Salud empresarial:** ${o.score}/100\n\n${this.getStatusEmoji(o.score)} **Estado:** ${o.status}`,data:{ventas:s,productos:a,stockBajo:t,healthScore:o},suggestions:["Dashboard completo","Resolver alertas","An√°lisis detallado"]};case"configuration":return{success:!0,message:`‚öôÔ∏è **CONFIGURACI√ìN SUPERBOT**\n\nüéØ **Opciones disponibles:**\n‚Ä¢ Ejecuci√≥n autom√°tica: ${this.config.autoExecute?"Activada":"Desactivada"}\n‚Ä¢ Confirmaci√≥n requerida: ${this.config.confirmationRequired.length} comandos\n‚Ä¢ Tiempo de respuesta: ${this.config.responseTimeout}ms\n\nüîß **Para personalizar:** Contacta al administrador`,suggestions:["Activar auto-ejecuci√≥n","Configurar alertas","Personalizar comandos"]};case"learning":return{success:!0,message:"üß† **SISTEMA DE APRENDIZAJE**\n\nüìö **Capacidades actuales:**\n‚Ä¢ Reconocimiento de patrones de lenguaje\n‚Ä¢ Adaptaci√≥n a preferencias del usuario\n‚Ä¢ Mejora continua de respuestas\n\nüéØ **En desarrollo:**\n‚Ä¢ Comandos personalizados\n‚Ä¢ Respuestas adaptativas\n‚Ä¢ Integraci√≥n con preferencias",suggestions:["Ver estad√≠sticas de uso","Entrenar nuevo comando","Feedback del sistema"]};default:return this.generateErrorResponse(`Comando general desconocido: ${e}`)}}async requestConfirmation(e,s){const{command:a,parameters:n}=e;let t="",o="";switch(a){case"add_stock":o=`Agregar ${n.quantity} ${n.unit} de "${n.product}"`,t=`‚ö†Ô∏è **Confirmar acci√≥n**\n\nüéØ **Acci√≥n:** ${o}\n\n¬øEst√°s seguro de que quieres realizar esta acci√≥n?\n\n‚ö° **Tip:** Puedes activar ejecuci√≥n autom√°tica en configuraci√≥n`;break;case"create_product":o=`Crear producto "${n.name}" a $${n.price}`,t=`‚ö†Ô∏è **Confirmar creaci√≥n**\n\nüéØ **Nuevo producto:** ${n.name}\nüí∞ **Precio:** $${n.price}\n\n¬øProceder con la creaci√≥n?`;break;case"update_price":o=`Cambiar precio de "${n.product}" a $${n.price}`,t=`‚ö†Ô∏è **Confirmar cambio de precio**\n\nüéØ **Producto:** ${n.product}\nüí∞ **Nuevo precio:** $${n.price}\n\n¬øAplicar el cambio?`;break;default:o=`Ejecutar ${a}`,t=`‚ö†Ô∏è **Confirmar acci√≥n**\n\nüéØ **Acci√≥n:** ${o}\n\n¬øContinuar?`}return this.conversationContext.pendingActions.push({id:Date.now(),intent:e,context:s,timestamp:new Date,summary:o}),{success:!0,message:t,needsConfirmation:!0,pendingActionId:this.conversationContext.pendingActions[this.conversationContext.pendingActions.length-1].id,suggestions:["‚úÖ S√≠, ejecutar","‚ùå Cancelar","‚öôÔ∏è Configurar auto-ejecuci√≥n"]}}async confirmAction(e,s=!0){const a=this.conversationContext.pendingActions.find((s=>s.id===e));if(!a)return{success:!1,message:"‚ùå **Acci√≥n no encontrada**\n\nLa acci√≥n que intentas confirmar ya no est√° disponible o expir√≥.",suggestions:["Repetir comando","Ver ayuda"]};if(s){const s=await this.executeCommand(a.intent,a.context);return this.conversationContext.pendingActions=this.conversationContext.pendingActions.filter((s=>s.id!==e)),{...s,message:`‚úÖ **Acci√≥n confirmada y ejecutada**\n\n${s.message}`}}return this.conversationContext.pendingActions=this.conversationContext.pendingActions.filter((s=>s.id!==e)),{success:!0,message:"‚ùå **Acci√≥n cancelada**\n\nLa acci√≥n ha sido cancelada correctamente.",suggestions:["Probar otro comando","Ver ayuda","Configurar bot"]}}async findProductByName(e){const s=e.toLowerCase().trim();if(this.productCache.has(s)){const e=this.productCache.get(s);if(Date.now()-e.timestamp<this.config.cacheMaxAge)return console.log("üéØ Producto encontrado en cache:",s),e.data}const a=this.normalizeProductName(s);if(this.conversationContext.businessData?.inventory?.products){const e=this.conversationContext.businessData.inventory.products.find((e=>{const s=e.name.toLowerCase();if(s===a)return!0;if(s.includes(a)||a.includes(s))return!0;for(const[e,n]of Object.entries(this.synonyms.products))if(e===a||n.includes(a))return s.includes(e)||e.includes(s);return!1}));if(e){if(this.productCache.set(s,{data:e,timestamp:Date.now()}),this.productCache.size>this.config.cacheMaxSize){const e=this.productCache.keys().next().value;this.productCache.delete(e)}return e}}return null}normalizeProductName(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim()}async getSimilarProducts(e,s=3){return["Ver todos los productos","Crear nuevo producto","Buscar en cat√°logo"]}analyzeBusinessEmergency(e){const s=[];let a="low";const n=e?.analytics?.lowStockProducts?.filter((e=>0===e.stock))||[];return n.length>0&&(s.push(`‚ö†Ô∏è ${n.length} productos agotados`),a="high"),0===(e?.sales?.today?.total||0)&&(s.push("üìâ Sin ventas registradas hoy"),"high"!==a&&(a="medium")),{message:s.length>0?`üö® **ISSUES DETECTADOS:**\n${s.map((e=>`‚Ä¢ ${e}`)).join("\n")}`:"‚úÖ **Sistema estable** - No se detectaron emergencias",data:{issues:s,urgencyLevel:a},suggestions:"high"===a?["Resolver stock cr√≠tico","Contactar proveedores","Revisar operaciones"]:["Monitoreo preventivo","Optimizar procesos","Revisar m√©tricas"],urgency:a}}calculateBusinessHealth(e){let s=0;const a=[],n=[],t=e?.sales?.today?.total||0,o=Math.min(40,t>0?t/5e4*40:0);s+=o,a.push({name:"Ventas diarias",value:`$${t.toLocaleString()}`,status:o>20?"‚úÖ":o>10?"‚ö†Ô∏è":"‚ùå"});const r=e?.inventory?.totalProducts||0,c=e?.analytics?.lowStockCount||0,i=Math.min(30,r>0?30-c/r*30:0);s+=i,a.push({name:"Gesti√≥n de inventario",value:`${r-c}/${r} √≥ptimos`,status:i>20?"‚úÖ":i>10?"‚ö†Ô∏è":"‚ùå"});const d=Math.min(30,r>0?r/20*30:0);s+=d,a.push({name:"Diversidad de productos",value:`${r} productos`,status:d>20?"‚úÖ":d>10?"‚ö†Ô∏è":"‚ùå"});let u="Cr√≠tico";return s>=80?u="Excelente":s>=60?u="Bueno":s>=40&&(u="Regular"),o<20&&n.push("Impulsar estrategias de ventas"),i<20&&n.push("Optimizar gesti√≥n de inventario"),d<20&&n.push("Expandir cat√°logo de productos"),{score:Math.round(s),status:u,indicators:a,recommendations:n.length>0?n:["Mantener operaciones actuales"]}}calculateKPIs(e){const s=[],a=e?.sales?.today?.total||0;s.push({name:"Ventas del d√≠a",value:`$${a.toLocaleString()}`,trend:a>0?"üìà":"üìä"});const n=e?.inventory?.totalProducts||0;s.push({name:"Productos activos",value:n,trend:n>10?"üìà":"üìä"});const t=e?.analytics?.lowStockCount||0;return s.push({name:"Alertas de stock",value:t,trend:0===t?"‚úÖ":t<5?"‚ö†Ô∏è":"‚ùå"}),s}getStatusEmoji(e){return e>=80?"üü¢":e>=60?"üü°":e>=40?"üü†":"üî¥"}generateAdvancedHelpResponse(){return{success:!0,message:`üöÄ **SuperBot Venezia v${this.version} - MEJORADO**\n\nüéØ **COMANDOS POR CATEGOR√çA:**\n\n**üì¶ INVENTARIO INTELIGENTE:**\n‚Ä¢ "Agregar 15 kg de chocolate" / "Llegaron 10 kilos de vainilla"\n‚Ä¢ "¬øCu√°nto chocolate me queda?" / "Stock de fresa"\n‚Ä¢ "¬øQu√© necesito reponer?" / "Productos con stock bajo"\n‚Ä¢ "Crear sabor pistacho $5200"\n‚Ä¢ "Cambiar precio del chocolate a $4800"\n\n**üîÑ OPERACIONES COMPUESTAS (NUEVO):**\n‚Ä¢ "Agregar 10 kg de chocolate y cambiar precio a $5000"\n‚Ä¢ "Crear helado mango $4500 con 20 unidades"\n‚Ä¢ "Actualizar chocolate: 15 kg y $5200"\n‚Ä¢ "Hacer todo: crear fresa $4000, agregar 10 kg"\n\n**üìä AN√ÅLISIS EMPRESARIAL:**\n‚Ä¢ "Salud del negocio" / "¬øC√≥mo va todo?"\n‚Ä¢ "An√°lisis de rentabilidad"\n‚Ä¢ "KPIs del negocio" / "M√©tricas principales"\n‚Ä¢ "Proyecci√≥n de ventas"\n‚Ä¢ "Tendencias del mes"\n\n**üìà VENTAS Y REPORTES:**\n‚Ä¢ "¬øCu√°nto vendimos hoy?" / "Ventas del d√≠a"\n‚Ä¢ "Top 5 m√°s vendidos" / "Productos estrella"\n‚Ä¢ "Comparar con ayer/semana pasada"\n‚Ä¢ "¬øCu√°l es el m√°s rentable?"\n\n**üö® COMANDOS DE EMERGENCIA:**\n‚Ä¢ "¬øQu√© est√° cr√≠tico?" / "Stock agotado"\n‚Ä¢ "Estado de emergencia"\n‚Ä¢ "Pedido urgente" / "Reposici√≥n inmediata"\n\n**‚öôÔ∏è CONFIGURACI√ìN:**\n‚Ä¢ "Configurar bot" / "Ajustes"\n‚Ä¢ "Activar ejecuci√≥n autom√°tica"\n‚Ä¢ "Personalizar respuestas"\n\nüß† **INTELIGENCIA MEJORADA:**\n‚Ä¢ Cache inteligente para respuestas r√°pidas\n‚Ä¢ Sin√≥nimos y variaciones de productos\n‚Ä¢ Detecci√≥n de patrones naturales en espa√±ol\n‚Ä¢ Integraci√≥n con Gemini AI cuando disponible\n\n‚ö° **EJECUCI√ìN REAL** - Modifico tu base de datos autom√°ticamente\nüéØ **APRENDIZAJE** - Mejoro con cada interacci√≥n\nüí¨ **LENGUAJE NATURAL** - H√°blame como prefieras`,suggestions:["Probar comando compuesto","Ver stock bajo","Activar auto-ejecuci√≥n","Estado del negocio"]}}generateHelpResponse(e=""){return this.generateAdvancedHelpResponse()}generateErrorResponse(e){return{success:!1,message:`‚ùå **Error**\n\n${e}\n\nüí° **¬øNecesitas ayuda?** Escribe "ayuda" para ver todos los comandos disponibles.`,suggestions:["Ver ayuda","Probar comando simple","Contactar soporte"]}}loadUserPreferences(){try{const e=localStorage.getItem("superbot-preferences");return e?JSON.parse(e):{autoExecute:!1,confirmationRequired:!0,voiceEnabled:!0,language:"es"}}catch{return{autoExecute:!1,confirmationRequired:!0,voiceEnabled:!0,language:"es"}}}saveUserPreferences(e){try{return this.conversationContext.userPreferences={...this.conversationContext.userPreferences,...e},localStorage.setItem("superbot-preferences",JSON.stringify(this.conversationContext.userPreferences)),!0}catch{return!1}}updateConfiguration(e){return this.config={...this.config,...e},this.config}getStatus(){return{version:this.version,capabilities:this.capabilities,config:this.config,pendingActions:this.conversationContext.pendingActions.length,userPreferences:this.conversationContext.userPreferences,cacheStatus:{commandCacheSize:this.commandCache.size,responseCacheSize:this.responseCache.size,productCacheSize:this.productCache.size,lastCacheClean:this.lastCacheClean},sessionHistory:this.conversationContext.sessionHistory.length}}clearCache(){return this.commandCache.clear(),this.responseCache.clear(),this.productCache.clear(),this.lastCacheClean=Date.now(),console.log("üßπ Cache del SuperBot limpiado completamente"),{success:!0,message:"Cache limpiado exitosamente"}}updateBusinessContext(e){this.conversationContext.businessData=e,this.conversationContext.businessMetrics={lastUpdate:Date.now(),totalProducts:e?.inventory?.products?.length||0,lowStockCount:e?.analytics?.lowStockProducts?.length||0,todaySales:e?.sales?.today?.total||0}}};s.default=n}}]);