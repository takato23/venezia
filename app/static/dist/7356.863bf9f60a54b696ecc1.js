"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[7356],{47356:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var r=a(96540),i=a(3385),l=a(86589),n=a(29696),s=a(418),o=a(93893),c=a(76316),m=a(17133),d=a(87073),g=a(27235),p=a(89667),v=a(71429),u=a(86241),b=a(20053),y=({icon:e,title:t,value:a,change:l,changeType:n,isLoading:s,flavor:o="vanilla",delay:m=0})=>{const[d,g]=(0,r.useState)(0),p={vanilla:"from-venezia-400 to-venezia-600",strawberry:"from-primary-400 to-primary-600",chocolate:"from-chocolate-500 to-chocolate-700",mint:"from-mint-400 to-mint-600",pistachio:"from-pistachio-400 to-pistachio-600",caramel:"from-venezia-500 to-venezia-700"};(0,r.useEffect)((()=>{if(!s&&a){const e=parseFloat(a.toString().replace(/[^0-9.-]+/g,"")),t=60,r=e/t;let i=0;const l=setInterval((()=>{i++,g(Math.min(r*i,e)),i>=t&&(clearInterval(l),g(e))}),1e3/t);return()=>clearInterval(l)}}),[a,s]);const y="positive"===n?c.A:"negative"===n?v.A:u.A;return r.createElement(i.P.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:m,type:"spring",stiffness:100},whileHover:{y:-5,scale:1.02,transition:{duration:.2}},className:"relative group animate-freeze-in"},r.createElement("div",{className:(0,b.A)("absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500","bg-gradient-to-r",p[o],"blur-xl animate-flavor-pulse")}),r.createElement("div",{className:"metric-gelato gelato-card p-6 shadow-2xl hover:shadow-xl transition-all duration-300 overflow-hidden"},r.createElement("div",{className:(0,b.A)("absolute inset-0 bg-gradient-to-br opacity-40",{vanilla:"from-venezia-50/80 to-venezia-100/80 dark:from-venezia-900/20 dark:to-venezia-800/20",strawberry:"from-primary-50/80 to-primary-100/80 dark:from-primary-900/20 dark:to-primary-800/20",chocolate:"from-chocolate-50/80 to-chocolate-100/80 dark:from-chocolate-900/20 dark:to-chocolate-800/20",mint:"from-mint-50/80 to-mint-100/80 dark:from-mint-900/20 dark:to-mint-800/20",pistachio:"from-pistachio-50/80 to-pistachio-100/80 dark:from-pistachio-900/20 dark:to-pistachio-800/20",caramel:"from-venezia-50/80 to-venezia-200/80 dark:from-venezia-900/20 dark:to-venezia-700/20"}[o])}),r.createElement("div",{className:"absolute -right-20 -top-20 w-40 h-40 rounded-full bg-gradient-to-br from-white/10 to-transparent"}),r.createElement("div",{className:"absolute -right-10 -bottom-10 w-32 h-32 rounded-full bg-gradient-to-tl from-white/10 to-transparent"}),r.createElement("div",{className:"relative z-10"},r.createElement("div",{className:"flex items-center justify-between mb-4"},r.createElement(i.P.div,{whileHover:{rotate:15,scale:1.1},whileTap:{scale:.95},transition:{duration:.3},className:"metric-scoop relative animate-scoop-bounce"},r.createElement(e,{className:"h-6 w-6 text-white relative z-10"}),r.createElement(i.P.div,{className:(0,b.A)("absolute inset-0 rounded-full","bg-gradient-to-br",p[o]),animate:{scale:[1,1.15,1],opacity:[.6,0,.6]},transition:{duration:2.5,repeat:1/0}})),void 0!==l&&r.createElement(i.P.div,{initial:{scale:0},animate:{scale:1},transition:{delay:m+.3},className:(0,b.A)("flavor-tag flex items-center gap-1 px-3 py-1.5 rounded-full text-xs font-semibold shadow-md","backdrop-blur-sm border","positive"===n&&"flavor-mint border-mint-300 bg-mint-100/90 text-mint-700 dark:bg-mint-900/40 dark:text-mint-300 dark:border-mint-600","negative"===n&&"flavor-strawberry border-primary-300 bg-primary-100/90 text-primary-700 dark:bg-primary-900/40 dark:text-primary-300 dark:border-primary-600","neutral"===n&&"flavor-vanilla border-venezia-300 bg-venezia-100/90 text-venezia-700 dark:bg-venezia-900/40 dark:text-venezia-300 dark:border-venezia-600")},r.createElement(y,{className:"h-3 w-3"}),r.createElement("span",null,Math.abs(l),"%"))),r.createElement("div",null,s?r.createElement("div",{className:"space-y-2"},r.createElement("div",{className:"h-8 w-24 bg-gray-200/50 dark:bg-gray-700/50 rounded-lg animate-pulse"}),r.createElement("div",{className:"h-4 w-32 bg-gray-200/50 dark:bg-gray-700/50 rounded animate-pulse"})):r.createElement(r.Fragment,null,r.createElement(i.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{delay:m+.2},className:"text-3xl font-bold text-venezia-800 dark:text-venezia-100 mb-1 font-display animate-melt-gentle"},(h=d,a&&a.toString().includes("$")?`$${Math.round(h).toLocaleString()}`:Math.round(h).toLocaleString())),r.createElement(i.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:m+.4},className:"text-sm text-venezia-600 dark:text-venezia-400 font-semibold tracking-wide"},t))))));var h},h=a(93823),f=({title:e,children:t,isLoading:a,className:l="",gradient:n="blue",delay:s=0,icon:o})=>{const c={blue:"from-blue-500/10 to-indigo-500/10",green:"from-emerald-500/10 to-teal-500/10",purple:"from-purple-500/10 to-pink-500/10",orange:"from-orange-500/10 to-red-500/10",cyan:"from-cyan-500/10 to-blue-500/10"};return r.createElement(i.P.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,delay:s,type:"spring",stiffness:100},whileHover:{y:-2,transition:{duration:.2}},className:(0,b.A)("relative group",l)},r.createElement("div",{className:(0,b.A)("absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-50 transition-opacity duration-500","bg-gradient-to-r",c[n],"blur-3xl")}),r.createElement("div",{className:(0,b.A)("relative backdrop-blur-md bg-white/80 dark:bg-gray-900/80","border border-gray-200/50 dark:border-gray-700/50","rounded-2xl shadow-xl","hover:shadow-2xl transition-all duration-300","overflow-hidden")},r.createElement("div",{className:"absolute -right-32 -top-32 w-64 h-64 rounded-full bg-gradient-to-br from-gray-100/20 to-transparent dark:from-gray-800/20"}),r.createElement("div",{className:(0,b.A)("relative p-6 border-b border-gray-200/50 dark:border-gray-700/50","bg-gradient-to-r",c[n])},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-3"},o&&r.createElement(i.P.div,{whileHover:{rotate:360},transition:{duration:.5},className:"p-2 rounded-lg bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm"},r.createElement(o,{className:"h-5 w-5 text-gray-700 dark:text-gray-300"})),r.createElement("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white"},e)),r.createElement(i.P.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"h-2 w-2 rounded-full bg-green-500"}))),r.createElement("div",{className:"relative p-6"},a?r.createElement(i.P.div,{initial:{opacity:0},animate:{opacity:1},className:"h-64 flex flex-col items-center justify-center gap-4"},r.createElement("div",{className:"relative"},r.createElement(h.A,{size:"lg"}),r.createElement(i.P.div,{className:"absolute inset-0 rounded-full bg-blue-500/20",animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0}})),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 animate-pulse"},"Cargando datos...")):r.createElement(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:s+.2}},t))))},E=a(44731),x=a(66118),N=a(82932),w=a(71083),k=a(39659),z=a(16308),A=a(47767);x.t1.register(x.PP,x.kc,x.FN,x.No,x.hE,x.m_,x.s$,x.Bs,x.E8),(0,r.memo)((({icon:e,title:t,value:a,change:l,changeType:n,isLoading:s})=>r.createElement(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"stat-card hover-lift"},r.createElement("div",{className:"flex items-center justify-between mb-4"},r.createElement("div",{className:"p-2 rounded-xl bg-venezia-100"},r.createElement(e,{className:"h-6 w-6 text-venezia-700"})),l&&r.createElement("span",{className:`metric-change ${n}`},"positive"===n?"+":"",l,"%")),r.createElement("div",null,s?r.createElement("div",{className:"loading-skeleton h-8 w-24 rounded mb-2"}):r.createElement("div",{className:"metric-value"},a),r.createElement("div",{className:"metric-label"},t))))).displayName="MetricCard",(0,r.memo)((({title:e,children:t,isLoading:a,className:l=""})=>r.createElement(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`card ${l}`},r.createElement("div",{className:"p-6 border-b border-venezia-200"},r.createElement("h3",{className:"text-lg font-semibold text-venezia-900"},e)),r.createElement("div",{className:"p-6"},a?r.createElement("div",{className:"h-64 flex items-center justify-center"},r.createElement(h.A,{size:"lg",text:"Cargando datos..."})):t)))).displayName="ChartContainer";var _=()=>{const{socket:e,connected:t,emitEvent:a}=(0,N.Y)(),[v,u]=(0,r.useState)(null),[b,x]=(0,r.useState)(!0),[_,P]=(0,r.useState)(new Date),C=((0,A.Zp)(),(0,r.useCallback)((async()=>{try{x(!0);const e=await w.A.get("/api/dashboard/overview");u(e.data),P(new Date)}catch(e){console.error("Error cargando dashboard:",e)}finally{x(!1)}}),[]));(0,r.useEffect)((()=>{C()}),[C]),(0,r.useEffect)((()=>{if(e){const t=e=>{console.log("ðŸ“Š ActualizaciÃ³n de dashboard en tiempo real:",e),u((t=>({...t,...e}))),P(new Date)};return e.on("dashboard_update",t),e.on("sales_update",t),e.on("inventory_update",t),()=>{e.off("dashboard_update",t),e.off("sales_update",t),e.off("inventory_update",t)}}}),[e]),(0,r.useEffect)((()=>{const e=setInterval((()=>{b||C()}),3e4);return()=>clearInterval(e)}),[b,C]);const L=(0,r.useMemo)((()=>({responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{family:"Inter",size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:12,padding:12}},scales:{x:{grid:{display:!1},ticks:{font:{family:"Inter",size:11}}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{font:{family:"Inter",size:11}}}}})),[]),I={labels:v?.sales_chart?.labels||[],datasets:[{label:"Ventas ($)",data:v?.sales_chart?.data||[],borderColor:"rgb(14, 165, 233)",backgroundColor:"rgba(14, 165, 233, 0.1)",borderWidth:3,fill:!0,tension:.4}]},S={labels:v?.top_products?.map((e=>e.name))||[],datasets:[{data:v?.top_products?.map((e=>e.quantity))||[],backgroundColor:["#ef4444","#f59e0b","#10b981","#8b5cf6","#06b6d4"],borderWidth:0}]},H={labels:v?.stock_by_category?.map((e=>e.category))||[],datasets:[{label:"Stock (kg)",data:v?.stock_by_category?.map((e=>e.total_stock))||[],backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]};return b&&!v?r.createElement("div",{className:"min-h-96 flex items-center justify-center"},r.createElement(h.A,{size:"xl",text:"Cargando dashboard..."})):r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",null,r.createElement("h1",{className:"text-3xl font-bold text-venezia-900"},"Dashboard"),r.createElement("p",{className:"text-venezia-600 mt-1"},"Panel de control en tiempo real Â· Venezia Ice Cream")),r.createElement("div",{className:"flex items-center space-x-4"},r.createElement("div",{className:"text-sm text-venezia-500"},"Actualizado: ",(0,k.A)(_,"HH:mm:ss",{locale:z.A})),r.createElement("div",{className:"flex items-center space-x-2 px-3 py-1.5 rounded-full "+(t?"bg-success-100 text-success-700":"bg-error-100 text-error-700")},r.createElement("div",{className:"h-2 w-2 rounded-full "+(t?"bg-success-500":"bg-error-500")}),r.createElement("span",{className:"text-xs font-medium"},t?"En vivo":"Sin conexiÃ³n")))),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},r.createElement(y,{icon:l.A,title:"Ventas Hoy",value:`$${v?.metrics?.today_sales?.toLocaleString()||"0"}`,change:v?.metrics?.sales_growth,changeType:v?.metrics?.sales_growth>0?"positive":"negative",isLoading:b,gradient:"green",delay:0}),r.createElement(y,{icon:n.A,title:"Ã“rdenes Hoy",value:v?.metrics?.today_orders||"0",change:v?.metrics?.orders_growth,changeType:v?.metrics?.orders_growth>0?"positive":"negative",isLoading:b,gradient:"blue",delay:.1}),r.createElement(y,{icon:s.A,title:"Stock Bajo",value:v?.metrics?.low_stock_items||"0",change:v?.metrics?.stock_change,changeType:v?.metrics?.stock_change<0?"positive":"negative",isLoading:b,gradient:"orange",delay:.2}),r.createElement(y,{icon:o.A,title:"Clientes Activos",value:v?.metrics?.active_customers||"0",change:v?.metrics?.customers_growth,changeType:v?.metrics?.customers_growth>0?"positive":"neutral",isLoading:b,gradient:"purple",delay:.3})),r.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},r.createElement(f,{title:"Ventas - Ãšltimos 7 dÃ­as",isLoading:b,className:"lg:col-span-1",gradient:"green",icon:c.A,delay:.4},r.createElement("div",{className:"h-64"},r.createElement(E.N1,{data:I,options:L}))),r.createElement(f,{title:"Productos MÃ¡s Vendidos",isLoading:b,className:"lg:col-span-1",gradient:"purple",icon:m.A,delay:.5},r.createElement("div",{className:"h-64"},r.createElement(E.nu,{data:S,options:{...L,scales:void 0,plugins:{...L.plugins,legend:{...L.plugins.legend,position:"right"}}}})))),r.createElement("div",{className:"mb-6"},r.createElement(i.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-r from-purple-500 via-blue-500 to-indigo-600 rounded-2xl p-6 text-white shadow-2xl hover:shadow-purple-500/25 transition-all duration-300"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center space-x-4"},r.createElement(i.P.div,{animate:{rotate:[0,360],scale:[1,1.1,1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm"},r.createElement(d.A,{size:32,className:"text-white"})),r.createElement("div",null,r.createElement("h3",{className:"text-xl font-bold mb-1"},"Asistente AI Venezia"),r.createElement("p",{className:"text-white/80 text-sm"},"Tu consultor de inteligencia artificial para el negocio"))),r.createElement(i.P.button,{onClick:()=>window.open("/ai-assistant-test","_blank","width=1200,height=800"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2"},r.createElement(d.A,{size:20}),r.createElement("span",null,"Abrir AI Assistant"))),r.createElement("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-4 gap-4"},r.createElement("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},r.createElement("div",{className:"text-2xl mb-1"},"ðŸ’¬"),r.createElement("div",{className:"text-sm font-medium"},"Chat IA"),r.createElement("div",{className:"text-xs text-white/70"},"Consultas en tiempo real")),r.createElement("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},r.createElement("div",{className:"text-2xl mb-1"},"ðŸ“ˆ"),r.createElement("div",{className:"text-sm font-medium"},"Predicciones"),r.createElement("div",{className:"text-xs text-white/70"},"Ventas futuras")),r.createElement("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},r.createElement("div",{className:"text-2xl mb-1"},"ðŸ“Š"),r.createElement("div",{className:"text-sm font-medium"},"AnÃ¡lisis"),r.createElement("div",{className:"text-xs text-white/70"},"Rendimiento")),r.createElement("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3 text-center"},r.createElement("div",{className:"text-2xl mb-1"},"ðŸ“¦"),r.createElement("div",{className:"text-sm font-medium"},"Inventario"),r.createElement("div",{className:"text-xs text-white/70"},"OptimizaciÃ³n"))))),r.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},r.createElement(f,{title:"Stock por CategorÃ­a",isLoading:b,className:"lg:col-span-2",gradient:"cyan",icon:m.A,delay:.6},r.createElement("div",{className:"h-64"},r.createElement(E.yP,{data:H,options:L}))),r.createElement(f,{title:"Actividad Reciente",isLoading:b,className:"lg:col-span-1",gradient:"orange",icon:g.A,delay:.7},r.createElement("div",{className:"space-y-4"},v?.recent_activity?.slice(0,5).map(((e,t)=>r.createElement(i.P.div,{key:e.id,initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.1*t},className:"flex items-center space-x-3 p-3 rounded-xl hover:bg-venezia-50 transition-colors"},r.createElement("div",{className:"p-2 rounded-lg "+("sale"===e.type?"bg-success-100 text-success-700":"production"===e.type?"bg-primary-100 text-primary-700":"bg-warning-100 text-warning-700")},"sale"===e.type?r.createElement(n.A,{className:"h-4 w-4"}):"production"===e.type?r.createElement(p.A,{className:"h-4 w-4"}):r.createElement(m.A,{className:"h-4 w-4"})),r.createElement("div",{className:"flex-1 min-w-0"},r.createElement("p",{className:"text-sm font-medium text-venezia-900 truncate"},e.description),r.createElement("p",{className:"text-xs text-venezia-500"},(0,k.A)(new Date(e.timestamp),"HH:mm",{locale:z.A}))))))||r.createElement("div",{className:"text-center py-8 text-venezia-500"},r.createElement(g.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),r.createElement("p",{className:"text-sm"},"No hay actividad reciente"))))))}}}]);