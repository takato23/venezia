"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[8956],{72107:function(e,t,a){var n=a(96540),l=a(47767),o=a(67561),r=a(3385),c=a(20053),s=a(67707),i=a(82932),d=a(42203),m=a(40323),h=a(90513),p=a(31934),u=a(34224),E=a(82749),b=a(31960),O=a(4952),g=a(27272),S=a(37034),v=a(94538),f=a(81381),M=a(67812),w=a(93823),y=a(70597),k=a(77579),z=a(5392),A=a(21878),q=a(98263),G=a(24402),C=a(80233),P=a(65024);const N=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(5738),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(7356)]).then(a.bind(a,47356)))),x=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(3355)]).then(a.bind(a,63355)))),L=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(8620)]).then(a.bind(a,88620)))),_=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(9039)]).then(a.bind(a,29039)))),T=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(5879)]).then(a.bind(a,65879)))),$=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(6889)]).then(a.bind(a,36889)))),F=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(965)]).then(a.bind(a,70965)))),j=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(112)]).then(a.bind(a,60112)))),D=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(9001)]).then(a.bind(a,69001)))),I=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(1107)]).then(a.bind(a,41107)))),W=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(746)]).then(a.bind(a,30746)))),B=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2548)]).then(a.bind(a,62548)))),Q=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(3462)]).then(a.bind(a,43462)))),R=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(107)]).then(a.bind(a,20107)))),U=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(8658)]).then(a.bind(a,68658)))),V=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(2469)]).then(a.bind(a,22469)))),Y=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(9556)]).then(a.bind(a,49556)))),Z=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(2880)]).then(a.bind(a,2880)))),H=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(1617)]).then(a.bind(a,51617)))),J=n.lazy((()=>Promise.all([a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(2076),a.e(1563)]).then(a.bind(a,11563)))),K=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(5738),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(20)]).then(a.bind(a,90020)))),X=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(5738),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(3669)]).then(a.bind(a,43669)))),ee=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(2384)]).then(a.bind(a,52384)))),te=n.lazy((()=>Promise.all([a.e(3203),a.e(6984),a.e(6947),a.e(4993),a.e(7605),a.e(8661),a.e(3363),a.e(3729),a.e(8224),a.e(9184),a.e(5566),a.e(6007),a.e(8145),a.e(3595),a.e(7673),a.e(8363),a.e(9874),a.e(4078),a.e(5417),a.e(489),a.e(7637),a.e(9e3),a.e(9936),a.e(2076),a.e(4596)]).then(a.bind(a,64596)))),ae=({children:e,globalSearchOpen:t,setGlobalSearchOpen:a,shortcutsModalOpen:i,setShortcutsModalOpen:d})=>{const m=(0,l.zy)(),{sidebarOpen:h,setSidebarOpen:p,toggleSidebar:u}=(0,s.n)(),[E,b]=(0,n.useState)(window.innerWidth<1024);return(0,n.useEffect)((()=>{const e=()=>{const e=window.innerWidth<1024;b(e),p(!e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[p]),n.createElement("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex compact-ui"},n.createElement(v.A,{isOpen:h,onClose:()=>p(!1)}),n.createElement("div",{className:(0,c.A)("flex-1 flex flex-col min-w-0","transition-all duration-300 ease-in-out",!E&&h?"lg:ml-64":E?"":"lg:ml-16")},n.createElement(f.A,{onMenuClick:u}),n.createElement("main",{className:(0,c.A)("flex-1 overflow-y-auto overflow-x-hidden","p-4 lg:p-6",E?"pb-20":"","custom-scrollbar")},n.createElement("div",{className:"max-w-full"}," ",n.createElement(o.N,{mode:"wait"},n.createElement(r.P.div,{key:m.pathname,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},className:"w-full"},e))))),E&&n.createElement(M.A,{onMenuClick:u}),n.createElement(k.SA,null,n.createElement(y.A,null)),n.createElement(z.A,{isOpen:t,onClose:()=>a(!1)}),n.createElement(q.A,{isOpen:i,onClose:()=>d(!1)}),n.createElement(A.A,null),n.createElement(G.A,null),n.createElement(C.A,null))},ne=({children:e,globalSearchOpen:t,setGlobalSearchOpen:a,shortcutsModalOpen:o,setShortcutsModalOpen:r})=>{const{isAuthenticated:c,isLoading:i}=(0,s.n)();return i?n.createElement("div",{className:"min-h-screen flex items-center justify-center bg-venezia-50 dark:bg-gray-900"},n.createElement(w.A,{size:"lg"})):c?n.createElement(ae,{globalSearchOpen:t,setGlobalSearchOpen:a,shortcutsModalOpen:o,setShortcutsModalOpen:r},e):n.createElement(l.C5,{to:"/login",replace:!0})};t.A=function(){const{checkAuth:e,isLoading:t,darkMode:a,setDarkMode:o}=(0,s.n)(),{socket:r}=(0,i.Y)(),{toasts:c,removeToast:v,success:f,error:M,warning:y,info:k}=(0,d.d)(),{handleError:z,handleAsyncError:A,isOnline:q}=(0,u.ux)(),G=(0,l.Zp)(),{shortcuts:C}=(0,b.A)(),{isSupported:ae,startListening:le,stopListening:oe,isListening:re}=(0,O.A)(),{autoMode:ce,toggleAutoMode:se,getNextThemeChange:ie,getPeriodIcon:de}=(0,g.A)(a,o),[me,he]=(0,n.useState)(!1),[pe,ue]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=localStorage.getItem("venezia-auth");let t=a;e||(t=window.matchMedia("(prefers-color-scheme: dark)").matches,o(t)),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[]),(0,n.useEffect)((()=>{a?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}),[a]),(0,n.useEffect)((()=>{A((()=>e()),{retries:2,onError:e=>{console.error("Auth check failed:",e),e("Error de autenticaci贸n","No se pudo verificar la sesi贸n")}})}),[e,A,M]),(0,n.useEffect)((()=>{const e=e=>{const{type:t,target:n,action:l,text:r}=e.detail;switch(t){case"navigate":G(n),f("Navegaci贸n",`Navegando a ${n}`);break;case"chat":const t=new CustomEvent("chatControl",{detail:{action:l}});window.dispatchEvent(t);break;case"theme":"toggle"===l&&(ce&&(se(),k("Tema autom谩tico","Modo autom谩tico desactivado. Cambiando tema manualmente.")),o(!a),f("Tema",`Modo ${a?"claro":"oscuro"} activado`));break;case"voice":"toggle"===l&&ae&&(re?oe():(le(),k("Comando de voz"," Escuchando... Di tu comando")));break;case"action":if("refresh_data"===l)window.location.reload();else if("toggle_auto_theme"===l){const e=se(),t=ie();f("Tema autom谩tico",e?`Activado. Pr贸ximo cambio: ${t?.timeString} (${t?.type})`:"Desactivado")}else"new_sale"===l&&n?(G(n),f("Acceso r谩pido","Navegando al punto de venta")):"new_product"===l&&n?(G(n),f("Acceso r谩pido","Navegando a productos")):"new_order"===l&&n?(G(n),f("Acceso r谩pido","Navegando a 贸rdenes de producci贸n")):"new_ingredient"===l&&n?(G(n),f("Acceso r谩pido","Navegando a ingredientes")):"new_recipe"===l&&n?(G(n),f("Acceso r谩pido","Navegando a recetas")):"new_transaction"===l&&n&&(G(n),f("Acceso r谩pido","Navegando a transacciones"));break;case"filter":if("low_stock"===l&&n)G(n),f("Filtro aplicado","Mostrando productos con stock bajo");else if("pending_orders"===l&&n)G(n),f("Filtro aplicado","Mostrando 贸rdenes pendientes");else if("toggle_filters"===l){const e=new CustomEvent("toggleFilters");window.dispatchEvent(e),k("Filtros","Toggle filtros activado")}else if("clear_filters"===l){const e=new CustomEvent("clearFilters");window.dispatchEvent(e),f("Filtros","Filtros limpiados")}break;case"ui":if("toggle_sidebar"===l){const e=new CustomEvent("toggleSidebar");window.dispatchEvent(e),k("UI","Sidebar toggled")}else if("toggle_focus"===l){document.documentElement.classList.toggle("focus-mode");const e=document.documentElement.classList.contains("focus-mode");f("Modo Focus",e?"Activado":"Desactivado")}break;case"search":"open"===l&&he(!0);break;case"help":"shortcuts"===l&&ue(!0);break;default:console.log("Shortcut no manejado:",e.detail)}};return window.addEventListener("keyboardShortcut",e),()=>window.removeEventListener("keyboardShortcut",e)}),[G,f,k,a,o,ae,re,le,oe,he,ue,se,ie]),(0,n.useEffect)((()=>{const e=e=>{const{type:t,target:a,action:n,text:l,originalText:r,confidence:c}=e.detail;switch(k("Comando de voz",` "${r}" (${Math.round(100*c)}%)`),t){case"navigate":G(a),f("Navegaci贸n por voz",`Navegando a ${a}`);break;case"chat":const t=new CustomEvent("chatControl",{detail:{action:n}});window.dispatchEvent(t);break;case"query":const r=new CustomEvent("chatQuery",{detail:{text:l}});window.dispatchEvent(r);break;case"theme":"dark"===n?(o(!0),f("Tema","Modo oscuro activado por voz")):"light"===n&&(o(!1),f("Tema","Modo claro activado por voz"));break;default:console.log("Comando de voz no manejado:",e.detail)}};return window.addEventListener("voiceCommand",e),()=>window.removeEventListener("voiceCommand",e)}),[G,f,k,o]),(0,n.useEffect)((()=>{const e=e=>{const{newTheme:t,time:a,reason:n}=e.detail;if("automatic"===n){const e=de();k(`${e} Tema autom谩tico`,`Cambiando a modo ${"dark"===t?"oscuro":"claro"} (${a})`)}};return window.addEventListener("themeAutoChange",e),()=>window.removeEventListener("themeAutoChange",e)}),[k,de]),(0,n.useEffect)((()=>{if(r)return r.on("notification",(e=>{switch(console.log("Nueva notificaci贸n:",e),e.type){case"success":f(e.title,e.message);break;case"error":M(e.title,e.message);break;case"warning":y(e.title,e.message);break;default:k(e.title,e.message)}})),r.on("data_update",(e=>{console.log("Actualizaci贸n de datos:",e),k("Datos actualizados","La informaci贸n se ha actualizado autom谩ticamente")})),r.on("connect",(()=>{f("Conectado","Conexi贸n en tiempo real establecida")})),r.on("disconnect",(()=>{y("Desconectado","Se perdi贸 la conexi贸n en tiempo real")})),()=>{r.off("notification"),r.off("data_update"),r.off("connect"),r.off("disconnect")}}),[r,f,M,y,k]),t?n.createElement("div",{className:"min-h-screen flex items-center justify-center bg-venezia-50 dark:bg-gray-900"},n.createElement(w.A,{size:"lg"})):n.createElement(h.Ay,null,n.createElement("div",{className:"app"},n.createElement(m.N,{toasts:c,onRemove:v}),n.createElement(p.A,null),n.createElement(E.A,null),n.createElement(S.A,null),n.createElement(P.A,null),n.createElement(n.Suspense,{fallback:n.createElement("div",{className:"min-h-screen flex items-center justify-center bg-venezia-50 dark:bg-gray-900"},n.createElement(w.A,{size:"lg"}))},n.createElement(h.Ay,{level:"page"},n.createElement(l.BV,null,n.createElement(l.qh,{path:"/login",element:n.createElement(B,null)}),n.createElement(l.qh,{path:"/webshop",element:n.createElement(H,null)}),n.createElement(l.qh,{path:"/",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(N,null))}),n.createElement(l.qh,{path:"/dashboard",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(N,null))}),n.createElement(l.qh,{path:"/sales/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(x,null))}),n.createElement(l.qh,{path:"/inventory/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(L,null))}),n.createElement(l.qh,{path:"/ingredients",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(L,null))}),n.createElement(l.qh,{path:"/recipes",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(L,null))}),n.createElement(l.qh,{path:"/stock",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(L,null))}),n.createElement(l.qh,{path:"/transactions",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(Y,null))}),n.createElement(l.qh,{path:"/products/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(I,null))}),n.createElement(l.qh,{path:"/production/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(_,null))}),n.createElement(l.qh,{path:"/production-orders",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(_,null))}),n.createElement(l.qh,{path:"/batch-assignment",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(Z,null))}),n.createElement(l.qh,{path:"/analytics/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(T,null))}),n.createElement(l.qh,{path:"/shop/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement($,null))}),n.createElement(l.qh,{path:"/providers/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(j,null))}),n.createElement(l.qh,{path:"/pos",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(U,null))}),n.createElement(l.qh,{path:"/stores",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(V,null))}),n.createElement(l.qh,{path:"/web-users/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(D,null))}),n.createElement(l.qh,{path:"/deliveries/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(Q,null))}),n.createElement(l.qh,{path:"/customers/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(J,null))}),n.createElement(l.qh,{path:"/cashflow/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(K,null))}),n.createElement(l.qh,{path:"/temperature/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(X,null))}),n.createElement(l.qh,{path:"/reports/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(R,null))}),n.createElement(l.qh,{path:"/settings/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(F,null))}),n.createElement(l.qh,{path:"/ai-test",element:n.createElement(W,null)}),n.createElement(l.qh,{path:"/ai-assistant",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(W,null))}),n.createElement(l.qh,{path:"/ai-assistant/*",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(W,null))}),n.createElement(l.qh,{path:"/branches",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(ee,null))}),n.createElement(l.qh,{path:"/corporate-dashboard",element:n.createElement(ne,{globalSearchOpen:me,setGlobalSearchOpen:he,shortcutsModalOpen:pe,setShortcutsModalOpen:ue},n.createElement(te,null))}),n.createElement(l.qh,{path:"*",element:n.createElement(l.C5,{to:"/dashboard",replace:!0})}))))))}}}]);