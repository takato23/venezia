"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[5879],{65879:function(e,t,a){a.r(t);var s=a(96540),l=a(94945),r=a(86589),n=a(17133),c=a(93893),m=a(15977),i=a(48309),o=a(76316),d=a(50211),p=a(29696),x=a(1474),v=a(37946),u=a(66118),g=a(44731),E=a(72284),b=a(71428),N=a(11562),y=a(93823),f=a(70700),h=a(27993),z=a(13596);a(25708),u.t1.register(u.PP,u.kc,u.FN,u.No,u.E8,u.Bs,u.hE,u.m_,u.s$,u.dN),t.default=()=>{const[e,t]=(0,s.useState)("overview"),[a,u]=(0,s.useState)("last_30_days"),[_,w]=(0,s.useState)("all"),[A,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(""),V=(()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(a){case"today":return{from:t.toISOString().split("T")[0],to:t.toISOString().split("T")[0]};case"yesterday":const a=new Date(t);return a.setDate(a.getDate()-1),{from:a.toISOString().split("T")[0],to:a.toISOString().split("T")[0]};case"last_7_days":const s=new Date(t);return s.setDate(s.getDate()-7),{from:s.toISOString().split("T")[0],to:t.toISOString().split("T")[0]};case"last_30_days":const l=new Date(t);return l.setDate(l.getDate()-30),{from:l.toISOString().split("T")[0],to:t.toISOString().split("T")[0]};case"last_90_days":const r=new Date(t);return r.setDate(r.getDate()-90),{from:r.toISOString().split("T")[0],to:t.toISOString().split("T")[0]};case"this_year":return{from:`${e.getFullYear()}-01-01`,to:t.toISOString().split("T")[0]};case"custom":return{from:A,to:C};default:return{from:"",to:""}}})(),{data:P={},loading:F,refetch:T}=(0,f.Wl)("/api/analytics/sales",{range:a,store:_,...V},{enabled:!0}),{data:D={},loading:R,refetch:I}=(0,f.Wl)("/api/analytics/products",{range:a,store:_,...V},{enabled:!0}),{data:j={},loading:$,refetch:Z}=(0,f.Wl)("/api/analytics/customers",{range:a,store:_,...V},{enabled:!0}),{data:M=[],loading:O}=(0,f.Wl)("/api/stores",null,{enabled:!0}),L=Array.isArray(M)?M:M.data||[],W=F||R||$||O,q={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{font:{family:"'Inter', sans-serif",size:12}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,cornerRadius:8,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{label:function(e){let t=e.dataset.label||"";return t&&(t+=": "),null!==e.parsed.y&&(t+=(0,h.vv)(e.parsed.y)),t}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return(0,h.vv)(e)},font:{size:11}},grid:{drawBorder:!1,color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{font:{size:11}},grid:{display:!1}}}},B=(0,s.useMemo)((()=>P.daily_sales&&Array.isArray(P.daily_sales)?{labels:P.daily_sales.map((e=>new Date(e.date).toLocaleDateString("es-AR",{month:"short",day:"numeric"}))),datasets:[{label:"Ventas",data:P.daily_sales.map((e=>e.revenue||0)),borderColor:"rgb(251, 191, 36)",backgroundColor:"rgba(251, 191, 36, 0.1)",tension:.4,fill:!0}]}:null),[P]),G=(0,s.useMemo)((()=>P.payment_methods&&Array.isArray(P.payment_methods)?{labels:P.payment_methods.map((e=>e.method)),datasets:[{data:P.payment_methods.map((e=>e.amount||0)),backgroundColor:["rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(239, 68, 68, 0.8)"].slice(0,P.payment_methods.length),borderWidth:0}]}:null),[P]),H=(0,s.useMemo)((()=>D.by_category&&Array.isArray(D.by_category)?{labels:D.by_category.map((e=>e.category)),datasets:[{label:"Ventas por Categoría",data:D.by_category.map((e=>e.revenue||0)),backgroundColor:["rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)"],borderRadius:8}]}:null),[D]),U=(0,s.useMemo)((()=>D.inventory_value&&Array.isArray(D.inventory_value)?{labels:D.inventory_value.map((e=>e.product)),datasets:[{label:"Valor en Inventario",data:D.inventory_value.map((e=>e.value||0)),backgroundColor:"rgba(59, 130, 246, 0.8)",borderRadius:4}]}:null),[D]),Y=[{id:"overview",label:"Resumen General",icon:l.A},{id:"sales",label:"Ventas",icon:r.A},{id:"products",label:"Productos",icon:n.A},{id:"customers",label:"Clientes",icon:c.A}],J=[{value:"today",label:"Hoy"},{value:"yesterday",label:"Ayer"},{value:"last_7_days",label:"Últimos 7 días"},{value:"last_30_days",label:"Últimos 30 días"},{value:"last_90_days",label:"Últimos 90 días"},{value:"this_year",label:"Este año"},{value:"custom",label:"Personalizado"}];return W?s.createElement("div",{className:"flex items-center justify-center h-64"},s.createElement(y.A,{size:"lg"})):s.createElement("div",{className:"space-y-6"},s.createElement("div",{className:"flex items-center justify-between"},s.createElement("div",null,s.createElement("h1",{className:"text-3xl font-bold text-venezia-900"},"Analytics"),s.createElement("p",{className:"text-venezia-600 mt-1"},"Reportes y métricas avanzadas")),s.createElement("div",{className:"flex space-x-3"},s.createElement(E.A,{variant:"outline",onClick:()=>{T(),I(),Z()},disabled:W},s.createElement(m.A,{className:"h-5 w-5 mr-2 "+(W?"animate-spin":"")}),"Actualizar"),s.createElement(E.A,{onClick:async()=>{try{const e=new z.uE,t=e.internal.pageSize.getWidth();if(e.setFontSize(20),e.setTextColor(251,191,36),e.text("Reporte de Analytics - Venezia",t/2,20,{align:"center"}),e.setFontSize(12),e.setTextColor(0,0,0),e.text(`Período: ${J.find((e=>e.value===a))?.label||"Personalizado"}`,20,35),e.text(`Fecha: ${(new Date).toLocaleDateString("es-AR")}`,20,42),e.setFontSize(16),e.text("Indicadores Principales",20,55),e.setFontSize(12),e.text(`Ventas Totales: ${(0,h.vv)(P.total_sales||0)}`,20,65),e.text(`Órdenes: ${(0,h.ZV)(P.total_orders||0)}`,20,72),e.text(`Ticket Promedio: ${(0,h.vv)(P.avg_ticket||0)}`,20,79),e.text(`Clientes Únicos: ${(0,h.ZV)(j.unique_customers||0)}`,20,86),D.top_products&&D.top_products.length>0){e.setFontSize(16),e.text("Productos Más Vendidos",20,100);const t=D.top_products.slice(0,10).map((e=>[e.name,(0,h.ZV)(e.units_sold),(0,h.vv)(e.revenue),`${e.percentage?.toFixed(1)}%`]));e.autoTable({startY:105,head:[["Producto","Unidades","Ingresos","% Total"]],body:t,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[251,191,36]}})}e.save(`reporte_venezia_${(new Date).toISOString().split("T")[0]}.pdf`)}catch(e){console.error("Error exportando reporte:",e),alert("Error al exportar reporte")}}},s.createElement(i.A,{className:"h-5 w-5 mr-2"}),"Exportar PDF"))),s.createElement("div",{className:"card p-6"},s.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},s.createElement(b.A,{label:"Período",value:a,onChange:e=>u(e.target.value)},J.map((e=>s.createElement("option",{key:e.value,value:e.value},e.label)))),s.createElement(b.A,{label:"Tienda",value:_,onChange:e=>w(e.target.value)},s.createElement("option",{value:"all"},"Todas las tiendas"),Array.isArray(L)&&L.map((e=>s.createElement("option",{key:e.id,value:e.id},e.name)))),"custom"===a&&s.createElement(s.Fragment,null,s.createElement(N.A,{label:"Desde",type:"date",value:A,onChange:e=>k(e.target.value)}),s.createElement(N.A,{label:"Hasta",type:"date",value:C,onChange:e=>S(e.target.value)})))),s.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},s.createElement("div",{className:"card p-6"},s.createElement("div",{className:"flex items-center justify-between"},s.createElement("div",null,s.createElement("p",{className:"text-sm font-medium text-venezia-600"},"Ventas Totales"),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},"$",P.total_sales?.toFixed(2)||"0.00"),s.createElement("p",{className:"text-sm "+(P.sales_growth>=0?"text-green-600":"text-red-600")},P.sales_growth>=0?"+":"",P.sales_growth?.toFixed(1)||"0","% vs período anterior")),s.createElement(r.A,{className:"h-8 w-8 text-green-600"}))),s.createElement("div",{className:"card p-6"},s.createElement("div",{className:"flex items-center justify-between"},s.createElement("div",null,s.createElement("p",{className:"text-sm font-medium text-venezia-600"},"Órdenes"),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},P.total_orders||0),s.createElement("p",{className:"text-sm "+(P.orders_growth>=0?"text-green-600":"text-red-600")},P.orders_growth>=0?"+":"",P.orders_growth?.toFixed(1)||"0","% vs período anterior")),s.createElement(n.A,{className:"h-8 w-8 text-blue-600"}))),s.createElement("div",{className:"card p-6"},s.createElement("div",{className:"flex items-center justify-between"},s.createElement("div",null,s.createElement("p",{className:"text-sm font-medium text-venezia-600"},"Ticket Promedio"),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},"$",P.avg_ticket?.toFixed(2)||"0.00"),s.createElement("p",{className:"text-sm "+(P.ticket_growth>=0?"text-green-600":"text-red-600")},P.ticket_growth>=0?"+":"",P.ticket_growth?.toFixed(1)||"0","% vs período anterior")),s.createElement(o.A,{className:"h-8 w-8 text-venezia-600"}))),s.createElement("div",{className:"card p-6"},s.createElement("div",{className:"flex items-center justify-between"},s.createElement("div",null,s.createElement("p",{className:"text-sm font-medium text-venezia-600"},"Clientes Únicos"),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},j.unique_customers||0),s.createElement("p",{className:"text-sm "+(j.customers_growth>=0?"text-green-600":"text-red-600")},j.customers_growth>=0?"+":"",j.customers_growth?.toFixed(1)||"0","% vs período anterior")),s.createElement(c.A,{className:"h-8 w-8 text-purple-600"})))),s.createElement("div",{className:"border-b border-venezia-200"},s.createElement("nav",{className:"-mb-px flex space-x-8"},Y.map((a=>{const l=a.icon;return s.createElement("button",{key:a.id,onClick:()=>t(a.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 "+(e===a.id?"border-venezia-500 text-venezia-600":"border-transparent text-venezia-500 hover:text-venezia-700 hover:border-venezia-300")},s.createElement(l,{className:"h-5 w-5"}),s.createElement("span",null,a.label))})))),"overview"===e&&s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Tendencia de Ventas"),s.createElement("div",{className:"h-64"},B?s.createElement(g.N1,{data:B,options:q}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("div",{className:"text-center"},s.createElement(o.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de ventas"))))),s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Productos Más Vendidos"),s.createElement("div",{className:"space-y-3"},Array.isArray(D.top_products)&&D.top_products.slice(0,5).map(((e,t)=>s.createElement("div",{key:t,className:"flex items-center justify-between p-3 bg-venezia-50 rounded-lg"},s.createElement("div",null,s.createElement("p",{className:"font-medium text-venezia-900"},e.name),s.createElement("p",{className:"text-sm text-venezia-600"},e.units_sold," unidades")),s.createElement("div",{className:"text-right"},s.createElement("p",{className:"font-medium text-venezia-900"},"$",e.revenue?.toFixed(2)),s.createElement("p",{className:"text-sm text-venezia-600"},e.percentage?.toFixed(1),"% del total")))))||s.createElement("div",{className:"text-center py-8"},s.createElement(n.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de productos")))),s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Rendimiento por Tienda"),P.by_store&&P.by_store.length>1?s.createElement("div",null,s.createElement("div",{className:"h-64 mb-4"},s.createElement(g.yP,{data:{labels:P.by_store.map((e=>e.name)),datasets:[{label:"Ventas",data:P.by_store.map((e=>e.revenue||0)),backgroundColor:"rgba(251, 191, 36, 0.8)",borderRadius:4,yAxisID:"y"},{label:"Órdenes",data:P.by_store.map((e=>e.orders||0)),backgroundColor:"rgba(59, 130, 246, 0.8)",borderRadius:4,yAxisID:"y1"}]},options:{...q,scales:{y:{type:"linear",display:!0,position:"left",ticks:{callback:function(e){return(0,h.vv)(e)}}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{callback:function(e){return(0,h.ZV)(e)}}},x:{...q.scales.x}}}})),s.createElement("div",{className:"space-y-2"},P.by_store.map(((e,t)=>s.createElement("div",{key:t,className:"flex items-center justify-between p-2 text-sm"},s.createElement("span",{className:"text-venezia-700"},e.name),s.createElement("span",{className:"font-medium"},"Ticket: ",(0,h.vv)(e.avg_ticket||0))))))):s.createElement("div",{className:"space-y-3"},Array.isArray(P.by_store)&&P.by_store.map(((e,t)=>s.createElement("div",{key:t,className:"flex items-center justify-between p-3 bg-venezia-50 rounded-lg"},s.createElement("div",null,s.createElement("p",{className:"font-medium text-venezia-900"},e.name),s.createElement("p",{className:"text-sm text-venezia-600"},(0,h.ZV)(e.orders)," órdenes")),s.createElement("div",{className:"text-right"},s.createElement("p",{className:"font-medium text-venezia-900"},(0,h.vv)(e.revenue)),s.createElement("p",{className:"text-sm text-venezia-600"},(0,h.vv)(e.avg_ticket)," ticket promedio")))))||s.createElement("div",{className:"text-center py-8"},s.createElement(o.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos por tienda")))),s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Métodos de Pago"),s.createElement("div",{className:"h-64"},G?s.createElement(g.nu,{data:G,options:{...q,scales:void 0,plugins:{...q.plugins,tooltip:{...q.plugins.tooltip,callbacks:{label:function(e){return`${e.label||""}: ${(0,h.vv)(e.parsed)} (${(e.parsed/e.dataset.data.reduce(((e,t)=>e+t),0)*100).toFixed(1)}%)`}}}}}}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("div",{className:"text-center"},s.createElement(d.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de métodos de pago"))))),s.createElement("div",{className:"card p-6 lg:col-span-2"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Análisis de Rentabilidad de Recetas"),D.recipe_profitability&&D.recipe_profitability.length>0?s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.createElement("div",{className:"h-64"},s.createElement(g.yP,{data:{labels:D.recipe_profitability.slice(0,10).map((e=>e.recipe_name)),datasets:[{label:"Margen de Ganancia (%)",data:D.recipe_profitability.slice(0,10).map((e=>e.profit_margin||0)),backgroundColor:D.recipe_profitability.slice(0,10).map((e=>e.profit_margin>=50?"rgba(34, 197, 94, 0.8)":e.profit_margin>=30?"rgba(251, 191, 36, 0.8)":"rgba(239, 68, 68, 0.8)")),borderRadius:4}]},options:{...q,plugins:{...q.plugins,legend:{display:!1},tooltip:{...q.plugins.tooltip,callbacks:{label:function(e){return`Margen: ${e.parsed.y.toFixed(1)}%`}}}},scales:{...q.scales,y:{...q.scales.y,ticks:{callback:function(e){return e+"%"}}}}}})),s.createElement("div",{className:"space-y-3"},s.createElement("h4",{className:"text-md font-semibold text-venezia-700"},"Top 5 Recetas Más Rentables"),D.recipe_profitability.slice(0,5).map(((e,t)=>s.createElement("div",{key:t,className:"flex items-center justify-between p-3 bg-venezia-50 rounded-lg"},s.createElement("div",null,s.createElement("p",{className:"font-medium text-venezia-900"},e.recipe_name),s.createElement("p",{className:"text-sm text-venezia-600"},"Costo: ",(0,h.vv)(e.cost)," | Precio: ",(0,h.vv)(e.price))),s.createElement("div",{className:"text-right"},s.createElement("p",{className:"font-bold "+(e.profit_margin>=50?"text-green-600":e.profit_margin>=30?"text-yellow-600":"text-red-600")},e.profit_margin?.toFixed(1),"%"),s.createElement("p",{className:"text-sm text-venezia-600"},(0,h.vv)(e.profit)," ganancia"))))))):s.createElement("div",{className:"h-32 flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("div",{className:"text-center"},s.createElement(n.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de rentabilidad de recetas"))))),"sales"===e&&s.createElement("div",{className:"space-y-6"},s.createElement("div",{className:"card"},s.createElement("div",{className:"px-6 py-4 border-b border-venezia-200"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900"},"Detalle de Ventas")),s.createElement("div",{className:"p-6"},s.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},s.createElement("div",{className:"text-center p-4 bg-green-50 rounded-lg"},s.createElement("p",{className:"text-2xl font-bold text-green-600"},(0,h.ZV)(P.total_orders||0)),s.createElement("p",{className:"text-sm text-green-600"},"Total de Órdenes")),s.createElement("div",{className:"text-center p-4 bg-blue-50 rounded-lg"},s.createElement("p",{className:"text-2xl font-bold text-blue-600"},(0,h.vv)(P.total_sales||0)),s.createElement("p",{className:"text-sm text-blue-600"},"Ingresos Totales")),s.createElement("div",{className:"text-center p-4 bg-purple-50 rounded-lg"},s.createElement("p",{className:"text-2xl font-bold text-purple-600"},(0,h.vv)(P.avg_ticket||0)),s.createElement("p",{className:"text-sm text-purple-600"},"Ticket Promedio"))),s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.createElement("div",null,s.createElement("h4",{className:"text-md font-semibold text-venezia-900 mb-4"},"Ventas por Hora"),s.createElement("div",{className:"h-64"},P.hourly_sales&&P.hourly_sales.length>0?s.createElement(g.yP,{data:{labels:P.hourly_sales.map((e=>`${e.hour}:00`)),datasets:[{label:"Ventas",data:P.hourly_sales.map((e=>e.revenue||0)),backgroundColor:"rgba(59, 130, 246, 0.8)",borderRadius:4}]},options:{...q,plugins:{...q.plugins,legend:{display:!1}}}}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos por hora")))),s.createElement("div",null,s.createElement("h4",{className:"text-md font-semibold text-venezia-900 mb-4"},"Comparación con Período Anterior"),s.createElement("div",{className:"h-64"},P.comparison&&P.comparison.current&&P.comparison.previous?s.createElement(g.N1,{data:{labels:P.comparison.labels||[],datasets:[{label:"Período Actual",data:P.comparison.current,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4},{label:"Período Anterior",data:P.comparison.previous,borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",tension:.4,borderDash:[5,5]}]},options:q}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos de comparación"))))),s.createElement("div",{className:"mt-6"},s.createElement("h4",{className:"text-md font-semibold text-venezia-900 mb-4"},"Rendimiento Semanal"),s.createElement("div",{className:"h-64"},P.weekly_performance&&P.weekly_performance.length>0?s.createElement(g.yP,{data:{labels:["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],datasets:[{label:"Ventas Promedio",data:P.weekly_performance.map((e=>e.avg_revenue||0)),backgroundColor:"rgba(251, 191, 36, 0.8)",borderRadius:8}]},options:q}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos semanales"))))))),"products"===e&&s.createElement("div",{className:"space-y-6"},s.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},s.createElement("div",{className:"card p-6 text-center"},s.createElement(n.A,{className:"h-10 w-10 mx-auto text-venezia-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(D.total_products||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Productos Activos")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(p.A,{className:"h-10 w-10 mx-auto text-green-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(D.total_units_sold||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Unidades Vendidas")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(x.A,{className:"h-10 w-10 mx-auto text-blue-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.vv)(D.inventory_total_value||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Valor en Inventario")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(v.A,{className:"h-10 w-10 mx-auto text-red-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(D.low_stock_count||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Productos Bajo Stock"))),s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Rendimiento por Categoría"),s.createElement("div",{className:"h-64"},H?s.createElement(g.yP,{data:H,options:q}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos por categoría")))),s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Valor de Inventario Top 10"),s.createElement("div",{className:"h-64"},U?s.createElement(g.yP,{data:U,options:{...q,indexAxis:"y",plugins:{...q.plugins,legend:{display:!1}}}}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos de inventario"))))),s.createElement("div",{className:"card"},s.createElement("div",{className:"px-6 py-4 border-b border-venezia-200"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900"},"Top 20 Productos")),s.createElement("div",{className:"overflow-x-auto"},s.createElement("table",{className:"min-w-full divide-y divide-venezia-200"},s.createElement("thead",{className:"bg-venezia-50"},s.createElement("tr",null,s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Producto"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Unidades Vendidas"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Ingresos"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"% del Total"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Precio Promedio"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Margen"))),s.createElement("tbody",{className:"bg-white divide-y divide-venezia-200"},Array.isArray(D.top_products)&&D.top_products.slice(0,20).map(((e,t)=>s.createElement("tr",{key:t,className:"hover:bg-venezia-50"},s.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.createElement("div",{className:"text-sm font-medium text-venezia-900"},e.name),s.createElement("div",{className:"text-sm text-venezia-500"},e.category)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.ZV)(e.units_sold)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.vv)(e.revenue)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},s.createElement("div",{className:"flex items-center"},s.createElement("span",null,e.percentage?.toFixed(1),"%"),s.createElement("div",{className:"ml-2 w-16 bg-venezia-200 rounded-full h-2"},s.createElement("div",{className:"bg-venezia-600 h-2 rounded-full",style:{width:`${Math.min(e.percentage||0,100)}%`}})))),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.vv)(e.avg_price)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm"},s.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.margin>=50?"bg-green-100 text-green-800":e.margin>=30?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800")},e.margin?.toFixed(1)||0,"%")))))||s.createElement("tr",null,s.createElement("td",{colSpan:"6",className:"px-6 py-12 text-center"},s.createElement(n.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de productos para mostrar")))))))),"customers"===e&&s.createElement("div",{className:"space-y-6"},s.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},s.createElement("div",{className:"card p-6 text-center"},s.createElement(c.A,{className:"h-10 w-10 mx-auto text-venezia-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(j.unique_customers||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Clientes Únicos"),s.createElement("p",{className:"text-xs mt-1 "+(j.customers_growth>=0?"text-green-600":"text-red-600")},j.customers_growth>=0?"+":"",j.customers_growth?.toFixed(1)||"0","%")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(o.A,{className:"h-10 w-10 mx-auto text-green-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(j.returning_customers||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Clientes Recurrentes"),s.createElement("p",{className:"text-xs text-venezia-500 mt-1"},(j.returning_customers/j.unique_customers*100||0).toFixed(1),"% de retención")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(r.A,{className:"h-10 w-10 mx-auto text-blue-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.vv)(j.avg_customer_value||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Valor Promedio"),s.createElement("p",{className:"text-xs mt-1 "+(j.value_growth>=0?"text-green-600":"text-red-600")},j.value_growth>=0?"+":"",j.value_growth?.toFixed(1)||"0","%")),s.createElement("div",{className:"card p-6 text-center"},s.createElement(p.A,{className:"h-10 w-10 mx-auto text-purple-600 mb-3"}),s.createElement("p",{className:"text-2xl font-bold text-venezia-900"},(0,h.ZV)(j.avg_orders_per_customer?.toFixed(1)||0)),s.createElement("p",{className:"text-sm text-venezia-600"},"Órdenes por Cliente"),s.createElement("p",{className:"text-xs text-venezia-500 mt-1"},"Frecuencia promedio"))),s.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Segmentación de Clientes"),s.createElement("div",{className:"h-64"},j.segments&&j.segments.length>0?s.createElement(g.Fq,{data:{labels:j.segments.map((e=>e.name)),datasets:[{data:j.segments.map((e=>e.count)),backgroundColor:["rgba(251, 191, 36, 0.8)","rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(239, 68, 68, 0.8)"]}]},options:{...q,scales:void 0,plugins:{...q.plugins,tooltip:{...q.plugins.tooltip,callbacks:{label:function(e){const t=e.label||"",a=e.parsed,s=(a/e.dataset.data.reduce(((e,t)=>e+t),0)*100).toFixed(1);return`${t}: ${(0,h.ZV)(a)} (${s}%)`}}}}}}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos de segmentación"))),j.segments&&s.createElement("div",{className:"mt-4 space-y-2"},j.segments.map(((e,t)=>s.createElement("div",{key:t,className:"flex justify-between items-center text-sm"},s.createElement("span",{className:"text-venezia-700"},e.name),s.createElement("span",{className:"font-medium"},(0,h.vv)(e.revenue||0))))))),s.createElement("div",{className:"card p-6"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900 mb-4"},"Valor de Vida del Cliente (CLV)"),s.createElement("div",{className:"h-64"},j.clv_distribution&&j.clv_distribution.length>0?s.createElement(g.yP,{data:{labels:j.clv_distribution.map((e=>e.range)),datasets:[{label:"Número de Clientes",data:j.clv_distribution.map((e=>e.count)),backgroundColor:"rgba(168, 85, 247, 0.8)",borderRadius:4}]},options:{...q,scales:{...q.scales,y:{...q.scales.y,ticks:{callback:function(e){return(0,h.ZV)(e)}}}}}}):s.createElement("div",{className:"h-full flex items-center justify-center bg-venezia-50 rounded-lg"},s.createElement("p",{className:"text-venezia-600"},"No hay datos de CLV"))))),s.createElement("div",{className:"card"},s.createElement("div",{className:"px-6 py-4 border-b border-venezia-200"},s.createElement("h3",{className:"text-lg font-semibold text-venezia-900"},"Top 10 Clientes")),s.createElement("div",{className:"overflow-x-auto"},s.createElement("table",{className:"min-w-full divide-y divide-venezia-200"},s.createElement("thead",{className:"bg-venezia-50"},s.createElement("tr",null,s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Cliente"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Órdenes"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Total Gastado"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Ticket Promedio"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Última Compra"),s.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-venezia-500 uppercase"},"Segmento"))),s.createElement("tbody",{className:"bg-white divide-y divide-venezia-200"},Array.isArray(j.top_customers)&&j.top_customers.slice(0,10).map(((e,t)=>s.createElement("tr",{key:t,className:"hover:bg-venezia-50"},s.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.createElement("div",{className:"text-sm font-medium text-venezia-900"},e.name||"Cliente Anónimo"),s.createElement("div",{className:"text-sm text-venezia-500"},e.email||e.phone||"Sin contacto")),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.ZV)(e.order_count)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.vv)(e.total_spent)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},(0,h.vv)(e.avg_order_value)),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-venezia-900"},e.last_order_date?new Date(e.last_order_date).toLocaleDateString("es-AR"):"N/A"),s.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},s.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("VIP"===e.segment?"bg-purple-100 text-purple-800":"Frecuente"===e.segment?"bg-green-100 text-green-800":"Regular"===e.segment?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800")},e.segment||"Nuevo")))))||s.createElement("tr",null,s.createElement("td",{colSpan:"6",className:"px-6 py-12 text-center"},s.createElement(c.A,{className:"h-12 w-12 mx-auto text-venezia-400 mb-2"}),s.createElement("p",{className:"text-venezia-600"},"No hay datos de clientes para mostrar")))))))))}}}]);