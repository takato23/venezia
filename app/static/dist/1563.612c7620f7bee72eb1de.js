"use strict";(self.webpackChunkvenezia_frontend=self.webpackChunkvenezia_frontend||[]).push([[1563],{11563:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var r=a(96540),l=a(48309),s=a(80697),n=a(93893),m=a(76316),c=a(48110),i=a(41181),o=a(98445),d=a(47504),g=a(43954),x=a(19869),u=a(3160),E=a(98188),y=a(32708),p=a(70700),v=a(42203),b=a(72284),N=a(11562),h=a(71428),k=a(28219),f=a(10607),w=a(48697),A=a(48686),C=a(76069),S=a(32307),j=a(43197),_=a(48852),z=a(67773),P=a(29310),T=({customer:e,onSave:t,onClose:a})=>{const[l,s]=(0,r.useState)({name:"",email:"",phone:"",address:"",birth_date:"",preferences:"",notes:"",status:"active",tags:[]}),[n,m]=(0,r.useState)({});(0,r.useEffect)((()=>{e&&s({name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",birth_date:e.birth_date||"",preferences:e.preferences||"",notes:e.notes||"",status:e.status||"active",tags:e.tags||[]})}),[e]);const c=e=>{const{name:t,value:a}=e.target;s((e=>({...e,[t]:a}))),n[t]&&m((e=>({...e,[t]:""})))};return r.createElement(z.A,{isOpen:!0,onClose:a,size:"lg"},r.createElement("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return l.name.trim()||(e.name="El nombre es requerido"),l.email.trim()?/\S+@\S+\.\S+/.test(l.email)||(e.email="Email inválido"):e.email="El email es requerido",l.phone&&!/^[\d\s\-\+\(\)]+$/.test(l.phone)&&(e.phone="Teléfono inválido"),m(e),0===Object.keys(e).length})()&&t(l)},className:"max-h-[80vh] overflow-y-auto"},r.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 z-10"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white"},e?"Editar Cliente":"Nuevo Cliente"),r.createElement("button",{type:"button",onClick:a,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},r.createElement(w.A,{className:"h-5 w-5"})))),r.createElement("div",{className:"p-6 space-y-6"},r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2"},r.createElement(A.A,{className:"h-5 w-5 text-gray-400"}),"Información Básica"),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Nombre completo *"),r.createElement(N.A,{name:"name",value:l.name,onChange:c,placeholder:"Juan Pérez",error:n.name})),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Estado"),r.createElement(h.A,{name:"status",value:l.status,onChange:c},r.createElement("option",{value:"active"},"Activo"),r.createElement("option",{value:"inactive"},"Inactivo"))))),r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2"},r.createElement(g.A,{className:"h-5 w-5 text-gray-400"}),"Información de Contacto"),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email *"),r.createElement(N.A,{type:"email",name:"email",value:l.email,onChange:c,placeholder:"juan@example.com",error:n.email})),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Teléfono"),r.createElement(N.A,{type:"tel",name:"phone",value:l.phone,onChange:c,placeholder:"+54 11 1234-5678",error:n.phone}))),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},r.createElement(C.A,{className:"h-4 w-4 inline mr-1"}),"Dirección"),r.createElement(N.A,{name:"address",value:l.address,onChange:c,placeholder:"Av. Corrientes 1234, CABA"}))),r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2"},r.createElement(S.A,{className:"h-5 w-5 text-gray-400"}),"Información Adicional"),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Fecha de nacimiento"),r.createElement(N.A,{type:"date",name:"birth_date",value:l.birth_date,onChange:c})),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Preferencias"),r.createElement(N.A,{name:"preferences",value:l.preferences,onChange:c,placeholder:"Ej: Sin azúcar, vegano, etc."}))),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Notas internas"),r.createElement(P.A,{name:"notes",value:l.notes,onChange:c,placeholder:"Información adicional sobre el cliente...",rows:3})),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},r.createElement(j.A,{className:"h-4 w-4 inline mr-1"}),"Etiquetas"),r.createElement("div",{className:"flex flex-wrap gap-2 mb-2"},l.tags.map(((e,t)=>r.createElement("span",{key:t,className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},e,r.createElement("button",{type:"button",onClick:()=>{return t=e,void s((e=>({...e,tags:e.tags.filter((e=>e!==t))})));var t},className:"hover:text-blue-900 dark:hover:text-blue-100"},r.createElement(w.A,{className:"h-3 w-3"})))))),r.createElement(N.A,{placeholder:"Agregar etiqueta y presionar Enter",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),(e=>{e&&!l.tags.includes(e)&&s((t=>({...t,tags:[...t.tags,e]})))})(e.target.value),e.target.value="")}})))),r.createElement("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 px-6 py-4"},r.createElement("div",{className:"flex justify-end gap-3"},r.createElement(b.A,{type:"button",variant:"secondary",onClick:a},"Cancelar"),r.createElement(b.A,{type:"submit",variant:"primary"},r.createElement(_.A,{className:"h-4 w-4 mr-2"}),e?"Actualizar":"Crear"," Cliente")))))},$=a(27235),D=a(86589),I=a(17133),L=a(93823),M=a(20053),O=({customer:e,onClose:t,onEdit:a})=>{const[l,s]=(0,r.useState)("overview"),{data:n,loading:o}=(0,p.Wl)(`/api/customers/${e.id}/purchases`),u={totalSpent:e.total_spent||0,totalOrders:e.total_orders||0,avgOrderValue:e.total_orders?e.total_spent/e.total_orders:0,lastOrderDays:e.last_order_date?Math.floor((new Date-new Date(e.last_order_date))/864e5):null,memberSince:e.created_at?Math.floor((new Date-new Date(e.created_at))/864e5):0},y=(e=>{const t={vip:{label:"VIP",color:"purple",icon:i.A},frequent:{label:"Frecuente",color:"blue",icon:m.A},regular:{label:"Regular",color:"green",icon:c.A},new:{label:"Nuevo",color:"yellow",icon:$.A},inactive:{label:"Inactivo",color:"gray",icon:$.A}};return t[e]||t.new})(e.segment);return r.createElement(z.A,{isOpen:!0,onClose:t,size:"xl"},r.createElement("div",{className:"max-h-[80vh] overflow-y-auto"},r.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 z-10"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",{className:"flex items-center gap-4"},r.createElement("div",{className:"h-16 w-16 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},r.createElement("span",{className:"text-2xl font-medium text-gray-600 dark:text-gray-300"},e.name.charAt(0).toUpperCase())),r.createElement("div",null,r.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white"},e.name),r.createElement("div",{className:"flex items-center gap-3 mt-1"},r.createElement(k.A,{variant:y.color,size:"sm"},r.createElement(y.icon,{className:"h-3 w-3 mr-1"}),y.label),r.createElement(k.A,{variant:"active"===e.status?"success":"gray",size:"sm"},"active"===e.status?"Activo":"Inactivo")))),r.createElement("div",{className:"flex items-center gap-2"},r.createElement(b.A,{variant:"secondary",size:"sm",onClick:a},r.createElement(E.A,{className:"h-4 w-4 mr-1"}),"Editar"),r.createElement("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},r.createElement(w.A,{className:"h-5 w-5"}))))),r.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},r.createElement("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs"},[{id:"overview",label:"Resumen"},{id:"purchases",label:"Historial de Compras"},{id:"communication",label:"Comunicación"}].map((e=>r.createElement("button",{key:e.id,onClick:()=>s(e.id),className:(0,M.A)("py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300")},e.label))))),r.createElement("div",{className:"p-6"},"overview"===l&&r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(D.A,{className:"h-5 w-5 text-green-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Total")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"$",u.totalSpent.toLocaleString()),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Total gastado")),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(c.A,{className:"h-5 w-5 text-blue-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Pedidos")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},u.totalOrders),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Total de pedidos")),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(I.A,{className:"h-5 w-5 text-purple-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Promedio")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"$",Math.round(u.avgOrderValue).toLocaleString()),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Ticket promedio")),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement($.A,{className:"h-5 w-5 text-yellow-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Actividad")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},null!==u.lastOrderDays?`${u.lastOrderDays}d`:"N/A"),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Desde última compra"))),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white"},"Información de Contacto"),r.createElement("div",{className:"space-y-3"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement(g.A,{className:"h-4 w-4 text-gray-400"}),r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Email"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},e.email))),e.phone&&r.createElement("div",{className:"flex items-center gap-3"},r.createElement(x.A,{className:"h-4 w-4 text-gray-400"}),r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Teléfono"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},e.phone))),e.address&&r.createElement("div",{className:"flex items-center gap-3"},r.createElement(C.A,{className:"h-4 w-4 text-gray-400"}),r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Dirección"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},e.address))),e.birth_date&&r.createElement("div",{className:"flex items-center gap-3"},r.createElement(S.A,{className:"h-4 w-4 text-gray-400"}),r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Fecha de nacimiento"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},new Date(e.birth_date).toLocaleDateString()))))),r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white"},"Información Adicional"),r.createElement("div",{className:"space-y-3"},r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Cliente desde"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},new Date(e.created_at).toLocaleDateString(),"(",u.memberSince," días)")),e.preferences&&r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Preferencias"),r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},e.preferences)),e.tags&&e.tags.length>0&&r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2"},"Etiquetas"),r.createElement("div",{className:"flex flex-wrap gap-2"},e.tags.map(((e,t)=>r.createElement("span",{key:t,className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300"},e))))),e.notes&&r.createElement("div",null,r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"Notas"),r.createElement("div",{className:"text-sm text-gray-900 dark:text-white"},e.notes)))))),"purchases"===l&&r.createElement("div",null,o?r.createElement("div",{className:"flex justify-center py-8"},r.createElement(L.A,{size:"lg"})):n&&n.length>0?r.createElement("div",{className:"space-y-4"},n.map((e=>r.createElement("div",{key:e.id,className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement("div",{className:"flex items-center gap-3"},r.createElement(c.A,{className:"h-5 w-5 text-gray-400"}),r.createElement("div",null,r.createElement("div",{className:"font-medium text-gray-900 dark:text-white"},"Pedido #",e.order_number),r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},new Date(e.created_at).toLocaleString()))),r.createElement("div",{className:"text-right"},r.createElement("div",{className:"font-medium text-gray-900 dark:text-white"},"$",e.total.toLocaleString()),r.createElement(k.A,{variant:"completed"===e.status?"success":"warning",size:"sm"},"completed"===e.status?"Completado":"Pendiente"))),e.items&&e.items.length>0&&r.createElement("div",{className:"mt-3 space-y-1"},e.items.map(((e,t)=>r.createElement("div",{key:t,className:"text-sm text-gray-600 dark:text-gray-300"},e.quantity,"x ",e.product_name," - $",e.subtotal)))))))):r.createElement("div",{className:"text-center py-8"},r.createElement(c.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"No hay historial de compras"))),"communication"===l&&r.createElement("div",{className:"space-y-4"},r.createElement("div",{className:"flex justify-between items-center mb-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white"},"Historial de Comunicaciones"),r.createElement(b.A,{variant:"primary",size:"sm"},r.createElement(d.A,{className:"h-4 w-4 mr-2"}),"Nueva Comunicación")),r.createElement("div",{className:"text-center py-8"},r.createElement(d.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"No hay comunicaciones registradas"))))))},q=a(74180),F=a(21767),V=a(80964),R=({customers:e})=>{const[t,a]=(0,r.useState)(!1),[l,s]=(0,r.useState)("overview"),n=[{id:"bronze",name:"Bronce",color:"orange",minSpent:0,maxSpent:1e4,benefits:["5% de descuento","Promociones exclusivas"],icon:q.A},{id:"silver",name:"Plata",color:"gray",minSpent:1e4,maxSpent:5e4,benefits:["10% de descuento","Envío gratis","Acceso anticipado"],icon:q.A},{id:"gold",name:"Oro",color:"yellow",minSpent:5e4,maxSpent:null,benefits:["15% de descuento","Envío gratis prioritario","Regalos especiales","Atención VIP"],icon:i.A}],m=e.reduce(((e,t)=>{const a=t.total_spent||0,r=n.find((e=>a>=e.minSpent&&(null===e.maxSpent||a<e.maxSpent)));return r&&(e[r.id]||(e[r.id]={...r,customers:[]}),e[r.id].customers.push(t)),e}),{}),c=Object.values(m).reduce(((e,t)=>e+t.customers.length),0);return r.createElement(r.Fragment,null,r.createElement(b.A,{variant:"secondary",size:"sm",onClick:()=>a(!0)},r.createElement(F.A,{className:"h-4 w-4 mr-1"}),"Programa de Fidelización"),r.createElement(z.A,{isOpen:t,onClose:()=>a(!1),size:"xl"},r.createElement("div",{className:"max-h-[80vh] overflow-y-auto"},r.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 z-10"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",null,r.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white"},"Programa de Fidelización"),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},c," clientes activos en el programa")),r.createElement(b.A,{variant:"secondary",size:"sm"},r.createElement(V.A,{className:"h-4 w-4 mr-1"}),"Configurar"))),r.createElement("div",{className:"border-b border-gray-200 dark:border-gray-700"},r.createElement("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs"},[{id:"overview",label:"Resumen"},{id:"members",label:"Miembros"},{id:"rewards",label:"Recompensas"}].map((e=>r.createElement("button",{key:e.id,onClick:()=>s(e.id),className:(0,M.A)("py-3 px-1 border-b-2 font-medium text-sm transition-colors",l===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300")},e.label))))),r.createElement("div",{className:"p-6"},"overview"===l&&r.createElement("div",{className:"space-y-6"},r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.map((e=>{const t=m[e.id],a=t?.customers.length||0,l=c>0?Math.round(a/c*100):0;return r.createElement("div",{key:e.id,className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6"},r.createElement("div",{className:"flex items-center justify-between mb-4"},r.createElement("div",{className:(0,M.A)("p-3 rounded-lg","bronze"===e.id&&"bg-orange-100 dark:bg-orange-900/20","silver"===e.id&&"bg-gray-100 dark:bg-gray-900/20","gold"===e.id&&"bg-yellow-100 dark:bg-yellow-900/20")},r.createElement(e.icon,{className:(0,M.A)("h-6 w-6","bronze"===e.id&&"text-orange-600 dark:text-orange-400","silver"===e.id&&"text-gray-600 dark:text-gray-400","gold"===e.id&&"text-yellow-600 dark:text-yellow-400")})),r.createElement(k.A,{variant:e.color,size:"sm"},e.name)),r.createElement("div",{className:"mb-4"},r.createElement("div",{className:"text-3xl font-bold text-gray-900 dark:text-white"},a),r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},l,"% de miembros")),r.createElement("div",{className:"space-y-2"},r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400"},"Requisito: $",e.minSpent.toLocaleString(),e.maxSpent&&` - $${e.maxSpent.toLocaleString()}`),r.createElement("div",{className:"text-xs text-gray-600 dark:text-gray-300"},r.createElement("div",{className:"font-medium mb-1"},"Beneficios:"),r.createElement("ul",{className:"space-y-1"},e.benefits.map(((e,t)=>r.createElement("li",{key:t,className:"flex items-start gap-1"},r.createElement("span",{className:"text-green-500"},"•"),e)))))))}))),r.createElement("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6"},r.createElement("h3",{className:"text-lg font-medium text-blue-900 dark:text-blue-100 mb-4"},"Estadísticas del Programa"),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},r.createElement("div",null,r.createElement("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100"},c),r.createElement("div",{className:"text-sm text-blue-700 dark:text-blue-300"},"Miembros activos")),r.createElement("div",null,r.createElement("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100"},"$",e.reduce(((e,t)=>e+(t.total_spent||0)),0).toLocaleString()),r.createElement("div",{className:"text-sm text-blue-700 dark:text-blue-300"},"Ingresos totales")),r.createElement("div",null,r.createElement("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100"},"12%"),r.createElement("div",{className:"text-sm text-blue-700 dark:text-blue-300"},"Tasa de retención")),r.createElement("div",null,r.createElement("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100"},"$25,000"),r.createElement("div",{className:"text-sm text-blue-700 dark:text-blue-300"},"Descuentos otorgados"))))),"members"===l&&r.createElement("div",{className:"space-y-4"},n.map((e=>{const t=m[e.id];return t&&0!==t.customers.length?r.createElement("div",{key:e.id,className:"space-y-2"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white flex items-center gap-2"},r.createElement(e.icon,{className:(0,M.A)("h-5 w-5","bronze"===e.id&&"text-orange-500","silver"===e.id&&"text-gray-500","gold"===e.id&&"text-yellow-500")}),e.name,r.createElement(k.A,{variant:"gray",size:"sm"},t.customers.length)),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"},t.customers.slice(0,6).map((e=>r.createElement("div",{key:e.id,className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-3"},r.createElement("div",{className:"font-medium text-gray-900 dark:text-white"},e.name),r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},"$",(e.total_spent||0).toLocaleString()," gastados"),r.createElement("div",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1"},e.total_orders||0," pedidos"))))),t.customers.length>6&&r.createElement("button",{className:"text-sm text-blue-600 dark:text-blue-400 hover:underline"},"Ver ",t.customers.length-6," más")):null}))),"rewards"===l&&r.createElement("div",{className:"space-y-4"},r.createElement("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-6"},r.createElement("h3",{className:"text-lg font-medium text-yellow-900 dark:text-yellow-100 mb-3"},"Próximas Recompensas"),r.createElement("p",{className:"text-sm text-yellow-700 dark:text-yellow-300"},"Sistema de recompensas automáticas próximamente disponible")),r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},r.createElement("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},r.createElement("h4",{className:"font-medium text-gray-900 dark:text-white mb-2"},"Cupón de Cumpleaños"),r.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"20% de descuento automático en el mes de cumpleaños")),r.createElement("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4"},r.createElement("h4",{className:"font-medium text-gray-900 dark:text-white mb-2"},"Bonus por Referidos"),r.createElement("p",{className:"text-sm text-gray-600 dark:text-gray-300"},"$500 de crédito por cada nuevo cliente referido"))))))))},H=a(27775),B=({customers:e,onClose:t})=>{const[a,l]=(0,r.useState)("email"),[s,n]=(0,r.useState)("all"),[m,c]=(0,r.useState)("all"),[i,o]=(0,r.useState)(""),[u,E]=(0,r.useState)(""),[y,p]=(0,r.useState)(""),[k,f]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),{success:j,error:_}=(0,v.d)(),T=(()=>{let t=[...e];return"segment"===s&&"all"!==m?t=t.filter((e=>e.segment===m)):"custom"===s&&(t=A),t})();return r.createElement(z.A,{isOpen:!0,onClose:t,size:"xl"},r.createElement("div",{className:"max-h-[80vh] overflow-y-auto"},r.createElement("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 z-10"},r.createElement("div",{className:"flex items-center justify-between"},r.createElement("div",null,r.createElement("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white"},"Centro de Comunicación"),r.createElement("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},"Envía mensajes personalizados a tus clientes")),r.createElement("button",{onClick:t,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},r.createElement(w.A,{className:"h-5 w-5"})))),r.createElement("div",{className:"p-6"},r.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},r.createElement("div",{className:"lg:col-span-2 space-y-6"},r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Tipo de mensaje"),r.createElement("div",{className:"grid grid-cols-3 gap-2"},[{id:"email",label:"Email",icon:g.A},{id:"sms",label:"SMS",icon:x.A},{id:"whatsapp",label:"WhatsApp",icon:d.A}].map((e=>r.createElement("button",{key:e.id,onClick:()=>l(e.id),className:(0,M.A)("flex items-center justify-center gap-2 p-3 rounded-lg border transition-colors",a===e.id?"border-blue-500 bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700")},r.createElement(e.icon,{className:"h-4 w-4"}),e.label))))),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Destinatarios"),r.createElement(h.A,{value:s,onChange:e=>n(e.target.value),className:"mb-2"},r.createElement("option",{value:"all"},"Todos los clientes (",e.length,")"),r.createElement("option",{value:"segment"},"Por segmento"),r.createElement("option",{value:"custom"},"Selección personalizada")),"segment"===s&&r.createElement(h.A,{value:m,onChange:e=>c(e.target.value)},r.createElement("option",{value:"all"},"Todos los segmentos"),r.createElement("option",{value:"vip"},"VIP"),r.createElement("option",{value:"frequent"},"Frecuente"),r.createElement("option",{value:"regular"},"Regular"),r.createElement("option",{value:"new"},"Nuevo"),r.createElement("option",{value:"inactive"},"Inactivo")),"custom"===s&&r.createElement("div",{className:"mt-2 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg max-h-40 overflow-y-auto"},e.map((e=>r.createElement("label",{key:e.id,className:"flex items-center gap-2 py-1 cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-800 px-2 rounded"},r.createElement("input",{type:"checkbox",checked:A.some((t=>t.id===e.id)),onChange:()=>(e=>{C((t=>t.find((t=>t.id===e.id))?t.filter((t=>t.id!==e.id)):[...t,e]))})(e),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.createElement("span",{className:"text-sm text-gray-700 dark:text-gray-300"},e.name))))),r.createElement("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400"},T.length," destinatario",1!==T.length&&"s"," seleccionado",1!==T.length&&"s")),"email"===a&&r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Asunto"),r.createElement(N.A,{value:i,onChange:e=>o(e.target.value),placeholder:"Ingresa el asunto del mensaje"})),r.createElement("div",null,r.createElement("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Mensaje"),r.createElement(P.A,{value:u,onChange:e=>E(e.target.value),placeholder:"Escribe tu mensaje aquí...",rows:6}),r.createElement("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"Usa ","{nombre}"," para personalizar el mensaje")),r.createElement("div",null,r.createElement("label",{className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},r.createElement(S.A,{className:"h-4 w-4"}),"Programar envío (opcional)"),r.createElement("div",{className:"grid grid-cols-2 gap-2"},r.createElement(N.A,{type:"date",value:y,onChange:e=>p(e.target.value),min:(new Date).toISOString().split("T")[0]}),r.createElement(N.A,{type:"time",value:k,onChange:e=>f(e.target.value)})))),r.createElement("div",{className:"space-y-4"},r.createElement("h3",{className:"text-lg font-medium text-gray-900 dark:text-white"},"Plantillas"),r.createElement("div",{className:"space-y-2"},[{id:"birthday",name:"Cumpleaños",subject:"¡Feliz Cumpleaños! 🎂",message:"Hola {nombre},\n\n¡Feliz cumpleaños! En tu día especial, queremos regalarte un 20% de descuento en tu próxima compra.\n\nCódigo: CUMPLE20\n\n¡Esperamos verte pronto!"},{id:"promotion",name:"Promoción",subject:"Oferta Especial para Ti 🎁",message:"Hola {nombre},\n\nTenemos una oferta especial solo para nuestros clientes favoritos:\n\n2x1 en todos los helados artesanales este fin de semana.\n\n¡No te lo pierdas!"},{id:"loyalty",name:"Programa de Fidelidad",subject:"¡Felicitaciones! Has subido de nivel 🌟",message:"Hola {nombre},\n\n¡Excelentes noticias! Has alcanzado el nivel {nivel} en nuestro programa de fidelidad.\n\nAhora disfrutas de:\n- {beneficios}\n\n¡Gracias por tu preferencia!"},{id:"reminder",name:"Recordatorio",subject:"Te extrañamos 💙",message:"Hola {nombre},\n\nHace tiempo que no nos visitas. Te esperamos con tus sabores favoritos y algunas novedades que seguro te encantarán.\n\nComo agradecimiento, aquí tienes un 15% de descuento: VUELVE15"}].map((e=>r.createElement("button",{key:e.id,onClick:()=>(e=>{o(e.subject),E(e.message)})(e),className:"w-full text-left p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"},r.createElement("div",{className:"font-medium text-gray-900 dark:text-white"},e.name),r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1"},e.subject))))),r.createElement("div",{className:"bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4"},r.createElement("h4",{className:"font-medium text-gray-900 dark:text-white mb-2"},"Vista previa"),T.length>0&&r.createElement("div",{className:"text-sm space-y-2"},r.createElement("div",null,r.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Para:"),r.createElement("div",{className:"text-gray-700 dark:text-gray-300"},T[0].name,T.length>1&&r.createElement("span",{className:"text-gray-500 dark:text-gray-400"}," ","y ",T.length-1," más"))),"email"===a&&i&&r.createElement("div",null,r.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Asunto:"),r.createElement("div",{className:"text-gray-700 dark:text-gray-300"},i)),u&&r.createElement("div",null,r.createElement("span",{className:"text-gray-500 dark:text-gray-400"},"Mensaje:"),r.createElement("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap"},u.replace("{nombre}",T[0].name)))))))),r.createElement("div",{className:"sticky bottom-0 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700 px-6 py-4"},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},y&&k&&r.createElement("span",{className:"flex items-center gap-1"},r.createElement($.A,{className:"h-4 w-4"}),"Programado para ",new Date(`${y} ${k}`).toLocaleString())),r.createElement("div",{className:"flex gap-3"},r.createElement(b.A,{variant:"secondary",onClick:t},"Cancelar"),r.createElement(b.A,{variant:"primary",onClick:async()=>{if(i.trim()&&u.trim())if(0!==T.length)try{await new Promise((e=>setTimeout(e,1e3))),j("Mensaje enviado",`Se envió el mensaje a ${T.length} cliente${T.length>1?"s":""}`),t()}catch(e){_("Error","No se pudo enviar el mensaje")}else _("Error","No hay destinatarios seleccionados");else _("Error","Por favor completa el asunto y mensaje")},disabled:0===T.length},r.createElement(H.A,{className:"h-4 w-4 mr-2"}),y?"Programar":"Enviar"," Mensaje"))))))},U=()=>{const[e,t]=(0,r.useState)(""),[a,w]=(0,r.useState)("all"),[A,C]=(0,r.useState)("all"),[S,j]=(0,r.useState)(!1),[_,z]=(0,r.useState)(null),[P,$]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),[L,M]=(0,r.useState)("recent"),{success:q,error:F}=(0,v.d)(),{data:V,loading:H,error:U,refetch:G}=(0,p.Wl)("/api/customers"),W=V?.customers||[],J={vip:{label:"VIP",color:"purple",criteria:"Más de $50,000 en compras"},frequent:{label:"Frecuente",color:"blue",criteria:"Más de 10 compras"},regular:{label:"Regular",color:"green",criteria:"3-10 compras"},new:{label:"Nuevo",color:"yellow",criteria:"Menos de 3 compras"},inactive:{label:"Inactivo",color:"gray",criteria:"Sin compras en 60+ días"}},K=(0,r.useMemo)((()=>{if(!W.length)return null;const e=W.filter((e=>"active"===e.status)).length,t=W.reduce(((e,t)=>e+(t.total_spent||0)),0),a=t/W.length,r=W.filter((e=>"vip"===e.segment)).length;return{total:W.length,active:e,revenue:t,avgOrder:a,vip:r}}),[W]),Q=(0,r.useMemo)((()=>{let t=[...W];switch(e&&(t=t.filter((t=>t.name.toLowerCase().includes(e.toLowerCase())||t.email.toLowerCase().includes(e.toLowerCase())||t.phone?.includes(e)))),"all"!==a&&(t=t.filter((e=>e.status===a))),"all"!==A&&(t=t.filter((e=>e.segment===A))),L){case"name":t.sort(((e,t)=>e.name.localeCompare(t.name)));break;case"spent":t.sort(((e,t)=>(t.total_spent||0)-(e.total_spent||0)));break;case"orders":t.sort(((e,t)=>(t.total_orders||0)-(e.total_orders||0)));break;default:t.sort(((e,t)=>new Date(t.last_order_date||0)-new Date(e.last_order_date||0)))}return t}),[W,e,a,A,L]);return H&&!W.length?r.createElement(f.A,{message:"Cargando clientes..."}):r.createElement("div",{className:"page-container"},r.createElement("div",{className:"page-header"},r.createElement("div",null,r.createElement("h1",{className:"page-title"},"Gestión de Clientes"),r.createElement("p",{className:"page-subtitle"},"Administra tu base de clientes y programa de fidelización")),r.createElement("div",{className:"flex gap-3"},r.createElement(b.A,{variant:"secondary",onClick:()=>{}},r.createElement(l.A,{className:"h-4 w-4 mr-2"}),"Exportar"),r.createElement(b.A,{variant:"primary",onClick:()=>{z(null),j(!0)}},r.createElement(s.A,{className:"h-4 w-4 mr-2"}),"Nuevo Cliente"))),K&&r.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},r.createElement("div",{className:"stat-card"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(n.A,{className:"h-5 w-5 text-gray-400"}),r.createElement("span",{className:"text-xs text-gray-500"},"Total")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},K.total),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Clientes registrados")),r.createElement("div",{className:"stat-card"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(m.A,{className:"h-5 w-5 text-green-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Activos")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},K.active),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Clientes activos")),r.createElement("div",{className:"stat-card"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(c.A,{className:"h-5 w-5 text-blue-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Ingresos")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"$",K.revenue.toLocaleString()),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Total generado")),r.createElement("div",{className:"stat-card"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(c.A,{className:"h-5 w-5 text-yellow-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"Ticket promedio")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},"$",Math.round(K.avgOrder).toLocaleString()),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Por cliente")),r.createElement("div",{className:"stat-card"},r.createElement("div",{className:"flex items-center justify-between mb-2"},r.createElement(i.A,{className:"h-5 w-5 text-purple-500"}),r.createElement("span",{className:"text-xs text-gray-500"},"VIP")),r.createElement("div",{className:"text-2xl font-bold text-gray-900 dark:text-white"},K.vip),r.createElement("div",{className:"text-sm text-gray-600 dark:text-gray-400"},"Clientes VIP"))),r.createElement("div",{className:"card p-4 mb-6"},r.createElement("div",{className:"flex flex-wrap gap-4"},r.createElement("div",{className:"flex-1 min-w-[200px]"},r.createElement("div",{className:"relative"},r.createElement(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.createElement(N.A,{type:"text",placeholder:"Buscar por nombre, email o teléfono...",value:e,onChange:e=>t(e.target.value),className:"pl-10"}))),r.createElement(h.A,{value:a,onChange:e=>w(e.target.value),className:"w-40"},r.createElement("option",{value:"all"},"Todos los estados"),r.createElement("option",{value:"active"},"Activos"),r.createElement("option",{value:"inactive"},"Inactivos")),r.createElement(h.A,{value:A,onChange:e=>C(e.target.value),className:"w-40"},r.createElement("option",{value:"all"},"Todos los segmentos"),Object.entries(J).map((([e,t])=>r.createElement("option",{key:e,value:e},t.label)))),r.createElement(h.A,{value:L,onChange:e=>M(e.target.value),className:"w-40"},r.createElement("option",{value:"recent"},"Más recientes"),r.createElement("option",{value:"name"},"Nombre"),r.createElement("option",{value:"spent"},"Mayor gasto"),r.createElement("option",{value:"orders"},"Más pedidos")),r.createElement("div",{className:"flex gap-2"},r.createElement(b.A,{variant:"secondary",size:"sm",onClick:()=>I(!0)},r.createElement(d.A,{className:"h-4 w-4 mr-1"}),"Comunicación"),r.createElement(R,{customers:W})))),r.createElement("div",{className:"card overflow-hidden"},r.createElement("div",{className:"overflow-x-auto"},r.createElement("table",{className:"w-full"},r.createElement("thead",null,r.createElement("tr",{className:"border-b border-gray-200 dark:border-gray-700"},r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Cliente"),r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Contacto"),r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Segmento"),r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Compras"),r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Total Gastado"),r.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Última Compra"),r.createElement("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Acciones"))),r.createElement("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Q.map((e=>r.createElement("tr",{key:e.id,className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement("div",{className:"flex items-center"},r.createElement("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center"},r.createElement("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300"},e.name.charAt(0).toUpperCase())),r.createElement("div",{className:"ml-4"},r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},e.name),e.preferences&&r.createElement("div",{className:"text-xs text-gray-500 dark:text-gray-400"},"Preferencias: ",e.preferences)))),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement("div",{className:"text-sm text-gray-900 dark:text-white flex items-center gap-1"},r.createElement(g.A,{className:"h-3 w-3 text-gray-400"}),e.email),e.phone&&r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center gap-1"},r.createElement(x.A,{className:"h-3 w-3"}),e.phone)),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement(k.A,{variant:J[e.segment]?.color||"gray",size:"sm"},J[e.segment]?.label||"Sin segmento")),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement("div",{className:"text-sm text-gray-900 dark:text-white"},e.total_orders||0)),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement("div",{className:"text-sm font-medium text-gray-900 dark:text-white"},"$",(e.total_spent||0).toLocaleString())),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},r.createElement("div",{className:"text-sm text-gray-500 dark:text-gray-400"},e.last_order_date?new Date(e.last_order_date).toLocaleDateString():"Sin compras")),r.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},r.createElement("div",{className:"flex items-center justify-end gap-2"},r.createElement("button",{onClick:()=>{z(e),$(!0)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"},r.createElement(u.A,{className:"h-4 w-4"})),r.createElement("button",{onClick:()=>{z(e),j(!0)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"},r.createElement(E.A,{className:"h-4 w-4"})),r.createElement("button",{onClick:()=>(async e=>{if(window.confirm(`¿Estás seguro de eliminar a ${e.name}?`))try{if(!(await fetch(`/api/customers/${e.id}`,{method:"DELETE"})).ok)throw new Error("Error al eliminar cliente");q("Cliente eliminado",`${e.name} ha sido eliminado`),G()}catch(e){F("Error","No se pudo eliminar el cliente")}})(e),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"},r.createElement(y.A,{className:"h-4 w-4"}))))))))),0===Q.length&&r.createElement("div",{className:"text-center py-12"},r.createElement(n.A,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-3"}),r.createElement("p",{className:"text-gray-500 dark:text-gray-400"},"No se encontraron clientes")))),S&&r.createElement(T,{customer:_,onSave:async e=>{try{const t=_?`/api/customers/${_.id}`:"/api/customers",a=_?"PUT":"POST";if(!(await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw new Error("Error al guardar cliente");q(_?"Cliente actualizado":"Cliente creado",`${e.name} ha sido ${_?"actualizado":"agregado"} exitosamente`),j(!1),z(null),G()}catch(e){F("Error","No se pudo guardar el cliente")}},onClose:()=>{j(!1),z(null)}}),P&&_&&r.createElement(O,{customer:_,onClose:()=>{$(!1),z(null)},onEdit:()=>{$(!1),j(!0)}}),D&&r.createElement(B,{customers:Q,onClose:()=>I(!1)}))}}}]);